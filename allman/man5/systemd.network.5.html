<link rel='stylesheet' href='../style.css'>
<script src='../script.js'></script>
<h1>NAME</h1>
<p>systemd.network - Network configuration</p>
<h1>SYNOPSIS</h1>
<p><em>network</em>.network</p>
<h1>DESCRIPTION</h1>
<p>A plain ini-style text file that encodes network configuration for
matching network interfaces, used by
<strong>systemd-networkd</strong>(8). See
<strong>systemd.syntax</strong>(7) for a general description of the
syntax.</p>
<p>The main network file must have the extension .network; other
extensions are ignored. Networks are applied to links whenever the links
appear.</p>
<p>The .network files are read from the files located in the system
network directories /lib/systemd/network and
/usr/local/lib/systemd/network, the volatile runtime network directory
/run/systemd/network and the local administration network directory
/etc/systemd/network. All configuration files are collectively sorted
and processed in alphanumeric order, regardless of the directories in
which they live. However, files with identical filenames replace each
other. It is recommended that each filename is prefixed with a number
(e.g. 10-eth0.network). Otherwise, the default .network files or those
generated by <strong>systemd-network-generator.service</strong>(8) may
take precedence over user configured files. Files in /etc/ have the
highest priority, files in /run/ take precedence over files with the
same name under /usr/. This can be used to override a system-supplied
configuration file with a local file if needed. As a special case, an
empty file (file size 0) or symlink with the same name pointing to
/dev/null disables the configuration file entirely (it is "masked").</p>
<p>Along with the network file foo.network, a "drop-in" directory
foo.network.d/ may exist. All files with the suffix ".conf" from this
directory will be merged in the alphanumeric order and parsed after the
main file itself has been parsed. This is useful to alter or add
configuration settings, without having to modify the main configuration
file. Each drop-in file must have appropriate section headers.</p>
<p>In addition to /etc/systemd/network, drop-in ".d" directories can be
placed in /lib/systemd/network or /run/systemd/network directories.
Drop-in files in /etc/ take precedence over those in /run/ which in turn
take precedence over those in /lib/. Drop-in files under any of these
directories take precedence over the main network file wherever
located.</p>
<h1>[MATCH] SECTION OPTIONS</h1>
<p>The network file contains a [Match] section, which determines if a
given network file may be applied to a given interface; and a [Network]
section specifying how the interface should be configured. The first (in
alphanumeric order) of the network files that matches a given interface
is applied, all later files are ignored, even if they match as well.</p>
<p>A network file is said to match a network interface if all matches
specified by the [Match] section are satisfied. When a network file does
not contain valid settings in [Match] section, then the file will match
all interfaces and <strong>systemd-networkd</strong> warns about that.
Hint: to avoid the warning and to make it clear that all interfaces
shall be matched, add the following:</p>
<blockquote>
<pre><code>Name=*</code></pre>
</blockquote>
<p>The following keys are accepted:</p>
<p><em>MACAddress=</em></p>
<blockquote>
<p>A whitespace-separated list of hardware addresses. The acceptable
formats are:</p>
<p><strong>colon-delimited hexadecimal</strong></p>
<blockquote>
<p>Each field must be one byte. E.g. "12:34:56:78:90:ab" or
"AA:BB:CC:DD:EE:FF".</p>
</blockquote>
<p><strong>hyphen-delimited hexadecimal</strong></p>
<blockquote>
<p>Each field must be one byte. E.g. "12-34-56-78-90-ab" or
"AA-BB-CC-DD-EE-FF".</p>
</blockquote>
<p><strong>dot-delimited hexadecimal</strong></p>
<blockquote>
<p>Each field must be two bytes. E.g. "1234.5678.90ab" or
"AABB.CCDD.EEFF".</p>
</blockquote>
<p><strong>IPv4 address format</strong></p>
<blockquote>
<p>E.g. "127.0.0.1" or "192.168.0.1".</p>
</blockquote>
<p><strong>IPv6 address format</strong></p>
<blockquote>
<p>E.g. "2001:0db8:85a3::8a2e:0370:7334" or "::1".</p>
</blockquote>
<p>The total length of each MAC address must be 4 (for IPv4 tunnel), 6
(for Ethernet), 16 (for IPv6 tunnel), or 20 (for InfiniBand). This
option may appear more than once, in which case the lists are merged. If
the empty string is assigned to this option, the list of hardware
addresses defined prior to this is reset. Defaults to unset.</p>
</blockquote>
<p><em>PermanentMACAddress=</em></p>
<blockquote>
<p>A whitespace-separated list of hardwares permanent addresses. While
<em>MACAddress=</em> matches the devices current MAC address, this
matches the devices permanent MAC address, which may be different from
the current one. Use full colon-, hyphen- or dot-delimited hexadecimal,
or IPv4 or IPv6 address format. This option may appear more than once,
in which case the lists are merged. If the empty string is assigned to
this option, the list of hardware addresses defined prior to this is
reset. Defaults to unset.</p>
</blockquote>
<p><em>Path=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the
persistent path, as exposed by the udev property <em>ID_PATH</em>.</p>
</blockquote>
<p><em>Driver=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the driver
currently bound to the device, as exposed by the udev property
<em>ID_NET_DRIVER</em> of its parent device, or if that is not set, the
driver as exposed by <strong>ethtool -i</strong> of the device itself.
If the list is prefixed with a "!", the test is inverted.</p>
</blockquote>
<p><em>Type=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the device
type, as exposed by <strong>networkctl list</strong>. If the list is
prefixed with a "!", the test is inverted. Some valid values are
"ether", "loopback", "wlan", "wwan". Valid types are named either from
the udev "DEVTYPE" attribute, or "ARPHRD_" macros in linux/if_arp.h, so
this is not comprehensive.</p>
</blockquote>
<p><em>Kind=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the device
kind, as exposed by <strong>networkctl status</strong>
<em>INTERFACE</em> or <strong>ip -d link show</strong>
<em>INTERFACE</em>. If the list is prefixed with a "!", the test is
inverted. Some valid values are "bond", "bridge", "gre", "tun", "veth".
Valid kinds are given by netlinks "IFLA_INFO_KIND" attribute, so this is
not comprehensive.</p>
</blockquote>
<p><em>Property=</em></p>
<blockquote>
<p>A whitespace-separated list of udev property names with their values
after equals sign ("="). If multiple properties are specified, the test
results are ANDed. If the list is prefixed with a "!", the test is
inverted. If a value contains white spaces, then please quote whole key
and value pair. If a value contains quotation, then please escape the
quotation with "\".</p>
<p>Example: if a .link file has the following:</p>
<blockquote>
<pre><code>Property=ID_MODEL_ID=9999 &quot;ID_VENDOR_FROM_DATABASE=vendor name&quot; &quot;KEY=with \&quot;quotation\&quot;&quot;</code></pre>
</blockquote>
<p>then, the .link file matches only when an interface has all the above
three properties.</p>
</blockquote>
<p><em>Name=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the device
name, as exposed by the udev property "INTERFACE", or devices
alternative names. If the list is prefixed with a "!", the test is
inverted.</p>
</blockquote>
<p><em>WLANInterfaceType=</em></p>
<blockquote>
<p>A whitespace-separated list of wireless network type. Supported
values are "ad-hoc", "station", "ap", "ap-vlan", "wds", "monitor",
"mesh-point", "p2p-client", "p2p-go", "p2p-device", "ocb", and "nan". If
the list is prefixed with a "!", the test is inverted.</p>
</blockquote>
<p><em>SSID=</em></p>
<blockquote>
<p>A whitespace-separated list of shell-style globs matching the SSID of
the currently connected wireless LAN. If the list is prefixed with a
"!", the test is inverted.</p>
</blockquote>
<p><em>BSSID=</em></p>
<blockquote>
<p>A whitespace-separated list of hardware address of the currently
connected wireless LAN. Use full colon-, hyphen- or dot-delimited
hexadecimal. See the example in <em>MACAddress=</em>. This option may
appear more than once, in which case the lists are merged. If the empty
string is assigned to this option, the list is reset.</p>
</blockquote>
<p><em>Host=</em></p>
<blockquote>
<p>Matches against the hostname or machine ID of the host. See
<em>ConditionHost=</em> in <strong>systemd.unit</strong>(5) for details.
When prefixed with an exclamation mark ("!"), the result is negated. If
an empty string is assigned, the previously assigned value is
cleared.</p>
</blockquote>
<p><em>Virtualization=</em></p>
<blockquote>
<p>Checks whether the system is executed in a virtualized environment
and optionally test whether it is a specific implementation. See
<em>ConditionVirtualization=</em> in <strong>systemd.unit</strong>(5)
for details. When prefixed with an exclamation mark ("!"), the result is
negated. If an empty string is assigned, the previously assigned value
is cleared.</p>
</blockquote>
<p><em>KernelCommandLine=</em></p>
<blockquote>
<p>Checks whether a specific kernel command line option is set. See
<em>ConditionKernelCommandLine=</em> in <strong>systemd.unit</strong>(5)
for details. When prefixed with an exclamation mark ("!"), the result is
negated. If an empty string is assigned, the previously assigned value
is cleared.</p>
</blockquote>
<p><em>KernelVersion=</em></p>
<blockquote>
<p>Checks whether the kernel version (as reported by <strong>uname
-r</strong>) matches a certain expression. See
<em>ConditionKernelVersion=</em> in <strong>systemd.unit</strong>(5) for
details. When prefixed with an exclamation mark ("!"), the result is
negated. If an empty string is assigned, the previously assigned value
is cleared.</p>
</blockquote>
<p><em>Credential=</em></p>
<blockquote>
<p>Checks whether the specified credential was passed to the
systemd-networkd.service service. See <strong>System and Service
Credentials</strong>[1] for details. When prefixed with an exclamation
mark ("!"), the result is negated. If an empty string is assigned, the
previously assigned value is cleared.</p>
</blockquote>
<p><em>Architecture=</em></p>
<blockquote>
<p>Checks whether the system is running on a specific architecture. See
<em>ConditionArchitecture=</em> in <strong>systemd.unit</strong>(5) for
details. When prefixed with an exclamation mark ("!"), the result is
negated. If an empty string is assigned, the previously assigned value
is cleared.</p>
</blockquote>
<p><em>Firmware=</em></p>
<blockquote>
<p>Checks whether the system is running on a machine with the specified
firmware. See <em>ConditionFirmware=</em> in
<strong>systemd.unit</strong>(5) for details. When prefixed with an
exclamation mark ("!"), the result is negated. If an empty string is
assigned, the previously assigned value is cleared.</p>
</blockquote>
<h1>[LINK] SECTION OPTIONS</h1>
<p>The [Link] section accepts the following keys:</p>
<p><em>MACAddress=</em></p>
<blockquote>
<p>The hardware address to set for the device.</p>
</blockquote>
<p><em>MTUBytes=</em></p>
<blockquote>
<p>The maximum transmission unit in bytes to set for the device. The
usual suffixes K, M, G, are supported and are understood to the base of
1024.</p>
<p>Note that if IPv6 is enabled on the interface, and the MTU is chosen
below 1280 (the minimum MTU for IPv6) it will automatically be increased
to this value.</p>
</blockquote>
<p><em>ARP=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, the ARP (low-level Address
Resolution Protocol) for this interface is enabled. When unset, the
kernels default will be used.</p>
<p>For example, disabling ARP is useful when creating multiple MACVLAN
or VLAN virtual interfaces atop a single lower-level physical interface,
which will then only serve as a link/"bridge" device aggregating traffic
to the same physical link and not participate in the network otherwise.
Defaults to unset.</p>
</blockquote>
<p><em>Multicast=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, the multicast flag on the device is
enabled. Defaults to unset.</p>
</blockquote>
<p><em>AllMulticast=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, the driver retrieves all multicast
packets from the network. This happens when multicast routing is
enabled. Defaults to unset.</p>
</blockquote>
<p><em>Promiscuous=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, promiscuous mode of the interface is
enabled. Defaults to unset.</p>
<p>If this is set to false for the underlying link of a "passthru" mode
MACVLAN/MACVTAP, the virtual interface will be created with the
"nopromisc" flag set.</p>
</blockquote>
<p><em>Unmanaged=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", no attempts are made to bring up or
configure matching links, equivalent to when there are no matching
network files. Defaults to "no".</p>
<p>This is useful for preventing later matching network files from
interfering with certain interfaces that are fully controlled by other
applications.</p>
</blockquote>
<p><em>Group=</em></p>
<blockquote>
<p>Link groups are similar to port ranges found in managed switches.
When network interfaces are added to a numbered group, operations on all
the interfaces from that group can be performed at once. Takes an
unsigned integer in the range 0...2147483647. Defaults to unset.</p>
</blockquote>
<p><em>RequiredForOnline=</em></p>
<blockquote>
<p>Takes a boolean or a minimum operational state and an optional
maximum operational state. Please see <strong>networkctl</strong>(1) for
possible operational states. When "yes", the network is deemed required
when determining whether the system is online (including when running
<strong>systemd-networkd-wait-online</strong>). When "no", the network
is ignored when determining the online state. When a minimum operational
state and an optional maximum operational state are set, "yes" is
implied, and this controls the minimum and maximum operational state
required for the network interface to be considered online.</p>
<p>Defaults to "yes" when <em>ActivationPolicy=</em> is not set, or set
to "up", "always-up", or "bound". Defaults to "no" when
<em>ActivationPolicy=</em> is set to "manual" or "down". This is forced
to "no" when <em>ActivationPolicy=</em> is set to "always-down".</p>
<p>The network will be brought up normally (as configured by
<em>ActivationPolicy=</em>), but in the event that there is no address
being assigned by DHCP or the cable is not plugged in, the link will
simply remain offline and be skipped automatically by
<strong>systemd-networkd-wait-online</strong> if
"RequiredForOnline=no".</p>
</blockquote>
<p><em>RequiredFamilyForOnline=</em></p>
<blockquote>
<p>Takes an address family. When specified, an IP address in the given
family is deemed required when determining whether the link is online
(including when running <strong>systemd-networkd-wait-online</strong>).
Takes one of "ipv4", "ipv6", "both", or "any". Defaults to "any". Note
that this option has no effect if "RequiredForOnline=no", or if
"RequiredForOnline=" specifies a minimum operational state below
"degraded".</p>
</blockquote>
<p><em>ActivationPolicy=</em></p>
<blockquote>
<p>Specifies the policy for <strong>systemd-networkd</strong> managing
the link administrative state. Specifically, this controls how
<strong>systemd-networkd</strong> changes the network devices "IFF_UP"
flag, which is sometimes controlled by system administrators by running
e.g., <strong>ip link set dev eth0 up</strong> or <strong>ip link set
dev eth0 down</strong>, and can also be changed with <strong>networkctl
up eth0</strong> or <strong>networkctl down eth0</strong>.</p>
<p>Takes one of "up", "always-up", "manual", "always-down", "down", or
"bound". When "manual", <strong>systemd-networkd</strong> will not
change the links admin state automatically; the system administrator
must bring the interface up or down manually, as desired. When "up" (the
default) or "always-up", or "down" or "always-down",
<strong>systemd-networkd</strong> will set the link up or down,
respectively, when the interface is (re)configured. When "always-up" or
"always-down", <strong>systemd-networkd</strong> will set the link up or
down, respectively, any time <strong>systemd-networkd</strong> detects a
change in the administrative state. When <em>BindCarrier=</em> is also
set, this is automatically set to "bound" and any other value is
ignored.</p>
<p>When the policy is set to "down" or "manual", the default value of
<em>RequiredForOnline=</em> is "no". When the policy is set to
"always-down", the value of <em>RequiredForOnline=</em> forced to
"no".</p>
<p>The administrative state is not the same as the carrier state, so
using "always-up" does not mean the link will never lose carrier. The
link carrier depends on both the administrative state as well as the
network devices physical connection. However, to avoid reconfiguration
failures, when using "always-up", <em>IgnoreCarrierLoss=</em> is forced
to true.</p>
</blockquote>
<h1>[SR-IOV] SECTION OPTIONS</h1>
<p>The [SR-IOV] section accepts the following keys. Specify several
[SR-IOV] sections to configure several SR-IOVs. SR-IOV provides the
ability to partition a single physical PCI resource into virtual PCI
functions which can then be injected into a VM. In the case of network
VFs, SR-IOV improves north-south network performance (that is, traffic
with endpoints outside the host machine) by allowing traffic to bypass
the host machine’s network stack.</p>
<p><em>VirtualFunction=</em></p>
<blockquote>
<p>Specifies a Virtual Function (VF), lightweight PCIe function designed
solely to move data in and out. Takes an integer in the range
0...2147483646. This option is compulsory.</p>
</blockquote>
<p><em>VLANId=</em></p>
<blockquote>
<p>Specifies VLAN ID of the virtual function. Takes an integer in the
range 1...4095.</p>
</blockquote>
<p><em>QualityOfService=</em></p>
<blockquote>
<p>Specifies quality of service of the virtual function. Takes an
integer in the range 1...4294967294.</p>
</blockquote>
<p><em>VLANProtocol=</em></p>
<blockquote>
<p>Specifies VLAN protocol of the virtual function. Takes "802.1Q" or
"802.1ad".</p>
</blockquote>
<p><em>MACSpoofCheck=</em></p>
<blockquote>
<p>Takes a boolean. Controls the MAC spoof checking. When unset, the
kernels default will be used.</p>
</blockquote>
<p><em>QueryReceiveSideScaling=</em></p>
<blockquote>
<p>Takes a boolean. Toggle the ability of querying the receive side
scaling (RSS) configuration of the virtual function (VF). The VF RSS
information like RSS hash key may be considered sensitive on some
devices where this information is shared between VF and the physical
function (PF). When unset, the kernels default will be used.</p>
</blockquote>
<p><em>Trust=</em></p>
<blockquote>
<p>Takes a boolean. Allows one to set trust mode of the virtual function
(VF). When set, VF users can set a specific feature which may impact
security and/or performance. When unset, the kernels default will be
used.</p>
</blockquote>
<p><em>LinkState=</em></p>
<blockquote>
<p>Allows one to set the link state of the virtual function (VF). Takes
a boolean or a special value "auto". Setting to "auto" means a
reflection of the physical function (PF) link state, "yes" lets the VF
to communicate with other VFs on this host even if the PF link state is
down, "no" causes the hardware to drop any packets sent by the VF. When
unset, the kernels default will be used.</p>
</blockquote>
<p><em>MACAddress=</em></p>
<blockquote>
<p>Specifies the MAC address for the virtual function.</p>
</blockquote>
<h1>[NETWORK] SECTION OPTIONS</h1>
<p>The [Network] section accepts the following keys:</p>
<p><em>Description=</em></p>
<blockquote>
<p>A description of the device. This is only used for presentation
purposes.</p>
</blockquote>
<p><em>DHCP=</em></p>
<blockquote>
<p>Enables DHCPv4 and/or DHCPv6 client support. Accepts "yes", "no",
"ipv4", or "ipv6". Defaults to "no".</p>
<p>Note that DHCPv6 will by default be triggered by Router
Advertisements, if reception is enabled, regardless of this parameter.
By explicitly enabling DHCPv6 support here, the DHCPv6 client will be
started in the mode specified by the <em>WithoutRA=</em> setting in the
[DHCPv6] section, regardless of the presence of routers on the link, or
what flags the routers pass. See <em>IPv6AcceptRA=</em>.</p>
<p>Furthermore, note that by default the domain name specified through
DHCP is not used for name resolution. See option
<strong>UseDomains=</strong> below.</p>
<p>See the [DHCPv4] or [DHCPv6] sections below for further configuration
options for the DHCP client support.</p>
</blockquote>
<p><em>DHCPServer=</em></p>
<blockquote>
<p>Takes a boolean. If set to "yes", DHCPv4 server will be started.
Defaults to "no". Further settings for the DHCP server may be set in the
[DHCPServer] section described below.</p>
</blockquote>
<p><em>LinkLocalAddressing=</em></p>
<blockquote>
<p>Enables link-local address autoconfiguration. Accepts
<strong>yes</strong>, <strong>no</strong>, <strong>ipv4</strong>, and
<strong>ipv6</strong>. An IPv6 link-local address is configured when
<strong>yes</strong> or <strong>ipv6</strong>. An IPv4 link-local
address is configured when <strong>yes</strong> or <strong>ipv4</strong>
and when DHCPv4 autoconfiguration has been unsuccessful for some time.
(IPv4 link-local address autoconfiguration will usually happen in
parallel with repeated attempts to acquire a DHCPv4 lease).</p>
<p>Defaults to <strong>no</strong> when <em>KeepMaster=</em> or
<em>Bridge=</em> is set or when the specified
<em>MACVLAN=</em>/<em>MACVTAP=</em> has <em>Mode=passthru</em>, or
<strong>ipv6</strong> otherwise.</p>
</blockquote>
<p><em>IPv6LinkLocalAddressGenerationMode=</em></p>
<blockquote>
<p>Specifies how IPv6 link-local address is generated. Takes one of
"eui64", "none", "stable-privacy" and "random". When unset,
"stable-privacy" is used if <em>IPv6StableSecretAddress=</em> is
specified, and if not, "eui64" is used. Note that if
<em>LinkLocalAddressing=</em> is "no" or "ipv4", then
<em>IPv6LinkLocalAddressGenerationMode=</em> will be ignored. Also, even
if <em>LinkLocalAddressing=</em> is "yes" or "ipv6", setting
<em>IPv6LinkLocalAddressGenerationMode=none</em> disables to configure
an IPv6 link-local address.</p>
</blockquote>
<p><em>IPv6StableSecretAddress=</em></p>
<blockquote>
<p>Takes an IPv6 address. The specified address will be used as a stable
secret for generating IPv6 link-local address. If this setting is
specified, and <em>IPv6LinkLocalAddressGenerationMode=</em> is unset,
then <em>IPv6LinkLocalAddressGenerationMode=stable-privacy</em> is
implied. If this setting is not specified, and "stable-privacy" is set
to <em>IPv6LinkLocalAddressGenerationMode=</em>, then a stable secret
address will be generated from the local machine ID and the interface
name.</p>
</blockquote>
<p><em>IPv4LLStartAddress=</em></p>
<blockquote>
<p>Specifies the first IPv4 link-local address to try. Takes an IPv4
address for example 169.254.1.2, from the link-local address range:
169.254.0.0/16 except for 169.254.0.0/24 and 169.254.255.0/24. This
setting may be useful if the device should always have the same address
as long as there is no address conflict. When unset, a random address
will be automatically selected. Defaults to unset.</p>
</blockquote>
<p><em>IPv4LLRoute=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, sets up the route needed for
non-IPv4LL hosts to communicate with IPv4LL-only hosts. Defaults to
false.</p>
</blockquote>
<p><em>DefaultRouteOnDevice=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, sets up the IPv4 default route bound
to the interface. Defaults to false. This is useful when creating routes
on point-to-point interfaces. This is equivalent to e.g. the
following,</p>
<blockquote>
<pre><code>ip route add default dev veth99</code></pre>
</blockquote>
<p>or,</p>
<blockquote>
<pre><code>[Route]
Gateway=0.0.0.0</code></pre>
</blockquote>
<p>Currently, there are no way to specify e.g., the table for the route
configured by this setting. To configure the default route with such an
additional property, please use the following instead:</p>
<blockquote>
<pre><code>[Route]
Gateway=0.0.0.0
Table=1234</code></pre>
</blockquote>
<p>If youd like to create an IPv6 default route bound to the interface,
please use the following:</p>
<blockquote>
<pre><code>[Route]
Gateway=::
Table=1234</code></pre>
</blockquote>
</blockquote>
<p><em>LLMNR=</em></p>
<blockquote>
<p>Takes a boolean or "resolve". When true, enables <strong>Link-Local
Multicast Name Resolution</strong>[2] on the link. When set to
"resolve", only resolution is enabled, but not host registration and
announcement. Defaults to true. This setting is read by
<strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>MulticastDNS=</em></p>
<blockquote>
<p>Takes a boolean or "resolve". When true, enables <strong>Multicast
DNS</strong>[3] support on the link. When set to "resolve", only
resolution is enabled, but not host or service registration and
announcement. Defaults to false. This setting is read by
<strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>DNSOverTLS=</em></p>
<blockquote>
<p>Takes a boolean or "opportunistic". When true, enables
<strong>DNS-over-TLS</strong>[4] support on the link. When set to
"opportunistic", compatibility with non-DNS-over-TLS servers is
increased, by automatically turning off DNS-over-TLS servers in this
case. This option defines a per-interface setting for
<strong>resolved.conf</strong>(5)s global <em>DNSOverTLS=</em> option.
Defaults to unset, and the global setting will be used. This setting is
read by <strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>DNSSEC=</em></p>
<blockquote>
<p>Takes a boolean or "allow-downgrade". When true, enables
<strong>DNSSEC</strong>[5] DNS validation support on the link. When set
to "allow-downgrade", compatibility with non-DNSSEC capable networks is
increased, by automatically turning off DNSSEC in this case. This option
defines a per-interface setting for <strong>resolved.conf</strong>(5)s
global <em>DNSSEC=</em> option. Defaults to unset, and the global
setting will be used. This setting is read by
<strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>DNSSECNegativeTrustAnchors=</em></p>
<blockquote>
<p>A space-separated list of DNSSEC negative trust anchor domains. If
specified and DNSSEC is enabled, look-ups done via the interfaces DNS
server will be subject to the list of negative trust anchors, and not
require authentication for the specified domains, or anything below it.
Use this to disable DNSSEC authentication for specific private domains,
that cannot be proven valid using the Internet DNS hierarchy. Defaults
to the empty list. This setting is read by
<strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>LLDP=</em></p>
<blockquote>
<p>Controls support for Ethernet LLDP packet reception. LLDP is a
link-layer protocol commonly implemented on professional routers and
bridges which announces which physical port a system is connected to, as
well as other related data. Accepts a boolean or the special value
"routers-only". When true, incoming LLDP packets are accepted and a
database of all LLDP neighbors maintained. If "routers-only" is set only
LLDP data of various types of routers is collected and LLDP data about
other types of devices ignored (such as stations, telephones and
others). If false, LLDP reception is disabled. Defaults to
"routers-only". Use <strong>networkctl</strong>(1) to query the
collected neighbor data. LLDP is only available on Ethernet links. See
<em>EmitLLDP=</em> below for enabling LLDP packet emission from the
local system.</p>
</blockquote>
<p><em>EmitLLDP=</em></p>
<blockquote>
<p>Controls support for Ethernet LLDP packet emission. Accepts a boolean
parameter or the special values "nearest-bridge", "non-tpmr-bridge" and
"customer-bridge". Defaults to false, which turns off LLDP packet
emission. If not false, a short LLDP packet with information about the
local system is sent out in regular intervals on the link. The LLDP
packet will contain information about the local hostname, the local
machine ID (as stored in <strong>machine-id</strong>(5)) and the local
interface name, as well as the pretty hostname of the system (as set in
<strong>machine-info</strong>(5)). LLDP emission is only available on
Ethernet links. Note that this setting passes data suitable for
identification of host to the network and should thus not be enabled on
untrusted networks, where such identification data should not be made
available. Use this option to permit other systems to identify on which
interfaces they are connected to this system. The three special values
control propagation of the LLDP packets. The "nearest-bridge" setting
permits propagation only to the nearest connected bridge,
"non-tpmr-bridge" permits propagation across Two-Port MAC Relays, but
not any other bridges, and "customer-bridge" permits propagation until a
customer bridge is reached. For details about these concepts, see
<strong>IEEE 802.1AB-2016</strong>[6]. Note that configuring this
setting to true is equivalent to "nearest-bridge", the recommended and
most restricted level of propagation. See <em>LLDP=</em> above for an
option to enable LLDP reception.</p>
</blockquote>
<p><em>BindCarrier=</em></p>
<blockquote>
<p>A link name or a list of link names. When set, controls the behavior
of the current link. When all links in the list are in an operational
down state, the current link is brought down. When at least one link has
carrier, the current interface is brought up.</p>
<p>This forces <em>ActivationPolicy=</em> to be set to "bound".</p>
</blockquote>
<p><em>Address=</em></p>
<blockquote>
<p>A static IPv4 or IPv6 address and its prefix length, separated by a
"/" character. Specify this key more than once to configure several
addresses. The format of the address must be as described in
<strong>inet_pton</strong>(3). This is a short-hand for an [Address]
section only containing an Address key (see below). This option may be
specified more than once.</p>
<p>If the specified address is "0.0.0.0" (for IPv4) or "::" (for IPv6),
a new address range of the requested size is automatically allocated
from a system-wide pool of unused ranges. Note that the prefix length
must be equal or larger than 8 for IPv4, and 64 for IPv6. The allocated
range is checked against all current network interfaces and all known
network configuration files to avoid address range conflicts. The
default system-wide pool consists of 192.168.0.0/16, 172.16.0.0/12 and
10.0.0.0/8 for IPv4, and fd00::/8 for IPv6. This functionality is useful
to manage a large number of dynamically created network interfaces with
the same network configuration and automatic address range
assignment.</p>
</blockquote>
<p><em>Gateway=</em></p>
<blockquote>
<p>The gateway address, which must be in the format described in
<strong>inet_pton</strong>(3). This is a short-hand for a [Route]
section only containing a <em>Gateway=</em> key. This option may be
specified more than once.</p>
</blockquote>
<p><em>DNS=</em></p>
<blockquote>
<p>A DNS server address, which must be in the format described in
<strong>inet_pton</strong>(3). This option may be specified more than
once. Each address can optionally take a port number separated with ":",
a network interface name or index separated with "%", and a Server Name
Indication (SNI) separated with "#". When IPv6 address is specified with
a port number, then the address must be in the square brackets. That is,
the acceptable full formats are
"111.222.333.444:9953%ifname#example.com" for IPv4 and
"[1111:2222::3333]:9953%ifname#example.com" for IPv6. If an empty string
is assigned, then the all previous assignments are cleared. This setting
is read by <strong>systemd-resolved.service</strong>(8).</p>
</blockquote>
<p><em>Domains=</em></p>
<blockquote>
<p>A whitespace-separated list of domains which should be resolved using
the DNS servers on this link. Each item in the list should be a domain
name, optionally prefixed with a tilde ("~"). The domains with the
prefix are called "routing-only domains". The domains without the prefix
are called "search domains" and are first used as search suffixes for
extending single-label hostnames (hostnames containing no dots) to
become fully qualified domain names (FQDNs). If a single-label hostname
is resolved on this interface, each of the specified search domains are
appended to it in turn, converting it into a fully qualified domain
name, until one of them may be successfully resolved.</p>
<p>Both "search" and "routing-only" domains are used for routing of DNS
queries: look-ups for hostnames ending in those domains (hence also
single label names, if any "search domains" are listed), are routed to
the DNS servers configured for this interface. The domain routing logic
is particularly useful on multi-homed hosts with DNS servers serving
particular private DNS zones on each interface.</p>
<p>The "routing-only" domain "~." (the tilde indicating definition of a
routing domain, the dot referring to the DNS root domain which is the
implied suffix of all valid DNS names) has special effect. It causes all
DNS traffic which does not match another configured domain routing entry
to be routed to DNS servers specified for this interface. This setting
is useful to prefer a certain set of DNS servers if a link on which they
are connected is available.</p>
<p>This setting is read by <strong>systemd-resolved.service</strong>(8).
"Search domains" correspond to the <em>domain</em> and <em>search</em>
entries in <strong>resolv.conf</strong>(5). Domain name routing has no
equivalent in the traditional glibc API, which has no concept of domain
name servers limited to a specific link.</p>
</blockquote>
<p><em>DNSDefaultRoute=</em></p>
<blockquote>
<p>Takes a boolean argument. If true, this links configured DNS servers
are used for resolving domain names that do not match any links
configured <em>Domains=</em> setting. If false, this links configured
DNS servers are never used for such domains, and are exclusively used
for resolving names that match at least one of the domains configured on
this link. If not specified defaults to an automatic mode: queries not
matching any links configured domains will be routed to this link if it
has no routing-only domains configured.</p>
</blockquote>
<p><em>NTP=</em></p>
<blockquote>
<p>An NTP server address (either an IP address, or a hostname). This
option may be specified more than once. This setting is read by
<strong>systemd-timesyncd.service</strong>(8).</p>
</blockquote>
<p><em>IPForward=</em></p>
<blockquote>
<p>Configures IP packet forwarding for the system. If enabled, incoming
packets on any network interface will be forwarded to any other
interfaces according to the routing table. Takes a boolean, or the
values "ipv4" or "ipv6", which only enable IP packet forwarding for the
specified address family. This controls the net.ipv4.ip_forward and
net.ipv6.conf.all.forwarding sysctl options of the network interface
(see <strong>IP Sysctl</strong>[7] for details about sysctl options).
Defaults to "no".</p>
<p>Note: this setting controls a global kernel option, and does so one
way only: if a network that has this setting enabled is set up the
global setting is turned on. However, it is never turned off again, even
after all networks with this setting enabled are shut down again.</p>
<p>To allow IP packet forwarding only between specific network
interfaces use a firewall.</p>
</blockquote>
<p><em>IPMasquerade=</em></p>
<blockquote>
<p>Configures IP masquerading for the network interface. If enabled,
packets forwarded from the network interface will be appear as coming
from the local host. Takes one of "ipv4", "ipv6", "both", or "no".
Defaults to "no". If enabled, this automatically sets
<em>IPForward=</em> to one of "ipv4", "ipv6" or "yes".</p>
<p>Note. Any positive boolean values such as "yes" or "true" are now
deprecated. Please use one of the values in the above.</p>
</blockquote>
<p><em>IPv6PrivacyExtensions=</em></p>
<blockquote>
<p>Configures use of stateless temporary addresses that change over time
(see <strong>RFC 4941</strong>[8], Privacy Extensions for Stateless
Address Autoconfiguration in IPv6). Takes a boolean or the special
values "prefer-public" and "kernel". When true, enables the privacy
extensions and prefers temporary addresses over public addresses. When
"prefer-public", enables the privacy extensions, but prefers public
addresses over temporary addresses. When false, the privacy extensions
remain disabled. When "kernel", the kernels default setting will be left
in place. Defaults to "no".</p>
</blockquote>
<p><em>IPv6AcceptRA=</em></p>
<blockquote>
<p>Takes a boolean. Controls IPv6 Router Advertisement (RA) reception
support for the interface. If true, RAs are accepted; if false, RAs are
ignored. When RAs are accepted, they may trigger the start of the DHCPv6
client if the relevant flags are set in the RA data, or if no routers
are found on the link. The default is to disable RA reception for bridge
devices or when IP forwarding is enabled, and to enable it otherwise.
Cannot be enabled on bond devices and when link-local addressing is
disabled.</p>
<p>Further settings for the IPv6 RA support may be configured in the
[IPv6AcceptRA] section, see below.</p>
<p>Also see <strong>IP Sysctl</strong>[7] in the kernel documentation
regarding "accept_ra", but note that systemds setting of
<strong>1</strong> (i.e. true) corresponds to kernels setting of
<strong>2</strong>.</p>
<p>Note that kernels implementation of the IPv6 RA protocol is always
disabled, regardless of this setting. If this option is enabled, a
userspace implementation of the IPv6 RA protocol is used, and the
kernels own implementation remains disabled, since
<strong>systemd-networkd</strong> needs to know all details supplied in
the advertisements, and these are not available from the kernel if the
kernels own implementation is used.</p>
</blockquote>
<p><em>IPv6DuplicateAddressDetection=</em></p>
<blockquote>
<p>Configures the amount of IPv6 Duplicate Address Detection (DAD)
probes to send. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>IPv6HopLimit=</em></p>
<blockquote>
<p>Configures IPv6 Hop Limit. For each router that forwards the packet,
the hop limit is decremented by 1. When the hop limit field reaches
zero, the packet is discarded. When unset, the kernels default will be
used.</p>
</blockquote>
<p><em>IPv4AcceptLocal=</em></p>
<blockquote>
<p>Takes a boolean. Accept packets with local source addresses. In
combination with suitable routing, this can be used to direct packets
between two local interfaces over the wire and have them accepted
properly. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>IPv4RouteLocalnet=</em></p>
<blockquote>
<p>Takes a boolean. When true, the kernel does not consider loopback
addresses as martian source or destination while routing. This enables
the use of 127.0.0.0/8 for local routing purposes. When unset, the
kernels default will be used.</p>
</blockquote>
<p><em>IPv4ProxyARP=</em></p>
<blockquote>
<p>Takes a boolean. Configures proxy ARP for IPv4. Proxy ARP is the
technique in which one host, usually a router, answers ARP requests
intended for another machine. By "faking" its identity, the router
accepts responsibility for routing packets to the "real" destination.
See <strong>RFC 1027</strong>[9]. When unset, the kernels default will
be used.</p>
</blockquote>
<p><em>IPv6ProxyNDP=</em></p>
<blockquote>
<p>Takes a boolean. Configures proxy NDP for IPv6. Proxy NDP (Neighbor
Discovery Protocol) is a technique for IPv6 to allow routing of
addresses to a different destination when peers expect them to be
present on a certain physical link. In this case a router answers
Neighbour Advertisement messages intended for another machine by
offering its own MAC address as destination. Unlike proxy ARP for IPv4,
it is not enabled globally, but will only send Neighbour Advertisement
messages for addresses in the IPv6 neighbor proxy table, which can also
be shown by <strong>ip -6 neighbour show proxy</strong>.
systemd-networkd will control the per-interface `proxy_ndp` switch for
each configured interface depending on this option. When unset, the
kernels default will be used.</p>
</blockquote>
<p><em>IPv6ProxyNDPAddress=</em></p>
<blockquote>
<p>An IPv6 address, for which Neighbour Advertisement messages will be
proxied. This option may be specified more than once. systemd-networkd
will add the <em>IPv6ProxyNDPAddress=</em> entries to the kernels IPv6
neighbor proxy table. This setting implies <em>IPv6ProxyNDP=yes</em> but
has no effect if <em>IPv6ProxyNDP=</em> has been set to false. When
unset, the kernels default will be used.</p>
</blockquote>
<p><em>IPv6SendRA=</em></p>
<blockquote>
<p>Whether to enable or disable Router Advertisement sending on a link.
Takes a boolean value. When enabled, prefixes configured in [IPv6Prefix]
sections and routes configured in the [IPv6RoutePrefix] sections are
distributed as defined in the [IPv6SendRA] section. If
<em>DHCPPrefixDelegation=</em> is enabled, then the delegated prefixes
are also distributed. See <em>DCHPPrefixDelegation=</em> setting and the
[IPv6SendRA], [IPv6Prefix], [IPv6RoutePrefix], and
[DHCPPrefixDelegation] sections for more configuration options.</p>
</blockquote>
<p><em>DHCPPrefixDelegation=</em></p>
<blockquote>
<p>Takes a boolean value. When enabled, requests subnet prefixes on
another link via the DHCPv6 protocol or via the 6RD option in the DHCPv4
protocol. An address within each delegated prefix will be assigned, and
the prefixes will be announced through IPv6 Router Advertisement if
<em>IPv6SendRA=</em> is enabled. This behaviour can be configured in the
[DHCPPrefixDelegation] section. Defaults to disabled.</p>
</blockquote>
<p><em>IPv6MTUBytes=</em></p>
<blockquote>
<p>Configures IPv6 maximum transmission unit (MTU). An integer greater
than or equal to 1280 bytes. When unset, the kernels default will be
used.</p>
</blockquote>
<p><em>KeepMaster=</em></p>
<blockquote>
<p>Takes a boolean value. When enabled, the current master interface
index will not be changed, and <em>BatmanAdvanced=</em>, <em>Bond=</em>,
<em>Bridge=</em>, and <em>VRF=</em> settings are ignored. This may be
useful when a netdev with a master interface is created by another
program, e.g. <strong>systemd-nspawn</strong>(1). Defaults to false.</p>
</blockquote>
<p><em>BatmanAdvanced=</em>, <em>Bond=</em>, <em>Bridge=</em>,
<em>VRF=</em></p>
<blockquote>
<p>The name of the B.A.T.M.A.N. Advanced, bond, bridge, or VRF interface
to add the link to. See <strong>systemd.netdev</strong>(5).</p>
</blockquote>
<p><em>IPoIB=</em>, <em>IPVLAN=</em>, <em>IPVTAP=</em>,
<em>MACsec=</em>, <em>MACVLAN=</em>, <em>MACVTAP=</em>,
<em>Tunnel=</em>, <em>VLAN=</em>, <em>VXLAN=</em>, <em>Xfrm=</em></p>
<blockquote>
<p>The name of an IPoIB, IPVLAN, IPVTAP, MACsec, MACVLAN, MACVTAP,
tunnel, VLAN, VXLAN, or Xfrm to be created on the link. See
<strong>systemd.netdev</strong>(5). This option may be specified more
than once.</p>
</blockquote>
<p><em>ActiveSlave=</em></p>
<blockquote>
<p>Takes a boolean. Specifies the new active slave. The "ActiveSlave="
option is only valid for following modes: "active-backup",
"balance-alb", and "balance-tlb". Defaults to false.</p>
</blockquote>
<p><em>PrimarySlave=</em></p>
<blockquote>
<p>Takes a boolean. Specifies which slave is the primary device. The
specified device will always be the active slave while it is available.
Only when the primary is off-line will alternate devices be used. This
is useful when one slave is preferred over another, e.g. when one slave
has higher throughput than another. The "PrimarySlave=" option is only
valid for following modes: "active-backup", "balance-alb", and
"balance-tlb". Defaults to false.</p>
</blockquote>
<p><em>ConfigureWithoutCarrier=</em></p>
<blockquote>
<p>Takes a boolean. Allows networkd to configure a specific link even if
it has no carrier. Defaults to false. If enabled, and the
<em>IgnoreCarrierLoss=</em> setting is not explicitly set, then it is
enabled as well.</p>
</blockquote>
<p><em>IgnoreCarrierLoss=</em></p>
<blockquote>
<p>Takes a boolean or a timespan. When true,
<strong>systemd-networkd</strong> retains both the static and dynamic
configuration of the interface even if its carrier is lost. When false,
<strong>systemd-networkd</strong> drops both the static and dynamic
configuration of the interface. When a timespan is specified,
<strong>systemd-networkd</strong> waits for the specified timespan, and
ignores the carrier loss if the link regain its carrier within the
timespan. Setting 0 seconds is equivalent to "no", and "infinite" is
equivalent to "yes".</p>
<p>Setting a finite timespan may be useful when e.g. in the following
cases:</p>
<blockquote>
<p>·</p>
<p>A wireless interface connecting to a network which has multiple
access points with the same SSID.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>Enslaving a wireless interface to a bond interface, which may
disconnect from the connected access point and causes its carrier to be
lost.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>The driver of the interface resets when the MTU is changed.</p>
</blockquote>
<p>When <em>Bond=</em> is specified to a wireless interface, defaults to
3 seconds. When the DHCPv4 client is enabled and <em>UseMTU=</em> in the
[DHCPv4] section enabled, defaults to 5 seconds. Otherwise, defaults to
the value specified with <em>ConfigureWithoutCarrier=</em>. When
<em>ActivationPolicy=</em> is set to "always-up", this is forced to
"yes", and ignored any user specified values.</p>
</blockquote>
<p><em>KeepConfiguration=</em></p>
<blockquote>
<p>Takes a boolean or one of "static", "dhcp-on-stop", "dhcp". When
"static", <strong>systemd-networkd</strong> will not drop static
addresses and routes on starting up process. When set to "dhcp-on-stop",
<strong>systemd-networkd</strong> will not drop addresses and routes on
stopping the daemon. When "dhcp", the addresses and routes provided by a
DHCP server will never be dropped even if the DHCP lease expires. This
is contrary to the DHCP specification, but may be the best choice if,
e.g., the root filesystem relies on this connection. The setting "dhcp"
implies "dhcp-on-stop", and "yes" implies "dhcp" and "static". Defaults
to "dhcp-on-stop" when <strong>systemd-networkd</strong> is running in
initrd, "yes" when the root filesystem is a network filesystem, and "no"
otherwise.</p>
</blockquote>
<h1>[ADDRESS] SECTION OPTIONS</h1>
<p>An [Address] section accepts the following keys. Specify several
[Address] sections to configure several addresses.</p>
<p><em>Address=</em></p>
<blockquote>
<p>As in the [Network] section. This setting is mandatory. Each
[Address] section can contain one <em>Address=</em> setting.</p>
</blockquote>
<p><em>Peer=</em></p>
<blockquote>
<p>The peer address in a point-to-point connection. Accepts the same
format as the <em>Address=</em> setting.</p>
</blockquote>
<p><em>Broadcast=</em></p>
<blockquote>
<p>Takes an IPv4 address or boolean value. The address must be in the
format described in <strong>inet_pton</strong>(3). If set to true, then
the IPv4 broadcast address will be derived from the <em>Address=</em>
setting. If set to false, then the broadcast address will not be set.
Defaults to true, except for wireguard interfaces, where it default to
false.</p>
</blockquote>
<p><em>Label=</em></p>
<blockquote>
<p>Specifies the label for the IPv4 address. The label must be a 7-bit
ASCII string with a length of 1...15 characters. Defaults to unset.</p>
</blockquote>
<p><em>PreferredLifetime=</em></p>
<blockquote>
<p>Allows the default "preferred lifetime" of the address to be
overridden. Only three settings are accepted: "forever", "infinity",
which is the default and means that the address never expires, and "0",
which means that the address is considered immediately "expired" and
will not be used, unless explicitly requested. A setting of
<strong>PreferredLifetime=0</strong> is useful for addresses which are
added to be used only by a specific application, which is then
configured to use them explicitly.</p>
</blockquote>
<p><em>Scope=</em></p>
<blockquote>
<p>The scope of the address, which can be "global" (valid everywhere on
the network, even through a gateway), "link" (only valid on this device,
will not traverse a gateway) or "host" (only valid within the device
itself, e.g. 127.0.0.1) or an integer in the range 0...255. Defaults to
"global".</p>
</blockquote>
<p><em>RouteMetric=</em></p>
<blockquote>
<p>The metric of the prefix route, which is pointing to the subnet of
the configured IP address, taking the configured prefix length into
account. Takes an unsigned integer in the range 0...4294967295. When
unset or set to 0, the kernels default value is used. This setting will
be ignored when <em>AddPrefixRoute=</em> is false.</p>
</blockquote>
<p><em>HomeAddress=</em></p>
<blockquote>
<p>Takes a boolean. Designates this address the "home address" as
defined in <strong>RFC 6275</strong>[10]. Supported only on IPv6.
Defaults to false.</p>
</blockquote>
<p><em>DuplicateAddressDetection=</em></p>
<blockquote>
<p>Takes one of "ipv4", "ipv6", "both", or "none". When "ipv4", performs
IPv4 Address Conflict Detection. See <strong>RFC 5227</strong>[11]. When
"ipv6", performs IPv6 Duplicate Address Detection. See <strong>RFC
4862</strong>[12]. Defaults to "ipv4" for IPv4 link-local addresses,
"ipv6" for IPv6 addresses, and "none" otherwise.</p>
</blockquote>
<p><em>ManageTemporaryAddress=</em></p>
<blockquote>
<p>Takes a boolean. If true the kernel manage temporary addresses
created from this one as template on behalf of Privacy Extensions
<strong>RFC 3041</strong>[13]. For this to become active, the
use_tempaddr sysctl setting has to be set to a value greater than zero.
The given address needs to have a prefix length of 64. This flag allows
using privacy extensions in a manually configured network, just like if
stateless auto-configuration was active. Defaults to false.</p>
</blockquote>
<p><em>AddPrefixRoute=</em></p>
<blockquote>
<p>Takes a boolean. When true, the prefix route for the address is
automatically added. Defaults to true.</p>
</blockquote>
<p><em>AutoJoin=</em></p>
<blockquote>
<p>Takes a boolean. Joining multicast group on ethernet level via
<strong>ip maddr</strong> command would not work if we have an Ethernet
switch that does IGMP snooping since the switch would not replicate
multicast packets on ports that did not have IGMP reports for the
multicast addresses. Linux vxlan interfaces created via <strong>ip link
add vxlan</strong> or networkds netdev kind vxlan have the group option
that enables them to do the required join. By extending <strong>ip
address</strong> command with option "autojoin" we can get similar
functionality for openvswitch (OVS) vxlan interfaces as well as other
tunneling mechanisms that need to receive multicast traffic. Defaults to
"no".</p>
</blockquote>
<p><em>NetLabel=label</em></p>
<blockquote>
<p>This setting provides a method for integrating static and dynamic
network configuration into Linux <strong>NetLabel</strong>[14] subsystem
rules, used by <strong>Linux Security Modules (LSMs)</strong>[15] for
network access control. The label, with suitable LSM rules, can be used
to control connectivity of (for example) a service with peers in the
local network. At least with SELinux, only the ingress can be controlled
but not egress. The benefit of using this setting is that it may be
possible to apply interface independent part of NetLabel configuration
at very early stage of system boot sequence, at the time when the
network interfaces are not available yet, with
<strong>netlabelctl</strong>(8), and the per-interface configuration
with <strong>systemd-networkd</strong> once the interfaces appear later.
Currently this feature is only implemented for SELinux.</p>
<p>The option expects a single NetLabel label. The label must conform to
lexical restrictions of LSM labels. When an interface is configured with
IP addresses, the addresses and subnetwork masks will be appended to the
<strong>NetLabel Fallback Peer Labeling</strong>[16] rules. They will be
removed when the interface is deconfigured. Failures to manage the
labels will be ignored.</p>
<p>Warning: Once labeling is enabled for network traffic, a lot of LSM
access control points in Linux networking stack go from dormant to
active. Care should be taken to avoid getting into a situation where for
example remote connectivity is broken, when the security policy hasnt
been updated to consider LSM per-packet access controls and no rules
would allow any network traffic. Also note that additional configuration
with <strong>netlabelctl</strong>(8) is needed.</p>
<p>Example:</p>
<blockquote>
<pre><code>[Address]
NetLabel=system_u:object_r:localnet_peer_t:s0</code></pre>
</blockquote>
<p>With the example rules applying for interface "eth0", when the
interface is configured with an IPv4 address of 10.0.0.123/8,
<strong>systemd-networkd</strong> performs the equivalent of
<strong>netlabelctl</strong> operation</p>
<blockquote>
<pre><code>netlabelctl unlbl add interface eth0 address:10.0.0.0/8 label:system_u:object_r:localnet_peer_t:s0</code></pre>
</blockquote>
<p>and the reverse operation when the IPv4 address is deconfigured. The
configuration can be used with LSM rules; in case of SELinux to allow a
SELinux domain to receive data from objects of SELinux "peer" class. For
example:</p>
<blockquote>
<pre><code>type localnet_peer_t;
allow my_server_t localnet_peer_t:peer recv;</code></pre>
</blockquote>
<p>The effect of the above configuration and rules (in absence of other
rules as may be the case) is to only allow "my_server_t" (and nothing
else) to receive data from local subnet 10.0.0.0/8 of interface
"eth0".</p>
</blockquote>
<h1>[NEIGHBOR] SECTION OPTIONS</h1>
<p>A [Neighbor] section accepts the following keys. The neighbor section
adds a permanent, static entry to the neighbor table (IPv6) or ARP table
(IPv4) for the given hardware address on the links matched for the
network. Specify several [Neighbor] sections to configure several static
neighbors.</p>
<p><em>Address=</em></p>
<blockquote>
<p>The IP address of the neighbor.</p>
</blockquote>
<p><em>LinkLayerAddress=</em></p>
<blockquote>
<p>The link layer address (MAC address or IP address) of the
neighbor.</p>
</blockquote>
<h1>[IPV6ADDRESSLABEL] SECTION OPTIONS</h1>
<p>An [IPv6AddressLabel] section accepts the following keys. Specify
several [IPv6AddressLabel] sections to configure several address labels.
IPv6 address labels are used for address selection. See <strong>RFC
3484</strong>[17]. Precedence is managed by userspace, and only the
label itself is stored in the kernel.</p>
<p><em>Label=</em></p>
<blockquote>
<p>The label for the prefix, an unsigned integer in the range
0...4294967294. 0xffffffff is reserved. This setting is mandatory.</p>
</blockquote>
<p><em>Prefix=</em></p>
<blockquote>
<p>IPv6 prefix is an address with a prefix length, separated by a slash
"/" character. This setting is mandatory.</p>
</blockquote>
<h1>[ROUTINGPOLICYRULE] SECTION OPTIONS</h1>
<p>An [RoutingPolicyRule] section accepts the following settings.
Specify several [RoutingPolicyRule] sections to configure several
rules.</p>
<p><em>TypeOfService=</em></p>
<blockquote>
<p>Takes a number between 0 and 255 that specifies the type of service
to match.</p>
</blockquote>
<p><em>From=</em></p>
<blockquote>
<p>Specifies the source address prefix to match. Possibly followed by a
slash and the prefix length.</p>
</blockquote>
<p><em>To=</em></p>
<blockquote>
<p>Specifies the destination address prefix to match. Possibly followed
by a slash and the prefix length.</p>
</blockquote>
<p><em>FirewallMark=</em></p>
<blockquote>
<p>Specifies the iptables firewall mark value to match (a number in the
range 1...4294967295). Optionally, the firewall mask (also a number
between 1...4294967295) can be suffixed with a slash ("/"), e.g.,
"7/255".</p>
</blockquote>
<p><em>Table=</em></p>
<blockquote>
<p>Specifies the routing table identifier to lookup if the rule selector
matches. Takes one of predefined names "default", "main", and "local",
and names defined in <em>RouteTable=</em> in
<strong>networkd.conf</strong>(5), or a number between 1 and 4294967295.
Defaults to "main".</p>
</blockquote>
<p><em>Priority=</em></p>
<blockquote>
<p>Specifies the priority of this rule. <em>Priority=</em> is an integer
in the range 0...4294967295. Higher number means lower priority, and
rules get processed in order of increasing number. Defaults to unset,
and the kernel will pick a value dynamically.</p>
</blockquote>
<p><em>IncomingInterface=</em></p>
<blockquote>
<p>Specifies incoming device to match. If the interface is loopback, the
rule only matches packets originating from this host.</p>
</blockquote>
<p><em>OutgoingInterface=</em></p>
<blockquote>
<p>Specifies the outgoing device to match. The outgoing interface is
only available for packets originating from local sockets that are bound
to a device.</p>
</blockquote>
<p><em>SourcePort=</em></p>
<blockquote>
<p>Specifies the source IP port or IP port range match in forwarding
information base (FIB) rules. A port range is specified by the lower and
upper port separated by a dash. Defaults to unset.</p>
</blockquote>
<p><em>DestinationPort=</em></p>
<blockquote>
<p>Specifies the destination IP port or IP port range match in
forwarding information base (FIB) rules. A port range is specified by
the lower and upper port separated by a dash. Defaults to unset.</p>
</blockquote>
<p><em>IPProtocol=</em></p>
<blockquote>
<p>Specifies the IP protocol to match in forwarding information base
(FIB) rules. Takes IP protocol name such as "tcp", "udp" or "sctp", or
IP protocol number such as "6" for "tcp" or "17" for "udp". Defaults to
unset.</p>
</blockquote>
<p><em>InvertRule=</em></p>
<blockquote>
<p>A boolean. Specifies whether the rule is to be inverted. Defaults to
false.</p>
</blockquote>
<p><em>Family=</em></p>
<blockquote>
<p>Takes a special value "ipv4", "ipv6", or "both". By default, the
address family is determined by the address specified in <em>To=</em> or
<em>From=</em>. If neither <em>To=</em> nor <em>From=</em> are
specified, then defaults to "ipv4".</p>
</blockquote>
<p><em>User=</em></p>
<blockquote>
<p>Takes a username, a user ID, or a range of user IDs separated by a
dash. Defaults to unset.</p>
</blockquote>
<p><em>SuppressPrefixLength=</em></p>
<blockquote>
<p>Takes a number <em>N</em> in the range 0...128 and rejects routing
decisions that have a prefix length of <em>N</em> or less. Defaults to
unset.</p>
</blockquote>
<p><em>SuppressInterfaceGroup=</em></p>
<blockquote>
<p>Takes an integer in the range 0...2147483647 and rejects routing
decisions that have an interface with the same group id. It has the same
meaning as <strong>suppress_ifgroup</strong> in <strong>ip
rule</strong>. Defaults to unset.</p>
</blockquote>
<p><em>Type=</em></p>
<blockquote>
<p>Specifies Routing Policy Database (RPDB) rule type. Takes one of
"blackhole", "unreachable" or "prohibit".</p>
</blockquote>
<h1>[NEXTHOP] SECTION OPTIONS</h1>
<p>The [NextHop] section is used to manipulate entries in the kernels
"nexthop" tables. The [NextHop] section accepts the following settings.
Specify several [NextHop] sections to configure several hops.</p>
<p><em>Id=</em></p>
<blockquote>
<p>The id of the next hop. Takes an integer in the range 1...4294967295.
If unspecified, then automatically chosen by kernel.</p>
</blockquote>
<p><em>Gateway=</em></p>
<blockquote>
<p>As in the [Network] section.</p>
</blockquote>
<p><em>Family=</em></p>
<blockquote>
<p>Takes one of the special values "ipv4" or "ipv6". By default, the
family is determined by the address specified in <em>Gateway=</em>. If
<em>Gateway=</em> is not specified, then defaults to "ipv4".</p>
</blockquote>
<p><em>OnLink=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, the kernel does not have to check if
the gateway is reachable directly by the current machine (i.e., attached
to the local network), so that we can insert the nexthop in the kernel
table without it being complained about. Defaults to "no".</p>
</blockquote>
<p><em>Blackhole=</em></p>
<blockquote>
<p>Takes a boolean. If enabled, packets to the corresponding routes are
discarded silently, and <em>Gateway=</em> cannot be specified. Defaults
to "no".</p>
</blockquote>
<p><em>Group=</em></p>
<blockquote>
<p>Takes a whitespace separated list of nexthop IDs. Each ID must be in
the range 1...4294967295. Optionally, each nexthop ID can take a weight
after a colon ("<em>id</em>[:<em>weight</em>]"). The weight must be in
the range 1...255. If the weight is not specified, then it is assumed
that the weight is 1. This setting cannot be specified with
<em>Gateway=</em>, <em>Family=</em>, <em>Blackhole=</em>. This setting
can be specified multiple times. If an empty string is assigned, then
the all previous assignments are cleared. Defaults to unset.</p>
</blockquote>
<h1>[ROUTE] SECTION OPTIONS</h1>
<p>The [Route] section accepts the following settings. Specify several
[Route] sections to configure several routes.</p>
<p><em>Gateway=</em></p>
<blockquote>
<p>Takes the gateway address or the special values "_dhcp4" and
"_ipv6ra". If "_dhcp4" or "_ipv6ra" is set, then the gateway address
provided by DHCPv4 or IPv6 RA is used.</p>
</blockquote>
<p><em>GatewayOnLink=</em></p>
<blockquote>
<p>Takes a boolean. If set to true, the kernel does not have to check if
the gateway is reachable directly by the current machine (i.e., attached
to the local network), so that we can insert the route in the kernel
table without it being complained about. Defaults to "no".</p>
</blockquote>
<p><em>Destination=</em></p>
<blockquote>
<p>The destination prefix of the route. Possibly followed by a slash and
the prefix length. If omitted, a full-length host route is assumed.</p>
</blockquote>
<p><em>Source=</em></p>
<blockquote>
<p>The source prefix of the route. Possibly followed by a slash and the
prefix length. If omitted, a full-length host route is assumed.</p>
</blockquote>
<p><em>Metric=</em></p>
<blockquote>
<p>The metric of the route. Takes an unsigned integer in the range
0...4294967295. Defaults to unset, and the kernels default will be
used.</p>
</blockquote>
<p><em>IPv6Preference=</em></p>
<blockquote>
<p>Specifies the route preference as defined in <strong>RFC
4191</strong>[18] for Router Discovery messages. Which can be one of
"low" the route has a lowest priority, "medium" the route has a default
priority or "high" the route has a highest priority.</p>
</blockquote>
<p><em>Scope=</em></p>
<blockquote>
<p>The scope of the IPv4 route, which can be "global", "site", "link",
"host", or "nowhere":</p>
<blockquote>
<p>·</p>
<p>"global" means the route can reach hosts more than one hop away.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>"site" means an interior route in the local autonomous system.</p>
</blockquote>
<blockquote>
<p>·</p>
<p>"link" means the route can only reach hosts on the local network (one
hop away).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>"host" means the route will not leave the local machine (used for
internal addresses like 127.0.0.1).</p>
</blockquote>
<blockquote>
<p>·</p>
<p>"nowhere" means the destination doesnt exist.</p>
</blockquote>
<p>For IPv4 route, defaults to "host" if <em>Type=</em> is "local" or
"nat", and "link" if <em>Type=</em> is "broadcast", "multicast",
"anycast", or "unicast". In other cases, defaults to "global". The value
is not used for IPv6.</p>
</blockquote>
<p><em>PreferredSource=</em></p>
<blockquote>
<p>The preferred source address of the route. The address must be in the
format described in <strong>inet_pton</strong>(3).</p>
</blockquote>
<p><em>Table=</em></p>
<blockquote>
<p>The table identifier for the route. Takes one of predefined names
"default", "main", and "local", and names defined in
<em>RouteTable=</em> in <strong>networkd.conf</strong>(5), or a number
between 1 and 4294967295. The table can be retrieved using <strong>ip
route show table</strong> <em>num</em>. If unset and <em>Type=</em> is
"local", "broadcast", "anycast", or "nat", then "local" is used. In
other cases, defaults to "main".</p>
</blockquote>
<p><em>Protocol=</em></p>
<blockquote>
<p>The protocol identifier for the route. Takes a number between 0 and
255 or the special values "kernel", "boot", "static", "ra" and "dhcp".
Defaults to "static".</p>
</blockquote>
<p><em>Type=</em></p>
<blockquote>
<p>Specifies the type for the route. Takes one of "unicast", "local",
"broadcast", "anycast", "multicast", "blackhole", "unreachable",
"prohibit", "throw", "nat", and "xresolve". If "unicast", a regular
route is defined, i.e. a route indicating the path to take to a
destination network address. If "blackhole", packets to the defined
route are discarded silently. If "unreachable", packets to the defined
route are discarded and the ICMP message "Host Unreachable" is
generated. If "prohibit", packets to the defined route are discarded and
the ICMP message "Communication Administratively Prohibited" is
generated. If "throw", route lookup in the current routing table will
fail and the route selection process will return to Routing Policy
Database (RPDB). Defaults to "unicast".</p>
</blockquote>
<p><em>InitialCongestionWindow=</em></p>
<blockquote>
<p>The TCP initial congestion window is used during the start of a TCP
connection. During the start of a TCP session, when a client requests a
resource, the servers initial congestion window determines how many
packets will be sent during the initial burst of data without waiting
for acknowledgement. Takes a number between 1 and 1023. Note that 100 is
considered an extremely large value for this option. When unset, the
kernels default (typically 10) will be used.</p>
</blockquote>
<p><em>InitialAdvertisedReceiveWindow=</em></p>
<blockquote>
<p>The TCP initial advertised receive window is the amount of receive
data (in bytes) that can initially be buffered at one time on a
connection. The sending host can send only that amount of data before
waiting for an acknowledgment and window update from the receiving host.
Takes a number between 1 and 1023. Note that 100 is considered an
extremely large value for this option. When unset, the kernels default
will be used.</p>
</blockquote>
<p><em>QuickAck=</em></p>
<blockquote>
<p>Takes a boolean. When true enables TCP quick ack mode for the route.
When unset, the kernels default will be used.</p>
</blockquote>
<p><em>FastOpenNoCookie=</em></p>
<blockquote>
<p>Takes a boolean. When true enables TCP fastopen without a cookie on a
per-route basis. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>TTLPropagate=</em></p>
<blockquote>
<p>Takes a boolean. When true enables TTL propagation at Label Switched
Path (LSP) egress. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>MTUBytes=</em></p>
<blockquote>
<p>The maximum transmission unit in bytes to set for the route. The
usual suffixes K, M, G, are supported and are understood to the base of
1024.</p>
</blockquote>
<p><em>TCPAdvertisedMaximumSegmentSize=</em></p>
<blockquote>
<p>Specifies the Path MSS (in bytes) hints given on TCP layer. The usual
suffixes K, M, G, are supported and are understood to the base of 1024.
An unsigned integer in the range 1...4294967294. When unset, the kernels
default will be used.</p>
</blockquote>
<p><em>TCPCongestionControlAlgorithm=</em></p>
<blockquote>
<p>Specifies the TCP congestion control algorithm for the route. Takes a
name of the algorithm, e.g. "bbr", "dctcp", or "vegas". When unset, the
kernels default will be used.</p>
</blockquote>
<p><em>MultiPathRoute=address[@name] [weight]</em></p>
<blockquote>
<p>Configures multipath route. Multipath routing is the technique of
using multiple alternative paths through a network. Takes gateway
address. Optionally, takes a network interface name or index separated
with "@", and a weight in 1..256 for this multipath route separated with
whitespace. This setting can be specified multiple times. If an empty
string is assigned, then the all previous assignments are cleared.</p>
</blockquote>
<p><em>NextHop=</em></p>
<blockquote>
<p>Specifies the nexthop id. Takes an unsigned integer in the range
1...4294967295. If set, the corresponding [NextHop] section must be
configured. Defaults to unset.</p>
</blockquote>
<h1>[DHCPV4] SECTION OPTIONS</h1>
<p>The [DHCPv4] section configures the DHCPv4 client, if it is enabled
with the <em>DHCP=</em> setting described above:</p>
<p><em>SendHostname=</em></p>
<blockquote>
<p>When true (the default), the machines hostname (or the value
specified with <em>Hostname=</em>, described below) will be sent to the
DHCP server. Note that the hostname must consist only of 7-bit ASCII
lower-case characters and no spaces or dots, and be formatted as a valid
DNS domain name. Otherwise, the hostname is not sent even if this option
is true.</p>
</blockquote>
<p><em>Hostname=</em></p>
<blockquote>
<p>Use this value for the hostname which is sent to the DHCP server,
instead of machines hostname. Note that the specified hostname must
consist only of 7-bit ASCII lower-case characters and no spaces or dots,
and be formatted as a valid DNS domain name.</p>
</blockquote>
<p><em>MUDURL=</em></p>
<blockquote>
<p>When configured, the specified Manufacturer Usage Description (MUD)
URL will be sent to the DHCPv4 server. Takes a URL of length up to 255
characters. A superficial verification that the string is a valid URL
will be performed. DHCPv4 clients are intended to have at most one MUD
URL associated with them. See <strong>RFC 8520</strong>[19].</p>
<p>MUD is an embedded software standard defined by the IETF that allows
IoT device makers to advertise device specifications, including the
intended communication patterns for their device when it connects to the
network. The network can then use this to author a context-specific
access policy, so the device functions only within those parameters.</p>
</blockquote>
<p><em>ClientIdentifier=</em></p>
<blockquote>
<p>The DHCPv4 client identifier to use. Takes one of
<strong>mac</strong>, <strong>duid</strong> or
<strong>duid-only</strong>. If set to <strong>mac</strong>, the MAC
address of the link is used. If set to <strong>duid</strong>, an
RFC4361-compliant Client ID, which is the combination of IAID and DUID
(see below), is used. If set to <strong>duid-only</strong>, only DUID is
used, this may not be RFC compliant, but some setups may require to use
this. Defaults to <strong>duid</strong>.</p>
</blockquote>
<p><em>VendorClassIdentifier=</em></p>
<blockquote>
<p>The vendor class identifier used to identify vendor type and
configuration.</p>
</blockquote>
<p><em>UserClass=</em></p>
<blockquote>
<p>A DHCPv4 client can use UserClass option to identify the type or
category of user or applications it represents. The information
contained in this option is a string that represents the user class of
which the client is a member. Each class sets an identifying string of
information to be used by the DHCP service to classify clients. Takes a
whitespace-separated list of strings.</p>
</blockquote>
<p><em>DUIDType=</em></p>
<blockquote>
<p>Override the global <em>DUIDType=</em> setting for this network. See
<strong>networkd.conf</strong>(5) for a description of possible
values.</p>
</blockquote>
<p><em>DUIDRawData=</em></p>
<blockquote>
<p>Override the global <em>DUIDRawData=</em> setting for this network.
See <strong>networkd.conf</strong>(5) for a description of possible
values.</p>
</blockquote>
<p><em>IAID=</em></p>
<blockquote>
<p>The DHCP Identity Association Identifier (IAID) for the interface, a
32-bit unsigned integer.</p>
</blockquote>
<p><em>Anonymize=</em></p>
<blockquote>
<p>Takes a boolean. When true, the options sent to the DHCP server will
follow the <strong>RFC 7844</strong>[20] (Anonymity Profiles for DHCP
Clients) to minimize disclosure of identifying information. Defaults to
false.</p>
<p>This option should only be set to true when
<em>MACAddressPolicy=</em> is set to <strong>random</strong> (see
<strong>systemd.link</strong>(5)).</p>
<p>When true, <em>ClientIdentifier=mac</em>, <em>SendHostname=no</em>,
<em>Use6RD=no</em>, <em>UseCaptivePortal=no</em>, <em>UseMTU=no</em>,
<em>UseNTP=no</em>, <em>UseSIP=no</em>, and <em>UseTimezone=no</em> are
implied and these settings in the .network file are silently ignored.
Also, <em>Hostname=</em>, <em>MUDURL=</em>, <em>RequestOptions=</em>,
<em>SendOption=</em>, <em>SendVendorOption=</em>, <em>UserClass=</em>,
and <em>VendorClassIdentifier=</em> are silently ignored.</p>
<p>With this option enabled DHCP requests will mimic those generated by
Microsoft Windows, in order to reduce the ability to fingerprint and
recognize installations. This means DHCP request sizes will grow and
lease data will be more comprehensive than normally, though most of the
requested data is not actually used.</p>
</blockquote>
<p><em>RequestOptions=</em></p>
<blockquote>
<p>Sets request options to be sent to the server in the DHCPv4 request
options list. A whitespace-separated list of integers in the range
1...254. Defaults to unset.</p>
</blockquote>
<p><em>SendOption=</em></p>
<blockquote>
<p>Send an arbitrary raw option in the DHCPv4 request. Takes a DHCP
option number, data type and data separated with a colon
("<em>option</em>:<em>type</em>:<em>value</em>"). The option number must
be an integer in the range 1...254. The type takes one of "uint8",
"uint16", "uint32", "ipv4address", or "string". Special characters in
the data string may be escaped using <strong>C-style
escapes</strong>[21]. This setting can be specified multiple times. If
an empty string is specified, then all options specified earlier are
cleared. Defaults to unset.</p>
</blockquote>
<p><em>SendVendorOption=</em></p>
<blockquote>
<p>Send an arbitrary vendor option in the DHCPv4 request. Takes a DHCP
option number, data type and data separated with a colon
("<em>option</em>:<em>type</em>:<em>value</em>"). The option number must
be an integer in the range 1...254. The type takes one of "uint8",
"uint16", "uint32", "ipv4address", or "string". Special characters in
the data string may be escaped using <strong>C-style
escapes</strong>[21]. This setting can be specified multiple times. If
an empty string is specified, then all options specified earlier are
cleared. Defaults to unset.</p>
</blockquote>
<p><em>IPServiceType=</em></p>
<blockquote>
<p>Takes one of the special values "none", "CS6", or "CS4". When "none"
no IP service type is set to the packet sent from the DHCPv4 client.
When "CS6" (network control) or "CS4" (realtime), the corresponding
service type will be set. Defaults to "CS6".</p>
</blockquote>
<p><em>Label=</em></p>
<blockquote>
<p>Specifies the label for the IPv4 address received from the DHCP
server. The label must be a 7-bit ASCII string with a length of 1...15
characters. Defaults to unset.</p>
</blockquote>
<p><em>UseDNS=</em></p>
<blockquote>
<p>When true (the default), the DNS servers received from the DHCP
server will be used.</p>
<p>This corresponds to the <strong>nameserver</strong> option in
<strong>resolv.conf</strong>(5).</p>
</blockquote>
<p><em>RoutesToDNS=</em></p>
<blockquote>
<p>When true, the routes to the DNS servers received from the DHCP
server will be configured. When <em>UseDNS=</em> is disabled, this
setting is ignored. Defaults to true.</p>
</blockquote>
<p><em>UseNTP=</em></p>
<blockquote>
<p>When true (the default), the NTP servers received from the DHCP
server will be used by systemd-timesyncd.service.</p>
</blockquote>
<p><em>RoutesToNTP=</em></p>
<blockquote>
<p>When true, the routes to the NTP servers received from the DHCP
server will be configured. When <em>UseNTP=</em> is disabled, this
setting is ignored. Defaults to true.</p>
</blockquote>
<p><em>UseSIP=</em></p>
<blockquote>
<p>When true (the default), the SIP servers received from the DHCP
server will be collected and made available to client programs.</p>
</blockquote>
<p><em>UseMTU=</em></p>
<blockquote>
<p>When true, the interface maximum transmission unit from the DHCP
server will be used on the current link. If <em>MTUBytes=</em> is set,
then this setting is ignored. Defaults to false.</p>
<p>Note, some drivers will reset the interfaces if the MTU is changed.
For such interfaces, please try to use <em>IgnoreCarrierLoss=</em> with
a short timespan, e.g. "3 seconds".</p>
</blockquote>
<p><em>UseHostname=</em></p>
<blockquote>
<p>When true (the default), the hostname received from the DHCP server
will be set as the transient hostname of the system.</p>
</blockquote>
<p><em>UseDomains=</em></p>
<blockquote>
<p>Takes a boolean, or the special value <strong>route</strong>. When
true, the domain name received from the DHCP server will be used as DNS
search domain over this link, similarly to the effect of the
<strong>Domains=</strong> setting. If set to <strong>route</strong>, the
domain name received from the DHCP server will be used for routing DNS
queries only, but not for searching, similarly to the effect of the
<strong>Domains=</strong> setting when the argument is prefixed with
"~". Defaults to false.</p>
<p>It is recommended to enable this option only on trusted networks, as
setting this affects resolution of all hostnames, in particular of
single-label names. It is generally safer to use the supplied domain
only as routing domain, rather than as search domain, in order to not
have it affect local resolution of single-label names.</p>
<p>When set to true, this setting corresponds to the
<strong>domain</strong> option in <strong>resolv.conf</strong>(5).</p>
</blockquote>
<p><em>UseRoutes=</em></p>
<blockquote>
<p>When true (the default), the static routes will be requested from the
DHCP server and added to the routing table with a metric of 1024, and a
scope of <strong>global</strong>, <strong>link</strong> or
<strong>host</strong>, depending on the routes destination and gateway.
If the destination is on the local host, e.g., 127.x.x.x, or the same as
the links own address, the scope will be set to <strong>host</strong>.
Otherwise if the gateway is null (a direct route), a
<strong>link</strong> scope will be used. For anything else, scope
defaults to <strong>global</strong>.</p>
</blockquote>
<p><em>RouteMetric=</em></p>
<blockquote>
<p>Set the routing metric for routes specified by the DHCP server
(including the prefix route added for the specified prefix). Takes an
unsigned integer in the range 0...4294967295. Defaults to 1024.</p>
</blockquote>
<p><em>RouteTable=num</em></p>
<blockquote>
<p>The table identifier for DHCP routes. Takes one of predefined names
"default", "main", and "local", and names defined in
<em>RouteTable=</em> in <strong>networkd.conf</strong>(5), or a number
between 1...4294967295.</p>
<p>When used in combination with <em>VRF=</em>, the VRFs routing table
is used when this parameter is not specified.</p>
</blockquote>
<p><em>RouteMTUBytes=</em></p>
<blockquote>
<p>Specifies the MTU for the DHCP routes. Please see the [Route] section
for further details.</p>
</blockquote>
<p><em>UseGateway=</em></p>
<blockquote>
<p>When true, the gateway will be requested from the DHCP server and
added to the routing table with a metric of 1024, and a scope of
<strong>link</strong>. When unset, the value specified with
<em>UseRoutes=</em> is used.</p>
</blockquote>
<p><em>UseTimezone=</em></p>
<blockquote>
<p>When true, the timezone received from the DHCP server will be set as
timezone of the local system. Defaults to false.</p>
</blockquote>
<p><em>Use6RD=</em></p>
<blockquote>
<p>When true, subnets of the received IPv6 prefix are assigned to
downstream interfaces which enables <em>DHCPPrefixDelegation=</em>. See
also <em>DHCPPrefixDelegation=</em> in the [Network] section, the
[DHCPPrefixDelegation] section, and <strong>RFC 5969</strong>[22].
Defaults to false.</p>
</blockquote>
<p><em>FallbackLeaseLifetimeSec=</em></p>
<blockquote>
<p>Allows one to set DHCPv4 lease lifetime when DHCPv4 server does not
send the lease lifetime. Takes one of "forever" or "infinity". If
specified, the acquired address never expires. Defaults to unset.</p>
</blockquote>
<p><em>RequestBroadcast=</em></p>
<blockquote>
<p>Request the server to use broadcast messages before the IP address
has been configured. This is necessary for devices that cannot receive
RAW packets, or that cannot receive packets at all before an IP address
has been configured. On the other hand, this must not be enabled on
networks where broadcasts are filtered out.</p>
</blockquote>
<p><em>MaxAttempts=</em></p>
<blockquote>
<p>Specifies how many times the DHCPv4 client configuration should be
attempted. Takes a number or "infinity". Defaults to "infinity". Note
that the time between retries is increased exponentially, up to
approximately one per minute, so the network will not be overloaded even
if this number is high. The default is suitable in most
circumstances.</p>
</blockquote>
<p><em>ListenPort=</em></p>
<blockquote>
<p>Set the port from which the DHCP client packets originate.</p>
</blockquote>
<p><em>DenyList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv4 addresses. Each address can
optionally take a prefix length after "/". DHCP offers from servers in
the list are rejected. Note that if <em>AllowList=</em> is configured
then <em>DenyList=</em> is ignored.</p>
</blockquote>
<p><em>AllowList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv4 addresses. Each address can
optionally take a prefix length after "/". DHCP offers from servers in
the list are accepted.</p>
</blockquote>
<p><em>SendRelease=</em></p>
<blockquote>
<p>When true, the DHCPv4 client sends a DHCP release packet when it
stops. Defaults to true.</p>
</blockquote>
<p><em>SendDecline=</em></p>
<blockquote>
<p>A boolean. When true, <strong>systemd-networkd</strong> performs IPv4
Duplicate Address Detection to the acquired address by the DHCPv4
client. If duplicate is detected, the DHCPv4 client rejects the address
by sending a <strong>DHCPDECLINE</strong> packet to the DHCP server, and
tries to obtain an IP address again. See <strong>RFC 5227</strong>[11].
Defaults to false.</p>
</blockquote>
<p><em>NetLabel=</em></p>
<blockquote>
<p>This applies the NetLabel for the addresses received with DHCP, like
<em>NetLabel=</em> in [Address] section applies it to statically
configured addresses. See <em>NetLabel=</em> in [Address] section for
more details.</p>
</blockquote>
<h1>[DHCPV6] SECTION OPTIONS</h1>
<p>The [DHCPv6] section configures the DHCPv6 client, if it is enabled
with the <em>DHCP=</em> setting described above, or invoked by the IPv6
Router Advertisement:</p>
<p><em>MUDURL=</em>, <em>IAID=</em>, <em>DUIDType=</em>,
<em>DUIDRawData=</em>, <em>RequestOptions=</em></p>
<blockquote>
<p>As in the [DHCPv4] section.</p>
</blockquote>
<p><em>SendOption=</em></p>
<blockquote>
<p>As in the [DHCPv4] section, however because DHCPv6 uses 16-bit fields
to store option numbers, the option number is an integer in the range
1...65536.</p>
</blockquote>
<p><em>SendVendorOption=</em></p>
<blockquote>
<p>Send an arbitrary vendor option in the DHCPv6 request. Takes an
enterprise identifier, DHCP option number, data type, and data separated
with a colon ("<em>enterprise
identifier</em>:<em>option</em>:<em>type</em>:<em>value</em>").
Enterprise identifier is an unsigned integer in the range
1...4294967294. The option number must be an integer in the range
1...254. Data type takes one of "uint8", "uint16", "uint32",
"ipv4address", "ipv6address", or "string". Special characters in the
data string may be escaped using <strong>C-style escapes</strong>[21].
This setting can be specified multiple times. If an empty string is
specified, then all options specified earlier are cleared. Defaults to
unset.</p>
</blockquote>
<p><em>UserClass=</em></p>
<blockquote>
<p>A DHCPv6 client can use User Class option to identify the type or
category of user or applications it represents. The information
contained in this option is a string that represents the user class of
which the client is a member. Each class sets an identifying string of
information to be used by the DHCP service to classify clients. Special
characters in the data string may be escaped using <strong>C-style
escapes</strong>[21]. This setting can be specified multiple times. If
an empty string is specified, then all options specified earlier are
cleared. Takes a whitespace-separated list of strings. Note that
currently <strong>NUL</strong> bytes are not allowed.</p>
</blockquote>
<p><em>VendorClass=</em></p>
<blockquote>
<p>A DHCPv6 client can use VendorClass option to identify the vendor
that manufactured the hardware on which the client is running. The
information contained in the data area of this option is contained in
one or more opaque fields that identify details of the hardware
configuration. Takes a whitespace-separated list of strings.</p>
</blockquote>
<p><em>PrefixDelegationHint=</em></p>
<blockquote>
<p>Takes an IPv6 address with prefix length in the same format as the
<em>Address=</em> in the [Network] section. The DHCPv6 client will
include a prefix hint in the DHCPv6 solicitation sent to the server. The
prefix length must be in the range 1...128. Defaults to unset.</p>
</blockquote>
<p><em>RapidCommit=</em></p>
<blockquote>
<p>Takes a boolean. The DHCPv6 client can obtain configuration
parameters from a DHCPv6 server through a rapid two-message exchange
(solicit and reply). When the rapid commit option is set by both the
DHCPv6 client and the DHCPv6 server, the two-message exchange is used.
Otherwise, the four-message exchange (solicit, advertise, request, and
reply) is used. The two-message exchange provides faster client
configuration. See <strong>RFC 3315</strong>[23] for details. Defaults
to true, and the two-message exchange will be used if the server support
it.</p>
</blockquote>
<p><em>UseAddress=</em></p>
<blockquote>
<p>When true (the default), the IP addresses provided by the DHCPv6
server will be assigned.</p>
</blockquote>
<p><em>UseDelegatedPrefix=</em></p>
<blockquote>
<p>When true (the default), the client will request the DHCPv6 server to
delegate prefixes. If the server provides prefixes to be delegated, then
subnets of the prefixes are assigned to the interfaces that have
<em>DHCPPrefixDelegation=yes</em>. See also the
<em>DHCPPrefixDelegation=</em> setting in the [Network] section,
settings in the [DHCPPrefixDelegation] section, and <strong>RFC
8415</strong>[24].</p>
</blockquote>
<p><em>UseDNS=</em>, <em>UseNTP=</em>, <em>UseHostname=</em>,
<em>UseDomains=</em>, <em>NetLabel=</em></p>
<blockquote>
<p>As in the [DHCPv4] section.</p>
</blockquote>
<p><em>WithoutRA=</em></p>
<blockquote>
<p>Allows DHCPv6 client to start without router advertisementss
"managed" or "other configuration" flag. Takes one of "no", "solicit",
or "information-request". If this is not specified, "solicit" is used
when <em>DHCPPrefixDelegation=</em> is enabled and
<em>UplinkInterface=:self</em> is specified in the
[DHCPPrefixDelegation] section. Otherwise, defaults to "no", and the
DHCPv6 client will be started when an RA is received. See also the
<em>DHCPv6Client=</em> setting in the [IPv6AcceptRA] section.</p>
</blockquote>
<h1>[DHCPPREFIXDELEGATION] SECTION OPTIONS</h1>
<p>The [DHCPPrefixDelegation] section configures subnet prefixes of the
delegated prefixes acquired by a DHCPv6 client, or by a DHCPv4 client
through the 6RD option on another interface. The settings in this
section are used only when the <em>DHCPPrefixDelegation=</em> setting in
the [Network] section is enabled.</p>
<p><em>UplinkInterface=</em></p>
<blockquote>
<p>Specifies the name or the index of the uplink interface, or one of
the special values ":self" and ":auto". When ":self", the interface
itself is considered the uplink interface, and
<em>WithoutRA=solicit</em> is implied if the setting is not explicitly
specified. When ":auto", the first link which acquired prefixes to be
delegated from the DHCPv6 or DHCPv4 server is selected. Defaults to
":auto".</p>
</blockquote>
<p><em>SubnetId=</em></p>
<blockquote>
<p>Configure a specific subnet ID on the interface from a (previously)
received prefix delegation. You can either set "auto" (the default) or a
specific subnet ID (as defined in <strong>RFC 4291</strong>[25], section
2.5.4), in which case the allowed value is hexadecimal, from 0 to
0x7fffffffffffffff inclusive.</p>
</blockquote>
<p><em>Announce=</em></p>
<blockquote>
<p>Takes a boolean. When enabled, and <em>IPv6SendRA=</em> in [Network]
section is enabled, the delegated prefixes are distributed through the
IPv6 Router Advertisement. This setting will be ignored when the
<em>DHCPPrefixDelegation=</em> setting is enabled on the upstream
interface. Defaults to yes.</p>
</blockquote>
<p><em>Assign=</em></p>
<blockquote>
<p>Takes a boolean. Specifies whether to add an address from the
delegated prefixes which are received from the WAN interface by the
DHCPv6 Prefix Delegation. When true (on LAN interfce), the EUI-64
algorithm will be used by default to form an interface identifier from
the delegated prefixes. See also <em>Token=</em> setting below. Defaults
to yes.</p>
</blockquote>
<p><em>Token=</em></p>
<blockquote>
<p>Specifies an optional address generation mode for assigning an
address in each delegated prefix. This accepts the same syntax as
<em>Token=</em> in the [IPv6AcceptRA] section. If <em>Assign=</em> is
set to false, then this setting will be ignored. Defaults to unset,
which means the EUI-64 algorithm will be used.</p>
</blockquote>
<p><em>ManageTemporaryAddress=</em></p>
<blockquote>
<p>As in the [Address] section, but defaults to true.</p>
</blockquote>
<p><em>RouteMetric=</em></p>
<blockquote>
<p>The metric of the route to the delegated prefix subnet. Takes an
unsigned integer in the range 0...4294967295. When set to 0, the kernels
default value is used. Defaults to 256.</p>
</blockquote>
<p><em>NetLabel=</em></p>
<blockquote>
<p>This applies the NetLabel for the addresses received with DHCP, like
<em>NetLabel=</em> in [Address] section applies it to statically
configured addresses. See <em>NetLabel=</em> in [Address] section for
more details.</p>
</blockquote>
<h1>[IPV6ACCEPTRA] SECTION OPTIONS</h1>
<p>The [IPv6AcceptRA] section configures the IPv6 Router Advertisement
(RA) client, if it is enabled with the <em>IPv6AcceptRA=</em> setting
described above:</p>
<p><em>Token=</em></p>
<blockquote>
<p>Specifies an optional address generation mode for the Stateless
Address Autoconfiguration (SLAAC). The following values are
supported:</p>
<p><strong>eui64</strong></p>
<blockquote>
<p>The EUI-64 algorithm will be used to generate an address for that
prefix. Only supported by Ethernet or InfiniBand interfaces.</p>
</blockquote>
<p><strong>static:</strong><em>ADDRESS</em></p>
<blockquote>
<p>An IPv6 address must be specified after a colon (":"), and the lower
bits of the supplied address are combined with the upper bits of a
prefix received in a Router Advertisement (RA) message to form a
complete address. Note that if multiple prefixes are received in an RA
message, or in multiple RA messages, addresses will be formed from each
of them using the supplied address. This mode implements SLAAC but uses
a static interface identifier instead of an identifier generated by
using the EUI-64 algorithm. Because the interface identifier is static,
if Duplicate Address Detection detects that the computed address is a
duplicate (in use by another node on the link), then this mode will fail
to provide an address for that prefix. If an IPv6 address without mode
is specified, then "static" mode is assumed.</p>
</blockquote>
<p><strong>prefixstable[:</strong><em>ADDRESS</em><strong>][,</strong><em>UUID</em><strong>]</strong></p>
<blockquote>
<p>The algorithm specified in <strong>RFC 7217</strong>[26] will be used
to generate interface identifiers. This mode can optionally take an IPv6
address separated with a colon (":"). If an IPv6 address is specified,
then an interface identifier is generated only when a prefix received in
an RA message matches the supplied address.</p>
<p>This mode can also optionally take a non-null UUID in the format
which <strong>sd_id128_from_string()</strong> accepts, e.g.
"86b123b969ba4b7eb8b3d8605123525a" or
"86b123b9-69ba-4b7e-b8b3-d8605123525a". If a UUID is specified, the
value is used as the secret key to generate interface identifiers. If
not specified, then an application specific ID generated with the
systems machine-ID will be used as the secret key. See
<strong>sd-id128</strong>(3), <strong>sd_id128_from_string</strong>(3),
and <strong>sd_id128_get_machine</strong>(3).</p>
<p>Note that the "prefixstable" algorithm uses both the interface name
and MAC address as input to the hash to compute the interface
identifier, so if either of those are changed the resulting interface
identifier (and address) will be changed, even if the prefix received in
the RA message has not been changed.</p>
</blockquote>
<p>If no address generation mode is specified (which is the default), or
a received prefix does not match any of the addresses provided in
"prefixstable" mode, then the EUI-64 algorithm will be used for Ethernet
or InfiniBand interfaces, otherwise "prefixstable" will be used to form
an interface identifier for that prefix.</p>
<p>This setting can be specified multiple times. If an empty string is
assigned, then the all previous assignments are cleared.</p>
<p>Examples:</p>
<blockquote>
<pre><code>Token=eui64
Token=::1a:2b:3c:4d
Token=static:::1a:2b:3c:4d
Token=prefixstable
Token=prefixstable:2002:da8:1::</code></pre>
</blockquote>
</blockquote>
<p><em>UseDNS=</em></p>
<blockquote>
<p>When true (the default), the DNS servers received in the Router
Advertisement will be used.</p>
<p>This corresponds to the <strong>nameserver</strong> option in
<strong>resolv.conf</strong>(5).</p>
</blockquote>
<p><em>UseDomains=</em></p>
<blockquote>
<p>Takes a boolean, or the special value "route". When true, the domain
name received via IPv6 Router Advertisement (RA) will be used as DNS
search domain over this link, similarly to the effect of the
<strong>Domains=</strong> setting. If set to "route", the domain name
received via IPv6 RA will be used for routing DNS queries only, but not
for searching, similarly to the effect of the <strong>Domains=</strong>
setting when the argument is prefixed with "~". Defaults to false.</p>
<p>It is recommended to enable this option only on trusted networks, as
setting this affects resolution of all hostnames, in particular of
single-label names. It is generally safer to use the supplied domain
only as routing domain, rather than as search domain, in order to not
have it affect local resolution of single-label names.</p>
<p>When set to true, this setting corresponds to the
<strong>domain</strong> option in <strong>resolv.conf</strong>(5).</p>
</blockquote>
<p><em>RouteTable=num</em></p>
<blockquote>
<p>The table identifier for the routes received in the Router
Advertisement. Takes one of predefined names "default", "main", and
"local", and names defined in <em>RouteTable=</em> in
<strong>networkd.conf</strong>(5), or a number between
1...4294967295.</p>
<p>When used in combination with <em>VRF=</em>, the VRFs routing table
is used when this parameter is not specified.</p>
</blockquote>
<p><em>RouteMetric=</em></p>
<blockquote>
<p>Set the routing metric for the routes received in the Router
Advertisement. Takes an unsigned integer in the range 0...4294967295.
Defaults to 1024.</p>
</blockquote>
<p><em>UseMTU=</em></p>
<blockquote>
<p>Takes a boolean. When true, the MTU received in the Router
Advertisement will be used. Defaults to true.</p>
</blockquote>
<p><em>UseGateway=</em></p>
<blockquote>
<p>When true (the default), the router address will be configured as the
default gateway.</p>
</blockquote>
<p><em>UseRoutePrefix=</em></p>
<blockquote>
<p>When true (the default), the routes corresponding to the route
prefixes received in the Router Advertisement will be configured.</p>
</blockquote>
<p><em>UseAutonomousPrefix=</em></p>
<blockquote>
<p>When true (the default), the autonomous prefix received in the Router
Advertisement will be used and take precedence over any statically
configured ones.</p>
</blockquote>
<p><em>UseOnLinkPrefix=</em></p>
<blockquote>
<p>When true (the default), the onlink prefix received in the Router
Advertisement will be used and takes precedence over any statically
configured ones.</p>
</blockquote>
<p><em>RouterDenyList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 router addresses. Each address
can optionally take a prefix length after "/". Any information
advertised by the listed router is ignored.</p>
</blockquote>
<p><em>RouterAllowList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 router addresses. Each address
can optionally take a prefix length after "/". Only information
advertised by the listed router is accepted. Note that if
<em>RouterAllowList=</em> is configured then <em>RouterDenyList=</em> is
ignored.</p>
</blockquote>
<p><em>PrefixDenyList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 prefixes. Each prefix can
optionally take its prefix length after "/". IPv6 prefixes supplied via
router advertisements in the list are ignored.</p>
</blockquote>
<p><em>PrefixAllowList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 prefixes. Each prefix can
optionally take its prefix length after "/". IPv6 prefixes supplied via
router advertisements in the list are allowed. Note that if
<em>PrefixAllowList=</em> is configured then <em>PrefixDenyList=</em> is
ignored.</p>
</blockquote>
<p><em>RouteDenyList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 route prefixes. Each prefix can
optionally take its prefix length after "/". IPv6 route prefixes
supplied via router advertisements in the list are ignored.</p>
</blockquote>
<p><em>RouteAllowList=</em></p>
<blockquote>
<p>A whitespace-separated list of IPv6 route prefixes. Each prefix can
optionally take its prefix length after "/". IPv6 route prefixes
supplied via router advertisements in the list are allowed. Note that if
<em>RouteAllowList=</em> is configured then <em>RouteDenyList=</em> is
ignored.</p>
</blockquote>
<p><em>DHCPv6Client=</em></p>
<blockquote>
<p>Takes a boolean, or the special value "always". When true, the DHCPv6
client will be started in "solicit" mode if the RA has the "managed"
flag or "information-request" mode if the RA lacks the "managed" flag
but has the "other configuration" flag. If set to "always", the DHCPv6
client will be started in "solicit" mode when an RA is received, even if
neither the "managed" nor the "other configuration" flag is set in the
RA. This will be ignored when <em>WithoutRA=</em> in the [DHCPv6]
section is enabled, or <em>UplinkInterface=:self</em> in the
[DHCPPrefixDelegation] section is specified. Defaults to true.</p>
</blockquote>
<p><em>NetLabel=</em></p>
<blockquote>
<p>This applies the NetLabel for the addresses received with RA, like
<em>NetLabel=</em> in [Address] section applies it to statically
configured addresses. See <em>NetLabel=</em> in [Address] section for
more details.</p>
</blockquote>
<h1>[DHCPSERVER] SECTION OPTIONS</h1>
<p>The [DHCPServer] section contains settings for the DHCP server, if
enabled via the <em>DHCPServer=</em> option described above:</p>
<p><em>ServerAddress=</em></p>
<blockquote>
<p>Specifies server address for the DHCP server. Takes an IPv4 address
with prefix length, for example 192.168.0.1/24. This setting may be
useful when the link on which the DHCP server is running has multiple
static addresses. When unset, one of static addresses in the link will
be automatically selected. Defaults to unset.</p>
</blockquote>
<p><em>PoolOffset=</em>, <em>PoolSize=</em></p>
<blockquote>
<p>Configures the pool of addresses to hand out. The pool is a
contiguous sequence of IP addresses in the subnet configured for the
server address, which does not include the subnet nor the broadcast
address. <em>PoolOffset=</em> takes the offset of the pool from the
start of subnet, or zero to use the default value. <em>PoolSize=</em>
takes the number of IP addresses in the pool or zero to use the default
value. By default, the pool starts at the first address after the subnet
address and takes up the rest of the subnet, excluding the broadcast
address. If the pool includes the server address (the default), this is
reserved and not handed out to clients.</p>
</blockquote>
<p><em>DefaultLeaseTimeSec=</em>, <em>MaxLeaseTimeSec=</em></p>
<blockquote>
<p>Control the default and maximum DHCP lease time to pass to clients.
These settings take time values in seconds or another common time unit,
depending on the suffix. The default lease time is used for clients that
did not ask for a specific lease time. If a client asks for a lease time
longer than the maximum lease time, it is automatically shortened to the
specified time. The default lease time defaults to 1h, the maximum lease
time to 12h. Shorter lease times are beneficial if the configuration
data in DHCP leases changes frequently and clients shall learn the new
settings with shorter latencies. Longer lease times reduce the generated
DHCP network traffic.</p>
</blockquote>
<p><em>UplinkInterface=</em></p>
<blockquote>
<p>Specifies the name or the index of the uplink interface, or one of
the special values ":none" and ":auto". When emitting DNS, NTP, or SIP
servers is enabled but no servers are specified, the servers configured
in the uplink interface will be emitted. When ":auto", the link which
has a default gateway with the highest priority will be automatically
selected. When ":none", no uplink interface will be selected. Defaults
to ":auto".</p>
</blockquote>
<p><em>EmitDNS=</em>, <em>DNS=</em></p>
<blockquote>
<p><em>EmitDNS=</em> takes a boolean. Configures whether the DHCP leases
handed out to clients shall contain DNS server information. Defaults to
"yes". The DNS servers to pass to clients may be configured with the
<em>DNS=</em> option, which takes a list of IPv4 addresses, or special
value "_server_address" which will be converted to the address used by
the DHCP server.</p>
<p>If the <em>EmitDNS=</em> option is enabled but no servers configured,
the servers are automatically propagated from an "uplink" interface that
has appropriate servers set. The "uplink" interface is determined by the
default route of the system with the highest priority. Note that this
information is acquired at the time the lease is handed out, and does
not take uplink interfaces into account that acquire DNS server
information at a later point. If no suitable uplink interface is found
the DNS server data from /etc/resolv.conf is used. Also, note that the
leases are not refreshed if the uplink network configuration changes. To
ensure clients regularly acquire the most current uplink DNS server
information, it is thus advisable to shorten the DHCP lease time via
<em>MaxLeaseTimeSec=</em> described above.</p>
<p>This setting can be specified multiple times. If an empty string is
specified, then all DNS servers specified earlier are cleared.</p>
</blockquote>
<p><em>EmitNTP=</em>, <em>NTP=</em>, <em>EmitSIP=</em>, <em>SIP=</em>,
<em>EmitPOP3=</em>, <em>POP3=</em>, <em>EmitSMTP=</em>, <em>SMTP=</em>,
<em>EmitLPR=</em>, <em>LPR=</em></p>
<blockquote>
<p>Similar to the <em>EmitDNS=</em> and <em>DNS=</em> settings described
above, these settings configure whether and what server information for
the indicate protocol shall be emitted as part of the DHCP lease. The
same syntax, propagation semantics and defaults apply as for
<em>EmitDNS=</em> and <em>DNS=</em>.</p>
</blockquote>
<p><em>EmitRouter=</em>, <em>Router=</em></p>
<blockquote>
<p>The <em>EmitRouter=</em> setting takes a boolean value, and
configures whether the DHCP lease should contain the router option. The
<em>Router=</em> setting takes an IPv4 address, and configures the
router address to be emitted. When the <em>Router=</em> setting is not
specified, then the server address will be used for the router option.
When the <em>EmitRouter=</em> setting is disabled, the <em>Router=</em>
setting will be ignored. The <em>EmitRouter=</em> setting defaults to
true, and the <em>Router=</em> setting defaults to unset.</p>
</blockquote>
<p><em>EmitTimezone=</em>, <em>Timezone=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether the DHCP leases handed out to
clients shall contain timezone information. Defaults to "yes". The
<em>Timezone=</em> setting takes a timezone string (such as
"Europe/Berlin" or "UTC") to pass to clients. If no explicit timezone is
set, the system timezone of the local host is propagated, as determined
by the /etc/localtime symlink.</p>
</blockquote>
<p><em>BootServerAddress=</em></p>
<blockquote>
<p>Takes an IPv4 address of the boot server used by e.g. PXE boot
systems. When specified, this address is sent in the
<strong>siaddr</strong> field of the DHCP message header. See
<strong>RFC 2131</strong>[27] for more details. Defaults to unset.</p>
</blockquote>
<p><em>BootServerName=</em></p>
<blockquote>
<p>Takes a name of the boot server used by e.g. PXE boot systems. When
specified, this name is sent in the DHCP option 66 ("TFTP server name").
See <strong>RFC 2132</strong>[28] for more details. Defaults to
unset.</p>
<p>Note that typically setting one of <em>BootServerName=</em> or
<em>BootServerAddress=</em> is sufficient, but both can be set too, if
desired.</p>
</blockquote>
<p><em>BootFilename=</em></p>
<blockquote>
<p>Takes a path or URL to a file loaded by e.g. a PXE boot loader. When
specified, this path is sent in the DHCP option 67 ("Bootfile name").
See <strong>RFC 2132</strong>[28] for more details. Defaults to
unset.</p>
</blockquote>
<p><em>SendOption=</em></p>
<blockquote>
<p>Send a raw option with value via DHCPv4 server. Takes a DHCP option
number, data type and data
("<em>option</em>:<em>type</em>:<em>value</em>"). The option number is
an integer in the range 1...254. The type takes one of "uint8",
"uint16", "uint32", "ipv4address", "ipv6address", or "string". Special
characters in the data string may be escaped using <strong>C-style
escapes</strong>[21]. This setting can be specified multiple times. If
an empty string is specified, then all options specified earlier are
cleared. Defaults to unset.</p>
</blockquote>
<p><em>SendVendorOption=</em></p>
<blockquote>
<p>Send a vendor option with value via DHCPv4 server. Takes a DHCP
option number, data type and data
("<em>option</em>:<em>type</em>:<em>value</em>"). The option number is
an integer in the range 1...254. The type takes one of "uint8",
"uint16", "uint32", "ipv4address", or "string". Special characters in
the data string may be escaped using <strong>C-style
escapes</strong>[21]. This setting can be specified multiple times. If
an empty string is specified, then all options specified earlier are
cleared. Defaults to unset.</p>
</blockquote>
<p><em>BindToInterface=</em></p>
<blockquote>
<p>Takes a boolean value. When "yes", DHCP server socket will be bound
to its network interface and all socket communication will be restricted
to this interface. Defaults to "yes", except if <em>RelayTarget=</em> is
used (see below), in which case it defaults to "no".</p>
</blockquote>
<p><em>RelayTarget=</em></p>
<blockquote>
<p>Takes an IPv4 address, which must be in the format described in
<strong>inet_pton</strong>(3). Turns this DHCP server into a DHCP relay
agent. See <strong>RFC 1542</strong>[29]. The address is the address of
DHCP server or another relay agent to forward DHCP messages to and
from.</p>
</blockquote>
<p><em>RelayAgentCircuitId=</em></p>
<blockquote>
<p>Specifies value for Agent Circuit ID suboption of Relay Agent
Information option. Takes a string, which must be in the format
"string:<em>value</em>", where "<em>value</em>" should be replaced with
the value of the suboption. Defaults to unset (means no Agent Circuit ID
suboption is generated). Ignored if <em>RelayTarget=</em> is not
specified.</p>
</blockquote>
<p><em>RelayAgentRemoteId=</em></p>
<blockquote>
<p>Specifies value for Agent Remote ID suboption of Relay Agent
Information option. Takes a string, which must be in the format
"string:<em>value</em>", where "<em>value</em>" should be replaced with
the value of the suboption. Defaults to unset (means no Agent Remote ID
suboption is generated). Ignored if <em>RelayTarget=</em> is not
specified.</p>
</blockquote>
<h1>[DHCPSERVERSTATICLEASE] SECTION OPTIONS</h1>
<p>The "[DHCPServerStaticLease]" section configures a static DHCP lease
to assign a fixed IPv4 address to a specific device based on its MAC
address. This section can be specified multiple times.</p>
<p><em>MACAddress=</em></p>
<blockquote>
<p>The hardware address of a device to match. This key is mandatory.</p>
</blockquote>
<p><em>Address=</em></p>
<blockquote>
<p>The IPv4 address that should be assigned to the device that was
matched with <em>MACAddress=</em>. This key is mandatory.</p>
</blockquote>
<h1>[IPV6SENDRA] SECTION OPTIONS</h1>
<p>The [IPv6SendRA] section contains settings for sending IPv6 Router
Advertisements and whether to act as a router, if enabled via the
<em>IPv6SendRA=</em> option described above. IPv6 network prefixes or
routes are defined with one or more [IPv6Prefix] or [IPv6RoutePrefix]
sections.</p>
<p><em>Managed=</em>, <em>OtherInformation=</em></p>
<blockquote>
<p>Takes a boolean. Controls whether a DHCPv6 server is used to acquire
IPv6 addresses on the network link when <em>Managed=</em> is set to
"true" or if only additional network information can be obtained via
DHCPv6 for the network link when <em>OtherInformation=</em> is set to
"true". Both settings default to "false", which means that a DHCPv6
server is not being used.</p>
</blockquote>
<p><em>RouterLifetimeSec=</em></p>
<blockquote>
<p>Takes a timespan. Configures the IPv6 router lifetime in seconds. The
value must be 0 seconds, or between 4 seconds and 9000 seconds. When set
to 0, the host is not acting as a router. Defaults to 1800 seconds (30
minutes).</p>
</blockquote>
<p><em>RouterPreference=</em></p>
<blockquote>
<p>Configures IPv6 router preference if <em>RouterLifetimeSec=</em> is
non-zero. Valid values are "high", "medium" and "low", with "normal" and
"default" added as synonyms for "medium" just to make configuration
easier. See <strong>RFC 4191</strong>[18] for details. Defaults to
"medium".</p>
</blockquote>
<p><em>UplinkInterface=</em></p>
<blockquote>
<p>Specifies the name or the index of the uplink interface, or one of
the special values ":none" and ":auto". When emitting DNS servers or
search domains is enabled but no servers are specified, the servers
configured in the uplink interface will be emitted. When ":auto", the
value specified to the same setting in the [DHCPPrefixDelegation]
section will be used if <em>DHCPPrefixDelegation=</em> is enabled,
otherwise the link which has a default gateway with the highest priority
will be automatically selected. When ":none", no uplink interface will
be selected. Defaults to ":auto".</p>
</blockquote>
<p><em>EmitDNS=</em>, <em>DNS=</em></p>
<blockquote>
<p><em>DNS=</em> specifies a list of recursive DNS server IPv6 addresses
that are distributed via Router Advertisement messages when
<em>EmitDNS=</em> is true. <em>DNS=</em> also takes special value
"_link_local"; in that case the IPv6 link-local address is distributed.
If <em>DNS=</em> is empty, DNS servers are read from the [Network]
section. If the [Network] section does not contain any DNS servers
either, DNS servers from the uplink interface specified in
<em>UplinkInterface=</em> will be used. When <em>EmitDNS=</em> is false,
no DNS server information is sent in Router Advertisement messages.
<em>EmitDNS=</em> defaults to true.</p>
</blockquote>
<p><em>EmitDomains=</em>, <em>Domains=</em></p>
<blockquote>
<p>A list of DNS search domains distributed via Router Advertisement
messages when <em>EmitDomains=</em> is true. If <em>Domains=</em> is
empty, DNS search domains are read from the [Network] section. If the
[Network] section does not contain any DNS search domains either, DNS
search domains from the uplink interface specified in
<em>UplinkInterface=</em> will be used. When <em>EmitDomains=</em> is
false, no DNS search domain information is sent in Router Advertisement
messages. <em>EmitDomains=</em> defaults to true.</p>
</blockquote>
<p><em>DNSLifetimeSec=</em></p>
<blockquote>
<p>Lifetime in seconds for the DNS server addresses listed in
<em>DNS=</em> and search domains listed in <em>Domains=</em>. Defaults
to 3600 seconds (one hour).</p>
</blockquote>
<h1>[IPV6PREFIX] SECTION OPTIONS</h1>
<p>One or more [IPv6Prefix] sections contain the IPv6 prefixes that are
announced via Router Advertisements. See <strong>RFC 4861</strong>[30]
for further details.</p>
<p><em>AddressAutoconfiguration=</em>, <em>OnLink=</em></p>
<blockquote>
<p>Takes a boolean to specify whether IPv6 addresses can be
autoconfigured with this prefix and whether the prefix can be used for
onlink determination. Both settings default to "true" in order to ease
configuration.</p>
</blockquote>
<p><em>Prefix=</em></p>
<blockquote>
<p>The IPv6 prefix that is to be distributed to hosts. Similarly to
configuring static IPv6 addresses, the setting is configured as an IPv6
prefix and its prefix length, separated by a "/" character. Use multiple
[IPv6Prefix] sections to configure multiple IPv6 prefixes since prefix
lifetimes, address autoconfiguration and onlink status may differ from
one prefix to another.</p>
</blockquote>
<p><em>PreferredLifetimeSec=</em>, <em>ValidLifetimeSec=</em></p>
<blockquote>
<p>Preferred and valid lifetimes for the prefix measured in seconds.
<em>PreferredLifetimeSec=</em> defaults to 1800 seconds (30 minutes) and
<em>ValidLifetimeSec=</em> defaults to 3600 seconds (one hour).</p>
</blockquote>
<p><em>Assign=</em></p>
<blockquote>
<p>Takes a boolean. When true, adds an address from the prefix. Default
to false.</p>
</blockquote>
<p><em>Token=</em></p>
<blockquote>
<p>Specifies an optional address generation mode for assigning an
address in each prefix. This accepts the same syntax as <em>Token=</em>
in the [IPv6AcceptRA] section. If <em>Assign=</em> is set to false, then
this setting will be ignored. Defaults to unset, which means the EUI-64
algorithm will be used.</p>
</blockquote>
<p><em>RouteMetric=</em></p>
<blockquote>
<p>The metric of the prefix route. Takes an unsigned integer in the
range 0...4294967295. When unset or set to 0, the kernels default value
is used. This setting is ignored when <em>Assign=</em> is false.</p>
</blockquote>
<h1>[IPV6ROUTEPREFIX] SECTION OPTIONS</h1>
<p>One or more [IPv6RoutePrefix] sections contain the IPv6 prefix routes
that are announced via Router Advertisements. See <strong>RFC
4191</strong>[18] for further details.</p>
<p><em>Route=</em></p>
<blockquote>
<p>The IPv6 route that is to be distributed to hosts. Similarly to
configuring static IPv6 routes, the setting is configured as an IPv6
prefix routes and its prefix route length, separated by a "/" character.
Use multiple [IPv6RoutePrefix] sections to configure multiple IPv6
prefix routes.</p>
</blockquote>
<p><em>LifetimeSec=</em></p>
<blockquote>
<p>Lifetime for the route prefix measured in seconds.
<em>LifetimeSec=</em> defaults to 3600 seconds (one hour).</p>
</blockquote>
<h1>[BRIDGE] SECTION OPTIONS</h1>
<p>The [Bridge] section accepts the following keys:</p>
<p><em>UnicastFlood=</em></p>
<blockquote>
<p>Takes a boolean. Controls whether the bridge should flood traffic for
which an FDB entry is missing and the destination is unknown through
this port. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>MulticastFlood=</em></p>
<blockquote>
<p>Takes a boolean. Controls whether the bridge should flood traffic for
which an MDB entry is missing and the destination is unknown through
this port. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>MulticastToUnicast=</em></p>
<blockquote>
<p>Takes a boolean. Multicast to unicast works on top of the multicast
snooping feature of the bridge. Which means unicast copies are only
delivered to hosts which are interested in it. When unset, the kernels
default will be used.</p>
</blockquote>
<p><em>NeighborSuppression=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether ARP and ND neighbor suppression
is enabled for this port. When unset, the kernels default will be
used.</p>
</blockquote>
<p><em>Learning=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether MAC address learning is enabled
for this port. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>HairPin=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether traffic may be sent back out of
the port on which it was received. When this flag is false, then the
bridge will not forward traffic back out of the receiving port. When
unset, the kernels default will be used.</p>
</blockquote>
<p><em>Isolated=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether this port is isolated or not.
Within a bridge, isolated ports can only communicate with non-isolated
ports. When set to true, this port can only communicate with other ports
whose Isolated setting is false. When set to false, this port can
communicate with any other ports. When unset, the kernels default will
be used.</p>
</blockquote>
<p><em>UseBPDU=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether STP Bridge Protocol Data Units
will be processed by the bridge port. When unset, the kernels default
will be used.</p>
</blockquote>
<p><em>FastLeave=</em></p>
<blockquote>
<p>Takes a boolean. This flag allows the bridge to immediately stop
multicast traffic on a port that receives an IGMP Leave message. It is
only used with IGMP snooping if enabled on the bridge. When unset, the
kernels default will be used.</p>
</blockquote>
<p><em>AllowPortToBeRoot=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether a given port is allowed to become
a root port. Only used when STP is enabled on the bridge. When unset,
the kernels default will be used.</p>
</blockquote>
<p><em>ProxyARP=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether proxy ARP to be enabled on this
port. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>ProxyARPWiFi=</em></p>
<blockquote>
<p>Takes a boolean. Configures whether proxy ARP to be enabled on this
port which meets extended requirements by IEEE 802.11 and Hotspot 2.0
specifications. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>MulticastRouter=</em></p>
<blockquote>
<p>Configures this port for having multicast routers attached. A port
with a multicast router will receive all multicast traffic. Takes one of
"no" to disable multicast routers on this port, "query" to let the
system detect the presence of routers, "permanent" to permanently enable
multicast traffic forwarding on this port, or "temporary" to enable
multicast routers temporarily on this port, not depending on incoming
queries. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>Cost=</em></p>
<blockquote>
<p>Sets the "cost" of sending packets of this interface. Each port in a
bridge may have a different speed and the cost is used to decide which
link to use. Faster interfaces should have lower costs. It is an integer
value between 1 and 65535.</p>
</blockquote>
<p><em>Priority=</em></p>
<blockquote>
<p>Sets the "priority" of sending packets on this interface. Each port
in a bridge may have a different priority which is used to decide which
link to use. Lower value means higher priority. It is an integer value
between 0 to 63. Networkd does not set any default, meaning the kernel
default value of 32 is used.</p>
</blockquote>
<h1>[BRIDGEFDB] SECTION OPTIONS</h1>
<p>The [BridgeFDB] section manages the forwarding database table of a
port and accepts the following keys. Specify several [BridgeFDB]
sections to configure several static MAC table entries.</p>
<p><em>MACAddress=</em></p>
<blockquote>
<p>As in the [Network] section. This key is mandatory.</p>
</blockquote>
<p><em>Destination=</em></p>
<blockquote>
<p>Takes an IP address of the destination VXLAN tunnel endpoint.</p>
</blockquote>
<p><em>VLANId=</em></p>
<blockquote>
<p>The VLAN ID for the new static MAC table entry. If omitted, no VLAN
ID information is appended to the new static MAC table entry.</p>
</blockquote>
<p><em>VNI=</em></p>
<blockquote>
<p>The VXLAN Network Identifier (or VXLAN Segment ID) to use to connect
to the remote VXLAN tunnel endpoint. Takes a number in the range
1...16777215. Defaults to unset.</p>
</blockquote>
<p><em>AssociatedWith=</em></p>
<blockquote>
<p>Specifies where the address is associated with. Takes one of "use",
"self", "master" or "router". "use" means the address is in use. User
space can use this option to indicate to the kernel that the fdb entry
is in use. "self" means the address is associated with the port drivers
fdb. Usually hardware. "master" means the address is associated with
master devices fdb. "router" means the destination address is associated
with a router. Note that its valid if the referenced device is a VXLAN
type device and has route shortcircuit enabled. Defaults to "self".</p>
</blockquote>
<p><em>OutgoingInterface=</em></p>
<blockquote>
<p>Specifies the name or index of the outgoing interface for the VXLAN
device driver to reach the remote VXLAN tunnel endpoint. Defaults to
unset.</p>
</blockquote>
<h1>[BRIDGEMDB] SECTION OPTIONS</h1>
<p>The [BridgeMDB] section manages the multicast membership entries
forwarding database table of a port and accepts the following keys.
Specify several [BridgeMDB] sections to configure several permanent
multicast membership entries.</p>
<p><em>MulticastGroupAddress=</em></p>
<blockquote>
<p>Specifies the IPv4 or IPv6 multicast group address to add. This
setting is mandatory.</p>
</blockquote>
<p><em>VLANId=</em></p>
<blockquote>
<p>The VLAN ID for the new entry. Valid ranges are 0 (no VLAN) to 4094.
Optional, defaults to 0.</p>
</blockquote>
<h1>[LLDP] SECTION OPTIONS</h1>
<p>The [LLDP] section manages the Link Layer Discovery Protocol (LLDP)
and accepts the following keys:</p>
<p><em>MUDURL=</em></p>
<blockquote>
<p>When configured, the specified Manufacturer Usage Descriptions (MUD)
URL will be sent in LLDP packets. The syntax and semantics are the same
as for <em>MUDURL=</em> in the [DHCPv4] section described above.</p>
<p>The MUD URLs received via LLDP packets are saved and can be read
using the <strong>sd_lldp_neighbor_get_mud_url()</strong> function.</p>
</blockquote>
<h1>[CAN] SECTION OPTIONS</h1>
<p>The [CAN] section manages the Controller Area Network (CAN bus) and
accepts the following keys:</p>
<p><em>BitRate=</em></p>
<blockquote>
<p>The bitrate of CAN device in bits per second. The usual SI prefixes
(K, M) with the base of 1000 can be used here. Takes a number in the
range 1...4294967295.</p>
</blockquote>
<p><em>SamplePoint=</em></p>
<blockquote>
<p>Optional sample point in percent with one decimal (e.g. "75%",
"87.5%") or permille (e.g. "875‰"). This will be ignored when
<em>BitRate=</em> is unspecified.</p>
</blockquote>
<p><em>TimeQuantaNSec=</em>, <em>PropagationSegment=</em>,
<em>PhaseBufferSegment1=</em>, <em>PhaseBufferSegment2=</em>,
<em>SyncJumpWidth=</em></p>
<blockquote>
<p>Specifies the time quanta, propagation segment, phase buffer segment
1 and 2, and the synchronization jump width, which allow one to define
the CAN bit-timing in a hardware independent format as proposed by the
Bosch CAN 2.0 Specification. <em>TimeQuantaNSec=</em> takes a timespan
in nanoseconds. <em>PropagationSegment=</em>,
<em>PhaseBufferSegment1=</em>, <em>PhaseBufferSegment2=</em>, and
<em>SyncJumpWidth=</em> take number of time quantum specified in
<em>TimeQuantaNSec=</em> and must be an unsigned integer in the range
0...4294967295. These settings except for <em>SyncJumpWidth=</em> will
be ignored when <em>BitRate=</em> is specified.</p>
</blockquote>
<p><em>DataBitRate=</em>, <em>DataSamplePoint=</em></p>
<blockquote>
<p>The bitrate and sample point for the data phase, if CAN-FD is used.
These settings are analogous to the <em>BitRate=</em> and
<em>SamplePoint=</em> keys.</p>
</blockquote>
<p><em>DataTimeQuantaNSec=</em>, <em>DataPropagationSegment=</em>,
<em>DataPhaseBufferSegment1=</em>, <em>DataPhaseBufferSegment2=</em>,
<em>DataSyncJumpWidth=</em></p>
<blockquote>
<p>Specifies the time quanta, propagation segment, phase buffer segment
1 and 2, and the synchronization jump width for the data phase, if
CAN-FD is used. These settings are analogous to the
<em>TimeQuantaNSec=</em> or related settings.</p>
</blockquote>
<p><em>FDMode=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", CAN-FD mode is enabled for the
interface. Note, that a bitrate and optional sample point should also be
set for the CAN-FD data phase using the <em>DataBitRate=</em> and
<em>DataSamplePoint=</em> keys, or <em>DataTimeQuanta=</em> and related
settings.</p>
</blockquote>
<p><em>FDNonISO=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", non-ISO CAN-FD mode is enabled for the
interface. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>RestartSec=</em></p>
<blockquote>
<p>Automatic restart delay time. If set to a non-zero value, a restart
of the CAN controller will be triggered automatically in case of a
bus-off condition after the specified delay time. Subsecond delays can
be specified using decimals (e.g. "0.1s") or a "ms" or "us" postfix.
Using "infinity" or "0" will turn the automatic restart off. By default
automatic restart is disabled.</p>
</blockquote>
<p><em>Termination=</em></p>
<blockquote>
<p>Takes a boolean or a termination resistor value in ohm in the range
0...65535. When "yes", the termination resistor is set to 120 ohm. When
"no" or "0" is set, the termination resistor is disabled. When unset,
the kernels default will be used.</p>
</blockquote>
<p><em>TripleSampling=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", three samples (instead of one) are used
to determine the value of a received bit by majority rule. When unset,
the kernels default will be used.</p>
</blockquote>
<p><em>BusErrorReporting=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", reporting of CAN bus errors is activated
(those include single bit, frame format, and bit stuffing errors, unable
to send dominant bit, unable to send recessive bit, bus overload, active
error announcement, error occurred on transmission). When unset, the
kernels default will be used. Note: in case of a CAN bus with a single
CAN device, sending a CAN frame may result in a huge number of CAN bus
errors.</p>
</blockquote>
<p><em>ListenOnly=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", listen-only mode is enabled. When the
interface is in listen-only mode, the interface neither transmit CAN
frames nor send ACK bit. Listen-only mode is important to debug CAN
networks without interfering with the communication or acknowledge the
CAN frame. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>Loopback=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", loopback mode is enabled. When the
loopback mode is enabled, the interface treats messages transmitted by
itself as received messages. The loopback mode is important to debug CAN
networks. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>OneShot=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", one-shot mode is enabled. When unset,
the kernels default will be used.</p>
</blockquote>
<p><em>PresumeAck=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", the interface will ignore missing CAN
ACKs. When unset, the kernels default will be used.</p>
</blockquote>
<p><em>ClassicDataLengthCode=</em></p>
<blockquote>
<p>Takes a boolean. When "yes", the interface will handle the 4bit data
length code (DLC). When unset, the kernels default will be used.</p>
</blockquote>
<h1>[IPOIB] SECTION OPTIONS</h1>
<p>The [IPoIB] section manages the IP over Infiniband and accepts the
following keys:</p>
<p><em>Mode=</em></p>
<blockquote>
<p>Takes one of the special values "datagram" or "connected". Defaults
to unset, and the kernels default is used.</p>
<p>When "datagram", the Infiniband unreliable datagram (UD) transport is
used, and so the interface MTU is equal to the IB L2 MTU minus the IPoIB
encapsulation header (4 bytes). For example, in a typical IB fabric with
a 2K MTU, the IPoIB MTU will be 2048 - 4 = 2044 bytes.</p>
<p>When "connected", the Infiniband reliable connected (RC) transport is
used. Connected mode takes advantage of the connected nature of the IB
transport and allows an MTU up to the maximal IP packet size of 64K,
which reduces the number of IP packets needed for handling large UDP
datagrams, TCP segments, etc and increases the performance for large
messages.</p>
</blockquote>
<p><em>IgnoreUserspaceMulticastGroup=</em></p>
<blockquote>
<p>Takes an boolean value. When true, the kernel ignores multicast
groups handled by userspace. Defaults to unset, and the kernels default
is used.</p>
</blockquote>
<h1>[QDISC] SECTION OPTIONS</h1>
<p>The [QDisc] section manages the traffic control queueing discipline
(qdisc).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Specifies the parent Queueing Discipline (qdisc). Takes one of
"clsact" or "ingress". This is mandatory.</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<h1>[NETWORKEMULATOR] SECTION OPTIONS</h1>
<p>The [NetworkEmulator] section manages the queueing discipline (qdisc)
of the network emulator. It can be used to configure the kernel packet
scheduler and simulate packet delay and loss for UDP or TCP
applications, or limit the bandwidth usage of a particular service to
simulate internet connections.</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>DelaySec=</em></p>
<blockquote>
<p>Specifies the fixed amount of delay to be added to all packets going
out of the interface. Defaults to unset.</p>
</blockquote>
<p><em>DelayJitterSec=</em></p>
<blockquote>
<p>Specifies the chosen delay to be added to the packets outgoing to the
network interface. Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the maximum number of packets the qdisc may hold queued at
a time. An unsigned integer in the range 0...4294967294. Defaults to
1000.</p>
</blockquote>
<p><em>LossRate=</em></p>
<blockquote>
<p>Specifies an independent loss probability to be added to the packets
outgoing from the network interface. Takes a percentage value, suffixed
with "%". Defaults to unset.</p>
</blockquote>
<p><em>DuplicateRate=</em></p>
<blockquote>
<p>Specifies that the chosen percent of packets is duplicated before
queuing them. Takes a percentage value, suffixed with "%". Defaults to
unset.</p>
</blockquote>
<h1>[TOKENBUCKETFILTER] SECTION OPTIONS</h1>
<p>The [TokenBucketFilter] section manages the queueing discipline
(qdisc) of token bucket filter (tbf).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>LatencySec=</em></p>
<blockquote>
<p>Specifies the latency parameter, which specifies the maximum amount
of time a packet can sit in the Token Bucket Filter (TBF). Defaults to
unset.</p>
</blockquote>
<p><em>LimitBytes=</em></p>
<blockquote>
<p>Takes the number of bytes that can be queued waiting for tokens to
become available. When the size is suffixed with K, M, or G, it is
parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to the base
of 1024. Defaults to unset.</p>
</blockquote>
<p><em>BurstBytes=</em></p>
<blockquote>
<p>Specifies the size of the bucket. This is the maximum amount of bytes
that tokens can be available for instantaneous transfer. When the size
is suffixed with K, M, or G, it is parsed as Kilobytes, Megabytes, or
Gigabytes, respectively, to the base of 1024. Defaults to unset.</p>
</blockquote>
<p><em>Rate=</em></p>
<blockquote>
<p>Specifies the device specific bandwidth. When suffixed with K, M, or
G, the specified bandwidth is parsed as Kilobits, Megabits, or Gigabits,
respectively, to the base of 1000. Defaults to unset.</p>
</blockquote>
<p><em>MPUBytes=</em></p>
<blockquote>
<p>The Minimum Packet Unit (MPU) determines the minimal token usage
(specified in bytes) for a packet. When suffixed with K, M, or G, the
specified size is parsed as Kilobytes, Megabytes, or Gigabytes,
respectively, to the base of 1024. Defaults to zero.</p>
</blockquote>
<p><em>PeakRate=</em></p>
<blockquote>
<p>Takes the maximum depletion rate of the bucket. When suffixed with K,
M, or G, the specified size is parsed as Kilobits, Megabits, or
Gigabits, respectively, to the base of 1000. Defaults to unset.</p>
</blockquote>
<p><em>MTUBytes=</em></p>
<blockquote>
<p>Specifies the size of the peakrate bucket. When suffixed with K, M,
or G, the specified size is parsed as Kilobytes, Megabytes, or
Gigabytes, respectively, to the base of 1024. Defaults to unset.</p>
</blockquote>
<h1>[PIE] SECTION OPTIONS</h1>
<p>The [PIE] section manages the queueing discipline (qdisc) of
Proportional Integral controller-Enhanced (PIE).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the queue size in number of packets. When
this limit is reached, incoming packets are dropped. An unsigned integer
in the range 1...4294967294. Defaults to unset and kernels default is
used.</p>
</blockquote>
<h1>[FLOWQUEUEPIE] SECTION OPTIONS</h1>
<p>The "[FlowQueuePIE]" section manages the queueing discipline (qdisc)
of Flow Queue Proportional Integral controller-Enhanced (fq_pie).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the queue size in number of packets. When
this limit is reached, incoming packets are dropped. An unsigned integer
ranges 1 to 4294967294. Defaults to unset and kernels default is
used.</p>
</blockquote>
<h1>[STOCHASTICFAIRBLUE] SECTION OPTIONS</h1>
<p>The [StochasticFairBlue] section manages the queueing discipline
(qdisc) of stochastic fair blue (sfb).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the queue size in number of packets. When
this limit is reached, incoming packets are dropped. An unsigned integer
in the range 0...4294967294. Defaults to unset and kernels default is
used.</p>
</blockquote>
<h1>[STOCHASTICFAIRNESSQUEUEING] SECTION OPTIONS</h1>
<p>The [StochasticFairnessQueueing] section manages the queueing
discipline (qdisc) of stochastic fairness queueing (sfq).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PerturbPeriodSec=</em></p>
<blockquote>
<p>Specifies the interval in seconds for queue algorithm perturbation.
Defaults to unset.</p>
</blockquote>
<h1>[BFIFO] SECTION OPTIONS</h1>
<p>The [BFIFO] section manages the queueing discipline (qdisc) of Byte
limited Packet First In First Out (bfifo).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>LimitBytes=</em></p>
<blockquote>
<p>Specifies the hard limit in bytes on the FIFO buffer size. The size
limit prevents overflow in case the kernel is unable to dequeue packets
as quickly as it receives them. When this limit is reached, incoming
packets are dropped. When suffixed with K, M, or G, the specified size
is parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to the
base of 1024. Defaults to unset and kernel default is used.</p>
</blockquote>
<h1>[PFIFO] SECTION OPTIONS</h1>
<p>The [PFIFO] section manages the queueing discipline (qdisc) of Packet
First In First Out (pfifo).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the number of packets in the FIFO queue.
The size limit prevents overflow in case the kernel is unable to dequeue
packets as quickly as it receives them. When this limit is reached,
incoming packets are dropped. An unsigned integer in the range
0...4294967294. Defaults to unset and kernels default is used.</p>
</blockquote>
<h1>[PFIFOHEADDROP] SECTION OPTIONS</h1>
<p>The [PFIFOHeadDrop] section manages the queueing discipline (qdisc)
of Packet First In First Out Head Drop (pfifo_head_drop).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>As in [PFIFO] section.</p>
</blockquote>
<h1>[PFIFOFAST] SECTION OPTIONS</h1>
<p>The [PFIFOFast] section manages the queueing discipline (qdisc) of
Packet First In First Out Fast (pfifo_fast).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<h1>[CAKE] SECTION OPTIONS</h1>
<p>The [CAKE] section manages the queueing discipline (qdisc) of Common
Applications Kept Enhanced (CAKE).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>Bandwidth=</em></p>
<blockquote>
<p>Specifies the shaper bandwidth. When suffixed with K, M, or G, the
specified size is parsed as Kilobits, Megabits, or Gigabits,
respectively, to the base of 1000. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>AutoRateIngress=</em></p>
<blockquote>
<p>Takes a boolean value. Enables automatic capacity estimation based on
traffic arriving at this qdisc. This is most likely to be useful with
cellular links, which tend to change quality randomly. If this setting
is enabled, the <em>Bandwidth=</em> setting is used as an initial
estimate. Defaults to unset, and the kernels default is used.</p>
</blockquote>
<p><em>OverheadBytes=</em></p>
<blockquote>
<p>Specifies that bytes to be addeded to the size of each packet. Bytes
may be negative. Takes an integer in the range -64...256. Defaults to
unset and kernels default is used.</p>
</blockquote>
<p><em>MPUBytes=</em></p>
<blockquote>
<p>Rounds each packet (including overhead) up to the specified bytes.
Takes an integer in the range 1...256. Defaults to unset and kernels
default is used.</p>
</blockquote>
<p><em>CompensationMode=</em></p>
<blockquote>
<p>Takes one of "none", "atm", or "ptm". Specifies the compensation mode
for overhead calculation. When "none", no compensation is taken into
account. When "atm", enables the compensation for ATM cell framing,
which is normally found on ADSL links. When "ptm", enables the
compensation for PTM encoding, which is normally found on VDSL2 links
and uses a 64b/65b encoding scheme. Defaults to unset and the kernels
default is used.</p>
</blockquote>
<p><em>UseRawPacketSize=</em></p>
<blockquote>
<p>Takes a boolean value. When true, the packet size reported by the
Linux kernel will be used, instead of the underlying IP packet size.
Defaults to unset, and the kernels default is used.</p>
</blockquote>
<p><em>FlowIsolationMode=</em></p>
<blockquote>
<p>CAKE places packets from different flows into different queues, then
packets from each queue are delivered fairly. This specifies whether the
fairness is based on source address, destination address, individual
flows, or any combination of those. The available values are:</p>
<p><strong>none</strong></p>
<blockquote>
<p>The flow isolation is disabled, and all traffic passes through a
single queue.</p>
</blockquote>
<p><strong>src-host</strong></p>
<blockquote>
<p>Flows are defined only by source address. Equivalent to the "srchost"
option for <strong>tc qdisc</strong> command. See also
<strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>dst-host</strong></p>
<blockquote>
<p>Flows are defined only by destination address. Equivalent to the
"dsthost" option for <strong>tc qdisc</strong> command. See also
<strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>hosts</strong></p>
<blockquote>
<p>Flows are defined by source-destination host pairs. Equivalent to the
same option for <strong>tc qdisc</strong> command. See also
<strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>flows</strong></p>
<blockquote>
<p>Flows are defined by the entire 5-tuple of source address,
destination address, transport protocol, source port and destination
port. Equivalent to the same option for <strong>tc qdisc</strong>
command. See also <strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>dual-src-host</strong></p>
<blockquote>
<p>Flows are defined by the 5-tuple (see "flows" in the above), and
fairness is applied first over source addresses, then over individual
flows. Equivalent to the "dual-srchost" option for <strong>tc
qdisc</strong> command. See also <strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>dual-dst-host</strong></p>
<blockquote>
<p>Flows are defined by the 5-tuple (see "flows" in the above), and
fairness is applied first over destination addresses, then over
individual flows. Equivalent to the "dual-dsthost" option for <strong>tc
qdisc</strong> command. See also <strong>tc-cake</strong>(8).</p>
</blockquote>
<p><strong>triple</strong></p>
<blockquote>
<p>Flows are defined by the 5-tuple (see "flows"), and fairness is
applied over source and destination addresses, and also over individual
flows. Equivalent to the "triple-isolate" option for <strong>tc
qdisc</strong> command. See also <strong>tc-cake</strong>(8).</p>
</blockquote>
<p>Defaults to unset and the kernels default is used.</p>
</blockquote>
<p><em>NAT=</em></p>
<blockquote>
<p>Takes a boolean value. When true, CAKE performs a NAT lookup before
applying flow-isolation rules, to determine the true addresses and port
numbers of the packet, to improve fairness between hosts inside the NAT.
This has no practical effect when <em>FlowIsolationMode=</em> is "none"
or "flows", or if NAT is performed on a different host. Defaults to
unset, and the kernels default is used.</p>
</blockquote>
<p><em>PriorityQueueingPreset=</em></p>
<blockquote>
<p>CAKE divides traffic into "tins", and each tin has its own
independent set of flow-isolation queues, bandwidth threshold, and
priority. This specifies the preset of tin profiles. The available
values are:</p>
<p><strong>besteffort</strong></p>
<blockquote>
<p>Disables priority queueing by placing all traffic in one tin.</p>
</blockquote>
<p><strong>precedence</strong></p>
<blockquote>
<p>Enables priority queueing based on the legacy interpretation of TOS
"Precedence" field. Use of this preset on the modern Internet is firmly
discouraged.</p>
</blockquote>
<p><strong>diffserv8</strong></p>
<blockquote>
<p>Enables priority queueing based on the Differentiated Service
("DiffServ") field with eight tins: Background Traffic, High Throughput,
Best Effort, Video Streaming, Low Latency Transactions, Interactive
Shell, Minimum Latency, and Network Control.</p>
</blockquote>
<p><strong>diffserv4</strong></p>
<blockquote>
<p>Enables priority queueing based on the Differentiated Service
("DiffServ") field with four tins: Background Traffic, Best Effort,
Streaming Media, and Latency Sensitive.</p>
</blockquote>
<p><strong>diffserv3</strong></p>
<blockquote>
<p>Enables priority queueing based on the Differentiated Service
("DiffServ") field with three tins: Background Traffic, Best Effort, and
Latency Sensitive.</p>
</blockquote>
<p>Defaults to unset, and the kernels default is used.</p>
</blockquote>
<p><em>FirewallMark=</em></p>
<blockquote>
<p>Takes an integer in the range 1...4294967295. When specified,
firewall-mark-based overriding of CAKEs tin selection is enabled.
Defaults to unset, and the kernels default is used.</p>
</blockquote>
<p><em>Wash=</em></p>
<blockquote>
<p>Takes a boolean value. When true, CAKE clears the DSCP fields, except
for ECN bits, of any packet passing through CAKE. Defaults to unset, and
the kernels default is used.</p>
</blockquote>
<p><em>SplitGSO=</em></p>
<blockquote>
<p>Takes a boolean value. When true, CAKE will split General
Segmentation Offload (GSO) super-packets into their on-the-wire
components and dequeue them individually. Defaults to unset, and the
kernels default is used.</p>
</blockquote>
<h1>[CONTROLLEDDELAY] SECTION OPTIONS</h1>
<p>The [ControlledDelay] section manages the queueing discipline (qdisc)
of controlled delay (CoDel).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the queue size in number of packets. When
this limit is reached, incoming packets are dropped. An unsigned integer
in the range 0...4294967294. Defaults to unset and kernels default is
used.</p>
</blockquote>
<p><em>TargetSec=</em></p>
<blockquote>
<p>Takes a timespan. Specifies the acceptable minimum
standing/persistent queue delay. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>IntervalSec=</em></p>
<blockquote>
<p>Takes a timespan. This is used to ensure that the measured minimum
delay does not become too stale. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>ECN=</em></p>
<blockquote>
<p>Takes a boolean. This can be used to mark packets instead of dropping
them. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>CEThresholdSec=</em></p>
<blockquote>
<p>Takes a timespan. This sets a threshold above which all packets are
marked with ECN Congestion Experienced (CE). Defaults to unset and
kernels default is used.</p>
</blockquote>
<h1>[DEFICITROUNDROBINSCHEDULER] SECTION OPTIONS</h1>
<p>The [DeficitRoundRobinScheduler] section manages the queueing
discipline (qdisc) of Deficit Round Robin Scheduler (DRR).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<h1>[DEFICITROUNDROBINSCHEDULERCLASS] SECTION OPTIONS</h1>
<p>The [DeficitRoundRobinSchedulerClass] section manages the traffic
control class of Deficit Round Robin Scheduler (DRR).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", or a qdisc identifier. The qdisc identifier is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to "root".</p>
</blockquote>
<p><em>ClassId=</em></p>
<blockquote>
<p>Configures the unique identifier of the class. It is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to unset.</p>
</blockquote>
<p><em>QuantumBytes=</em></p>
<blockquote>
<p>Specifies the amount of bytes a flow is allowed to dequeue before the
scheduler moves to the next class. When suffixed with K, M, or G, the
specified size is parsed as Kilobytes, Megabytes, or Gigabytes,
respectively, to the base of 1024. Defaults to the MTU of the
interface.</p>
</blockquote>
<h1>[ENHANCEDTRANSMISSIONSELECTION] SECTION OPTIONS</h1>
<p>The [EnhancedTransmissionSelection] section manages the queueing
discipline (qdisc) of Enhanced Transmission Selection (ETS).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>Bands=</em></p>
<blockquote>
<p>Specifies the number of bands. An unsigned integer in the range
1...16. This value has to be at least large enough to cover the strict
bands specified through the <em>StrictBands=</em> and bandwidth-sharing
bands specified in <em>QuantumBytes=</em>.</p>
</blockquote>
<p><em>StrictBands=</em></p>
<blockquote>
<p>Specifies the number of bands that should be created in strict mode.
An unsigned integer in the range 1...16.</p>
</blockquote>
<p><em>QuantumBytes=</em></p>
<blockquote>
<p>Specifies the white-space separated list of quantum used in
band-sharing bands. When suffixed with K, M, or G, the specified size is
parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to the base
of 1024. This setting can be specified multiple times. If an empty
string is assigned, then the all previous assignments are cleared.</p>
</blockquote>
<p><em>PriorityMap=</em></p>
<blockquote>
<p>The priority map maps the priority of a packet to a band. The
argument is a whitespace separated list of numbers. The first number
indicates which band the packets with priority 0 should be put to, the
second is for priority 1, and so on. There can be up to 16 numbers in
the list. If there are fewer, the default band that traffic with one of
the unmentioned priorities goes to is the last one. Each band number
must be in the range 0...255. This setting can be specified multiple
times. If an empty string is assigned, then the all previous assignments
are cleared.</p>
</blockquote>
<h1>[GENERICRANDOMEARLYDETECTION] SECTION OPTIONS</h1>
<p>The [GenericRandomEarlyDetection] section manages the queueing
discipline (qdisc) of Generic Random Early Detection (GRED).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>VirtualQueues=</em></p>
<blockquote>
<p>Specifies the number of virtual queues. Takes an integer in the range
1...16. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>DefaultVirtualQueue=</em></p>
<blockquote>
<p>Specifies the number of default virtual queue. This must be less than
<em>VirtualQueue=</em>. Defaults to unset and kernels default is
used.</p>
</blockquote>
<p><em>GenericRIO=</em></p>
<blockquote>
<p>Takes a boolean. It turns on the RIO-like buffering scheme. Defaults
to unset and kernels default is used.</p>
</blockquote>
<h1>[FAIRQUEUEINGCONTROLLEDDELAY] SECTION OPTIONS</h1>
<p>The [FairQueueingControlledDelay] section manages the queueing
discipline (qdisc) of fair queuing controlled delay (FQ-CoDel).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the real queue size. When this limit is
reached, incoming packets are dropped. Defaults to unset and kernels
default is used.</p>
</blockquote>
<p><em>MemoryLimitBytes=</em></p>
<blockquote>
<p>Specifies the limit on the total number of bytes that can be queued
in this FQ-CoDel instance. When suffixed with K, M, or G, the specified
size is parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to
the base of 1024. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>Flows=</em></p>
<blockquote>
<p>Specifies the number of flows into which the incoming packets are
classified. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>TargetSec=</em></p>
<blockquote>
<p>Takes a timespan. Specifies the acceptable minimum
standing/persistent queue delay. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>IntervalSec=</em></p>
<blockquote>
<p>Takes a timespan. This is used to ensure that the measured minimum
delay does not become too stale. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>QuantumBytes=</em></p>
<blockquote>
<p>Specifies the number of bytes used as the "deficit" in the fair
queuing algorithm timespan. When suffixed with K, M, or G, the specified
size is parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to
the base of 1024. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>ECN=</em></p>
<blockquote>
<p>Takes a boolean. This can be used to mark packets instead of dropping
them. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>CEThresholdSec=</em></p>
<blockquote>
<p>Takes a timespan. This sets a threshold above which all packets are
marked with ECN Congestion Experienced (CE). Defaults to unset and
kernels default is used.</p>
</blockquote>
<h1>[FAIRQUEUEING] SECTION OPTIONS</h1>
<p>The [FairQueueing] section manages the queueing discipline (qdisc) of
fair queue traffic policing (FQ).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the real queue size. When this limit is
reached, incoming packets are dropped. Defaults to unset and kernels
default is used.</p>
</blockquote>
<p><em>FlowLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the maximum number of packets queued per
flow. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>QuantumBytes=</em></p>
<blockquote>
<p>Specifies the credit per dequeue RR round, i.e. the amount of bytes a
flow is allowed to dequeue at once. When suffixed with K, M, or G, the
specified size is parsed as Kilobytes, Megabytes, or Gigabytes,
respectively, to the base of 1024. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>InitialQuantumBytes=</em></p>
<blockquote>
<p>Specifies the initial sending rate credit, i.e. the amount of bytes a
new flow is allowed to dequeue initially. When suffixed with K, M, or G,
the specified size is parsed as Kilobytes, Megabytes, or Gigabytes,
respectively, to the base of 1024. Defaults to unset and kernels default
is used.</p>
</blockquote>
<p><em>MaximumRate=</em></p>
<blockquote>
<p>Specifies the maximum sending rate of a flow. When suffixed with K,
M, or G, the specified size is parsed as Kilobits, Megabits, or
Gigabits, respectively, to the base of 1000. Defaults to unset and
kernels default is used.</p>
</blockquote>
<p><em>Buckets=</em></p>
<blockquote>
<p>Specifies the size of the hash table used for flow lookups. Defaults
to unset and kernels default is used.</p>
</blockquote>
<p><em>OrphanMask=</em></p>
<blockquote>
<p>Takes an unsigned integer. For packets not owned by a socket, fq is
able to mask a part of hash and reduce number of buckets associated with
the traffic. Defaults to unset and kernels default is used.</p>
</blockquote>
<p><em>Pacing=</em></p>
<blockquote>
<p>Takes a boolean, and enables or disables flow pacing. Defaults to
unset and kernels default is used.</p>
</blockquote>
<p><em>CEThresholdSec=</em></p>
<blockquote>
<p>Takes a timespan. This sets a threshold above which all packets are
marked with ECN Congestion Experienced (CE). Defaults to unset and
kernels default is used.</p>
</blockquote>
<h1>[TRIVIALLINKEQUALIZER] SECTION OPTIONS</h1>
<p>The [TrivialLinkEqualizer] section manages the queueing discipline
(qdisc) of trivial link equalizer (teql).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>Id=</em></p>
<blockquote>
<p>Specifies the interface ID "N" of teql. Defaults to "0". Note that
when teql is used, currently, the module <strong>sch_teql</strong> with
<strong>max_equalizers=N+1</strong> option must be loaded before
<strong>systemd-networkd</strong> is started.</p>
</blockquote>
<h1>[HIERARCHYTOKENBUCKET] SECTION OPTIONS</h1>
<p>The [HierarchyTokenBucket] section manages the queueing discipline
(qdisc) of hierarchy token bucket (htb).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>DefaultClass=</em></p>
<blockquote>
<p>Takes the minor id in hexadecimal of the default class. Unclassified
traffic gets sent to the class. Defaults to unset.</p>
</blockquote>
<p><em>RateToQuantum=</em></p>
<blockquote>
<p>Takes an unsigned integer. The DRR quantums are calculated by
dividing the value configured in <em>Rate=</em> by
<em>RateToQuantum=</em>.</p>
</blockquote>
<h1>[HIERARCHYTOKENBUCKETCLASS] SECTION OPTIONS</h1>
<p>The [HierarchyTokenBucketClass] section manages the traffic control
class of hierarchy token bucket (htb).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", or a qdisc identifier. The qdisc identifier is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to "root".</p>
</blockquote>
<p><em>ClassId=</em></p>
<blockquote>
<p>Configures the unique identifier of the class. It is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to unset.</p>
</blockquote>
<p><em>Priority=</em></p>
<blockquote>
<p>Specifies the priority of the class. In the round-robin process,
classes with the lowest priority field are tried for packets first.</p>
</blockquote>
<p><em>QuantumBytes=</em></p>
<blockquote>
<p>Specifies how many bytes to serve from leaf at once. When suffixed
with K, M, or G, the specified size is parsed as Kilobytes, Megabytes,
or Gigabytes, respectively, to the base of 1024.</p>
</blockquote>
<p><em>MTUBytes=</em></p>
<blockquote>
<p>Specifies the maximum packet size we create. When suffixed with K, M,
or G, the specified size is parsed as Kilobytes, Megabytes, or
Gigabytes, respectively, to the base of 1024.</p>
</blockquote>
<p><em>OverheadBytes=</em></p>
<blockquote>
<p>Takes an unsigned integer which specifies per-packet size overhead
used in rate computations. When suffixed with K, M, or G, the specified
size is parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to
the base of 1024.</p>
</blockquote>
<p><em>Rate=</em></p>
<blockquote>
<p>Specifies the maximum rate this class and all its children are
guaranteed. When suffixed with K, M, or G, the specified size is parsed
as Kilobits, Megabits, or Gigabits, respectively, to the base of 1000.
This setting is mandatory.</p>
</blockquote>
<p><em>CeilRate=</em></p>
<blockquote>
<p>Specifies the maximum rate at which a class can send, if its parent
has bandwidth to spare. When suffixed with K, M, or G, the specified
size is parsed as Kilobits, Megabits, or Gigabits, respectively, to the
base of 1000. When unset, the value specified with <em>Rate=</em> is
used.</p>
</blockquote>
<p><em>BufferBytes=</em></p>
<blockquote>
<p>Specifies the maximum bytes burst which can be accumulated during
idle period. When suffixed with K, M, or G, the specified size is parsed
as Kilobytes, Megabytes, or Gigabytes, respectively, to the base of
1024.</p>
</blockquote>
<p><em>CeilBufferBytes=</em></p>
<blockquote>
<p>Specifies the maximum bytes burst for ceil which can be accumulated
during idle period. When suffixed with K, M, or G, the specified size is
parsed as Kilobytes, Megabytes, or Gigabytes, respectively, to the base
of 1024.</p>
</blockquote>
<h1>[HEAVYHITTERFILTER] SECTION OPTIONS</h1>
<p>The [HeavyHitterFilter] section manages the queueing discipline
(qdisc) of Heavy Hitter Filter (hhf).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<p><em>PacketLimit=</em></p>
<blockquote>
<p>Specifies the hard limit on the queue size in number of packets. When
this limit is reached, incoming packets are dropped. An unsigned integer
in the range 0...4294967294. Defaults to unset and kernels default is
used.</p>
</blockquote>
<h1>[QUICKFAIRQUEUEING] SECTION OPTIONS</h1>
<p>The [QuickFairQueueing] section manages the queueing discipline
(qdisc) of Quick Fair Queueing (QFQ).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", "clsact", "ingress" or a class identifier. The class identifier
is specified as the major and minor numbers in hexadecimal in the range
0x1–Oxffff separated with a colon ("major:minor"). Defaults to
"root".</p>
</blockquote>
<p><em>Handle=</em></p>
<blockquote>
<p>Configures the major number of unique identifier of the qdisc, known
as the handle. Takes a hexadecimal number in the range 0x1–0xffff.
Defaults to unset.</p>
</blockquote>
<h1>[QUICKFAIRQUEUEINGCLASS] SECTION OPTIONS</h1>
<p>The [QuickFairQueueingClass] section manages the traffic control
class of Quick Fair Queueing (qfq).</p>
<p><em>Parent=</em></p>
<blockquote>
<p>Configures the parent Queueing Discipline (qdisc). Takes one of
"root", or a qdisc identifier. The qdisc identifier is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to "root".</p>
</blockquote>
<p><em>ClassId=</em></p>
<blockquote>
<p>Configures the unique identifier of the class. It is specified as the
major and minor numbers in hexadecimal in the range 0x1–Oxffff separated
with a colon ("major:minor"). Defaults to unset.</p>
</blockquote>
<p><em>Weight=</em></p>
<blockquote>
<p>Specifies the weight of the class. Takes an integer in the range
1...1023. Defaults to unset in which case the kernel default is
used.</p>
</blockquote>
<p><em>MaxPacketBytes=</em></p>
<blockquote>
<p>Specifies the maximum packet size in bytes for the class. When
suffixed with K, M, or G, the specified size is parsed as Kilobytes,
Megabytes, or Gigabytes, respectively, to the base of 1024. When unset,
the kernel default is used.</p>
</blockquote>
<h1>[BRIDGEVLAN] SECTION OPTIONS</h1>
<p>The [BridgeVLAN] section manages the VLAN ID configuration of a
bridge port and accepts the following keys. Specify several [BridgeVLAN]
sections to configure several VLAN entries. The <em>VLANFiltering=</em>
option has to be enabled, see the [Bridge] section in
<strong>systemd.netdev</strong>(5).</p>
<p><em>VLAN=</em></p>
<blockquote>
<p>The VLAN ID allowed on the port. This can be either a single ID or a
range M-N. Takes an integer in the range 1...4094.</p>
</blockquote>
<p><em>EgressUntagged=</em></p>
<blockquote>
<p>The VLAN ID specified here will be used to untag frames on egress.
Configuring <em>EgressUntagged=</em> implicates the use of
<em>VLAN=</em> above and will enable the VLAN ID for ingress as well.
This can be either a single ID or a range M-N.</p>
</blockquote>
<p><em>PVID=</em></p>
<blockquote>
<p>The Port VLAN ID specified here is assigned to all untagged frames at
ingress. <em>PVID=</em> can be used only once. Configuring
<em>PVID=</em> implicates the use of <em>VLAN=</em> above and will
enable the VLAN ID for ingress as well.</p>
</blockquote>
<h1>EXAMPLES</h1>
<p><strong>Example 1. Static network configuration</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/50-static.network
[Match]
Name=enp2s0

[Network]
Address=192.168.0.15/24
Gateway=192.168.0.1</code></pre>
</blockquote>
<p>This brings interface "enp2s0" up with a static address. The
specified gateway will be used for a default route.</p>
<p><strong>Example 2. DHCP on ethernet links</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/80-dhcp.network
[Match]
Name=en*

[Network]
DHCP=yes</code></pre>
</blockquote>
<p>This will enable DHCPv4 and DHCPv6 on all interfaces with names
starting with "en" (i.e. ethernet interfaces).</p>
<p><strong>Example 3. IPv6 Prefix Delegation (DHCPv6 PD)</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/55-dhcpv6-pd-upstream.network
[Match]
Name=enp1s0

[Network]
DHCP=ipv6

# The below setting is optional, to also assign an address in the delegated prefix
# to the upstream interface. If not necessary, then comment out the line below and
# the [DHCPPrefixDelegation] section.
DHCPPrefixDelegation=yes

# If the upstream network provides Router Advertisement with Managed bit set,
# then comment out the line below and WithoutRA= setting in the [DHCPv6] section.
IPv6AcceptRA=no

[DHCPv6]
WithoutRA=solicit

[DHCPPrefixDelegation]
UplinkInterface=:self
SubnetId=0
Announce=no</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/55-dhcpv6-pd-downstream.network
[Match]
Name=enp2s0

[Network]
DHCPPrefixDelegation=yes
IPv6SendRA=yes

# It is expected that the host is acting as a router. So, usually it is not
# necessary to receive Router Advertisement from other hosts in the downstream network.
IPv6AcceptRA=no

[DHCPPrefixDelegation]
UplinkInterface=enp1s0
SubnetId=1
Announce=yes</code></pre>
</blockquote>
<p>This will enable DHCPv6-PD on the interface enp1s0 as an upstream
interface where the DHCPv6 client is running and enp2s0 as a downstream
interface where the prefix is delegated to. The delegated prefixes are
distributed by IPv6 Router Advertisement on the downstream network.</p>
<p><strong>Example 4. IPv6 Prefix Delegation (DHCPv4 6RD)</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/55-dhcpv4-6rd-upstream.network
[Match]
Name=enp1s0

[Network]
DHCP=ipv4

# When DHCPv4-6RD is used, the upstream network does not support IPv6.
# Hence, it is not necessary to wait for Router Advertisement, which is enabled by default.
IPv6AcceptRA=no

[DHCPv4]
Use6RD=yes</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/55-dhcpv4-6rd-downstream.network
[Match]
Name=enp2s0

[Network]
DHCPPrefixDelegation=yes
IPv6SendRA=yes

# It is expected that the host is acting as a router. So, usually it is not
# necessary to receive Router Advertisement from other hosts in the downstream network.
IPv6AcceptRA=no

[DHCPPrefixDelegation]
UplinkInterface=enp1s0
SubnetId=1
Announce=yes</code></pre>
</blockquote>
<p>This will enable DHCPv4-6RD on the interface enp1s0 as an upstream
interface where the DHCPv4 client is running and enp2s0 as a downstream
interface where the prefix is delegated to. The delegated prefixes are
distributed by IPv6 Router Advertisement on the downstream network.</p>
<p><strong>Example 5. A bridge with two enslaved links</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/25-bridge-static.netdev
[NetDev]
Name=bridge0
Kind=bridge</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/25-bridge-static.network
[Match]
Name=bridge0

[Network]
Address=192.168.0.15/24
Gateway=192.168.0.1
DNS=192.168.0.1</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/25-bridge-slave-interface-1.network
[Match]
Name=enp2s0

[Network]
Bridge=bridge0</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/25-bridge-slave-interface-2.network
[Match]
Name=wlp3s0

[Network]
Bridge=bridge0</code></pre>
</blockquote>
<p>This creates a bridge and attaches devices "enp2s0" and "wlp3s0" to
it. The bridge will have the specified static address and network
assigned, and a default route via the specified gateway will be added.
The specified DNS server will be added to the global list of DNS
resolvers.</p>
<p><strong>Example 6. Bridge port with VLAN forwarding</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/25-bridge-slave-interface-1.network
[Match]
Name=enp2s0

[Network]
Bridge=bridge0

[BridgeVLAN]
VLAN=1-32
PVID=42
EgressUntagged=42

[BridgeVLAN]
VLAN=100-200

[BridgeVLAN]
EgressUntagged=300-400</code></pre>
</blockquote>
<p>This overrides the configuration specified in the previous example
for the interface "enp2s0", and enables VLAN on that bridge port. VLAN
IDs 1-32, 42, 100-400 will be allowed. Packets tagged with VLAN IDs 42,
300-400 will be untagged when they leave on this interface. Untagged
packets which arrive on this interface will be assigned VLAN ID 42.</p>
<p><strong>Example 7. Various tunnels</strong></p>
<blockquote>
<pre><code>/etc/systemd/network/25-tunnels.network
[Match]
Name=ens1

[Network]
Tunnel=ipip-tun
Tunnel=sit-tun
Tunnel=gre-tun
Tunnel=vti-tun
      </code></pre>
</blockquote>
<blockquote>
<pre><code>/etc/systemd/network/25-tunnel-ipip.netdev
[NetDev]
Name=ipip-tun
Kind=ipip
      </code></pre>
</blockquote>
<blockquote>
<pre><code>/etc/systemd/network/25-tunnel-sit.netdev
[NetDev]
Name=sit-tun
Kind=sit
      </code></pre>
</blockquote>
<blockquote>
<pre><code>/etc/systemd/network/25-tunnel-gre.netdev
[NetDev]
Name=gre-tun
Kind=gre
      </code></pre>
</blockquote>
<blockquote>
<pre><code>/etc/systemd/network/25-tunnel-vti.netdev
[NetDev]
Name=vti-tun
Kind=vti
      </code></pre>
</blockquote>
<p>This will bring interface "ens1" up and create an IPIP tunnel, a SIT
tunnel, a GRE tunnel, and a VTI tunnel using it.</p>
<p><strong>Example 8. A bond device</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/30-bond1.network
[Match]
Name=bond1

[Network]
DHCP=ipv6</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/30-bond1.netdev
[NetDev]
Name=bond1
Kind=bond</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/30-bond1-dev1.network
[Match]
MACAddress=52:54:00:e9:64:41

[Network]
Bond=bond1</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/30-bond1-dev2.network
[Match]
MACAddress=52:54:00:e9:64:42

[Network]
Bond=bond1</code></pre>
</blockquote>
<p>This will create a bond device "bond1" and enslave the two devices
with MAC addresses 52:54:00:e9:64:41 and 52:54:00:e9:64:42 to it. IPv6
DHCP will be used to acquire an address.</p>
<p><strong>Example 9. Virtual Routing and Forwarding (VRF)</strong></p>
<p>Add the "bond1" interface to the VRF master interface "vrf1". This
will redirect routes generated on this interface to be within the
routing table defined during VRF creation. For kernels before 4.8
traffic wont be redirected towards the VRFs routing table unless
specific ip-rules are added.</p>
<blockquote>
<pre><code># /etc/systemd/network/25-vrf.network
[Match]
Name=bond1

[Network]
VRF=vrf1</code></pre>
</blockquote>
<p><strong>Example 10. MacVTap</strong></p>
<p>This brings up a network interface "macvtap-test" and attaches it to
"enp0s25".</p>
<blockquote>
<pre><code># /lib/systemd/network/25-macvtap.network
[Match]
Name=enp0s25

[Network]
MACVTAP=macvtap-test</code></pre>
</blockquote>
<p><strong>Example 11. A Xfrm interface with physical underlying
device.</strong></p>
<blockquote>
<pre><code># /etc/systemd/network/27-xfrm.netdev
[NetDev]
Name=xfrm0
Kind=xfrm

[Xfrm]
InterfaceId=7</code></pre>
</blockquote>
<blockquote>
<pre><code># /etc/systemd/network/27-eth0.network
[Match]
Name=eth0

[Network]
Xfrm=xfrm0</code></pre>
</blockquote>
<p>This creates a "xfrm0" interface and binds it to the "eth0" device.
This allows hardware based ipsec offloading to the "eth0" nic. If
offloading is not needed, xfrm interfaces can be assigned to the "lo"
device.</p>
<h1>SEE ALSO</h1>
<p><strong>systemd</strong>(1),
<strong>systemd-networkd.service</strong>(8),
<strong>systemd.link</strong>(5), <strong>systemd.netdev</strong>(5),
<strong>systemd-network-generator.service</strong>(8),
<strong>systemd-resolved.service</strong>(8)</p>
<h1>NOTES</h1>
<dl>
<dt> 1.</dt>
<dd>
<p>System and Service Credentials</p>
<p>https://systemd.io/CREDENTIALS</p>
</dd>
<dt> 2.</dt>
<dd>
<p>Link-Local Multicast Name Resolution</p>
<p>https://tools.ietf.org/html/rfc4795</p>
</dd>
<dt> 3.</dt>
<dd>
<p>Multicast DNS</p>
<p>https://tools.ietf.org/html/rfc6762</p>
</dd>
<dt> 4.</dt>
<dd>
<p>DNS-over-TLS</p>
<p>https://tools.ietf.org/html/rfc7858</p>
</dd>
<dt> 5.</dt>
<dd>
<p>DNSSEC</p>
<p>https://tools.ietf.org/html/rfc4033</p>
</dd>
<dt> 6.</dt>
<dd>
<p>IEEE 802.1AB-2016</p>
<p>https://standards.ieee.org/findstds/standard/802.1AB-2016.html</p>
</dd>
<dt> 7.</dt>
<dd>
<p>IP Sysctl</p>
<p>https://docs.kernel.org/networking/ip-sysctl.html</p>
</dd>
<dt> 8.</dt>
<dd>
<p>RFC 4941</p>
<p>https://tools.ietf.org/html/rfc4941</p>
</dd>
<dt> 9.</dt>
<dd>
<p>RFC 1027</p>
<p>https://tools.ietf.org/html/rfc1027</p>
</dd>
</dl>
<ol start="10" type="1">
<li><p>RFC 6275</p>
<p>https://tools.ietf.org/html/rfc6275</p></li>
<li><p>RFC 5227</p>
<p>https://tools.ietf.org/html/rfc5227</p></li>
<li><p>RFC 4862</p>
<p>https://tools.ietf.org/html/rfc4862</p></li>
<li><p>RFC 3041</p>
<p>https://tools.ietf.org/html/rfc3041</p></li>
<li><p>NetLabel</p>
<p>https://docs.kernel.org/netlabel/index.html</p></li>
<li><p>Linux Security Modules (LSMs)</p>
<p>https://en.wikipedia.org/wiki/Linux_Security_Modules</p></li>
<li><p>NetLabel Fallback Peer Labeling</p>
<p>https://github.com/SELinuxProject/selinux-notebook/blob/main/src/network_support.md</p></li>
<li><p>RFC 3484</p>
<p>https://tools.ietf.org/html/rfc3484</p></li>
<li><p>RFC 4191</p>
<p>https://tools.ietf.org/html/rfc4191</p></li>
<li><p>RFC 8520</p>
<p>https://tools.ietf.org/html/rfc8520</p></li>
<li><p>RFC 7844</p>
<p>https://tools.ietf.org/html/rfc7844</p></li>
<li><p>C-style escapes</p>
<p>https://en.wikipedia.org/wiki/Escape_sequences_in_C#Table_of_escape_sequences</p></li>
<li><p>RFC 5969</p>
<p>https://tools.ietf.org/html/rfc5969</p></li>
<li><p>RFC 3315</p>
<p>https://tools.ietf.org/html/rfc3315#section-17.2.1</p></li>
<li><p>RFC 8415</p>
<p>https://www.rfc-editor.org/rfc/rfc8415.html#section-6.3</p></li>
<li><p>RFC 4291</p>
<p>https://tools.ietf.org/html/rfc4291#section-2.5.4</p></li>
<li><p>RFC 7217</p>
<p>https://tools.ietf.org/html/rfc7217</p></li>
<li><p>RFC 2131</p>
<p>https://www.rfc-editor.org/rfc/rfc2131.html</p></li>
<li><p>RFC 2132</p>
<p>https://www.rfc-editor.org/rfc/rfc2132.html</p></li>
<li><p>RFC 1542</p>
<p>https://tools.ietf.org/html/rfc1542</p></li>
<li><p>RFC 4861</p>
<p>https://tools.ietf.org/html/rfc4861</p></li>
</ol>
