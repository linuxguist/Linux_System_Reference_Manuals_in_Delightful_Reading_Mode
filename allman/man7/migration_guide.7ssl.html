<pre><code></code></pre>
<p><br />
</p>
<link rel='stylesheet' href='../style.css'>
<script src='../script.js'></script>
<h1>NAME</h1>
<p>migration_guide - OpenSSL migration guide</p>
<h1>SYNOPSIS</h1>
<p>See the individual manual pages for details.</p>
<h1>DESCRIPTION</h1>
<p>This guide details the changes required to migrate to new versions of
OpenSSL. Currently this covers OpenSSL 3.0. For earlier versions refer
to &lt;https://github.com/openssl/openssl/blob/master/CHANGES.md&gt;.
For an overview of some of the key concepts introduced in OpenSSL 3.0
see <strong>crypto</strong> (7).</p>
<h1>OPENSSL 3.0</h1>
<h2>Main Changes from OpenSSL 1.1.1</h2>
<p><em>Major Release</em></p>
<p>OpenSSL 3.0 is a major release and consequently any application that
currently uses an older version of OpenSSL will at the very least need
to be recompiled in order to work with the new version. It is the
intention that the large majority of applications will work unchanged
with OpenSSL 3.0 if those applications previously worked with OpenSSL
1.1.1. However this is not guaranteed and some changes may be required
in some cases. Changes may also be required if applications need to take
advantage of some of the new features available in OpenSSL 3.0 such as
the availability of the FIPS module.</p>
<p><em>License Change</em></p>
<p>In previous versions, OpenSSL was licensed under the dual OpenSSL and
SSLeay licenses
&lt;https://www.openssl.org/source/license-openssl-ssleay.txt&gt; (both
licenses apply). From OpenSSL 3.0 this is replaced by the Apache License
v2 &lt;https://www.openssl.org/source/apache-license-2.0.txt&gt;.</p>
<p><em>Providers and FIPS support</em></p>
<p>One of the key changes from OpenSSL 1.1.1 is the introduction of the
Provider concept. Providers collect together and make available
algorithm implementations. With OpenSSL 3.0 it is possible to specify,
either programmatically or via a config file, which providers you want
to use for any given application. OpenSSL 3.0 comes with 5 different
providers as standard. Over time third parties may distribute additional
providers that can be plugged into OpenSSL. All algorithm
implementations available via providers are accessed through the high
level APIs (for example those functions prefixed with <code>EVP</code>).
They cannot be accessed using the Low Level APIs.</p>
<p>One of the standard providers available is the FIPS provider. This
makes available FIPS validated cryptographic algorithms. The FIPS
provider is disabled by default and needs to be enabled explicitly at
configuration time using the <code>enable-fips</code> option. If it is
enabled, the FIPS provider gets built and installed in addition to the
other standard providers. No separate installation procedure is
necessary. There is however a dedicated <code>install_fips</code> make
target, which serves the special purpose of installing only the FIPS
provider into an existing OpenSSL installation.</p>
<p>Not all algorithms may be available for the application at a
particular moment. If the application code uses any digest or cipher
algorithm via the EVP interface, the application should verify the
result of the <strong>EVP_EncryptInit</strong> (3),
<strong>EVP_EncryptInit_ex</strong> (3), and
<strong>EVP_DigestInit</strong> (3) functions. In case when the
requested algorithm is not available, these functions will fail.</p>
<p>See also Legacy Algorithms for information on the legacy
provider.</p>
<p>See also Completing the installation of the FIPS Module and Using the
FIPS Module in applications.</p>
<p><em>Low Level APIs</em></p>
<p>OpenSSL has historically provided two sets of APIs for invoking
cryptographic algorithms: the high level APIs (such as the
<code>EVP</code> APIs) and the low level APIs. The high level APIs are
typically designed to work across all algorithm types. The low level
APIs are targeted at a specific algorithm implementation. For example,
the EVP APIs provide the functions
<strong>EVP_EncryptInit_ex</strong> (3),
<strong>EVP_EncryptUpdate</strong> (3) and
<strong>EVP_EncryptFinal</strong> (3) to perform symmetric encryption.
Those functions can be used with the algorithms AES, CHACHA, 3DES etc.
On the other hand, to do AES encryption using the low level APIs you
would have to call AES specific functions such as
<strong>AES_set_encrypt_key</strong> (3),
<strong>AES_encrypt</strong> (3), and so on. The functions for 3DES are
different. Use of the low level APIs has been informally discouraged by
the OpenSSL development team for a long time. However in OpenSSL 3.0
this is made more formal. All such low level APIs have been deprecated.
You may still use them in your applications, but you may start to see
deprecation warnings during compilation (dependent on compiler support
for this). Deprecated APIs may be removed from future versions of
OpenSSL so you are strongly encouraged to update your code to use the
high level APIs instead.</p>
<p>This is described in more detail in Deprecation of Low Level
Functions</p>
<p><em>Legacy Algorithms</em></p>
<p>Some cryptographic algorithms such as <strong>MD2</strong> and
<strong>DES</strong> that were available via the EVP APIs are now
considered legacy and their use is strongly discouraged. These legacy
EVP algorithms are still available in OpenSSL 3.0 but not by default. If
you want to use them then you must load the legacy provider. This can be
as simple as a config file change, or can be done programmatically. See
<strong>OSSL_PROVIDER-legacy</strong> (7) for a complete list of
algorithms. Applications using the EVP APIs to access these algorithms
should instead use more modern algorithms. If that is not possible then
these applications should ensure that the legacy provider has been
loaded. This can be achieved either programmatically or via
configuration. See <strong>crypto</strong> (7) man page for more
information about providers.</p>
<p><em>Engines and METHOD APIs</em></p>
<p>The refactoring to support Providers conflicts internally with the
APIs used to support engines, including the ENGINE API and any function
that creates or modifies custom METHODS (for example
<strong>EVP_MD_meth_new</strong> (3),
<strong>EVP_CIPHER_meth_new</strong> (3),
<strong>EVP_PKEY_meth_new</strong> (3),
<strong>RSA_meth_new</strong> (3),
<strong>EC_KEY_METHOD_new</strong> (3), etc.). These functions are being
deprecated in OpenSSL 3.0, and users of these APIs should know that
their use can likely bypass provider selection and configuration, with
unintended consequences. This is particularly relevant for applications
written to use the OpenSSL 3.0 FIPS module, as detailed below. Authors
and maintainers of external engines are strongly encouraged to refactor
their code transforming engines into providers using the new Provider
API and avoiding deprecated methods.</p>
<p><em>Support of legacy engines</em></p>
<p>If openssl is not built without engine support or deprecated API
support, engines will still work. However, their applicability will be
limited.</p>
<p>New algorithms provided via engines will still work.</p>
<p>Engine-backed keys can be loaded via custom
<strong>OSSL_STORE</strong> implementation. In this case the
<strong>EVP_PKEY</strong> objects created via
<strong>ENGINE_load_private_key</strong> (3) will be considered legacy
and will continue to work.</p>
<p>To ensure the future compatibility, the engines should be turned to
providers. To prefer the provider-based hardware offload, you can
specify the default properties to prefer your provider.</p>
<p><em>Versioning Scheme</em></p>
<p>The OpenSSL versioning scheme has changed with the OpenSSL 3.0
release. The new versioning scheme has this format:</p>
<p>MAJOR.MINOR.PATCH</p>
<p>For OpenSSL 1.1.1 and below, different patch levels were indicated by
a letter at the end of the release version number. This will no longer
be used and instead the patch level is indicated by the final number in
the version. A change in the second (MINOR) number indicates that new
features may have been added. OpenSSL versions with the same major
number are API and ABI compatible. If the major number changes then API
and ABI compatibility is not guaranteed.</p>
<p>For more information, see <strong>OpenSSL_version</strong> (3).</p>
<p><em>Other major new features</em></p>
<p>Certificate Management Protocol (CMP, RFC 4210)</p>
<p>This also covers CRMF (RFC 4211) and HTTP transfer (RFC 6712) See
<strong>openssl-cmp</strong> (1) and
<strong>OSSL_CMP_exec_certreq</strong> (3) as starting points.</p>
<p>HTTP(S) client</p>
<p>A proper HTTP(S) client that supports GET and POST, redirection,
plain and ASN.1-encoded contents, proxies, and timeouts.</p>
<p>Key Derivation Function API (EVP_KDF)</p>
<p>This simplifies the process of adding new KDF and PRF
implementations.</p>
<p>Previously KDF algorithms had been shoe-horned into using the
EVP_PKEY object which was not a logical mapping. Existing applications
that use KDF algorithms using EVP_PKEY (scrypt, TLS1 PRF and HKDF) may
be slower as they use an EVP_KDF bridge internally. All new applications
should use the new <strong>EVP_KDF</strong> (3) interface. See also Key
Derivation Function (KDF) in <strong>OSSL_PROVIDER-default</strong> (7)
and Key Derivation Function (KDF) in
<strong>OSSL_PROVIDER-FIPS</strong> (7).</p>
<p>Message Authentication Code API (EVP_MAC)</p>
<p>This simplifies the process of adding MAC implementations.</p>
<p>This includes a generic EVP_PKEY to EVP_MAC bridge, to facilitate the
continued use of MACs through raw private keys in functionality such as
<strong>EVP_DigestSign</strong> (3) and
<strong>EVP_DigestVerify</strong> (3).</p>
<p>All new applications should use the new <strong>EVP_MAC</strong> (3)
interface. See also Message Authentication Code (MAC) in
<strong>OSSL_PROVIDER-default</strong> (7) and Message Authentication
Code (MAC) in <strong>OSSL_PROVIDER-FIPS</strong> (7).</p>
<p>Algorithm Fetching</p>
<p>Using calls to convenience functions such as
<strong>EVP_sha256()</strong> and <strong>EVP_aes_256_gcm()</strong> may
incur a performance penalty when using providers. Retrieving algorithms
from providers involves searching for an algorithm by name. This is much
slower than directly accessing a method table. It is recommended to
prefetch algorithms if an algorithm is used many times. See Performance
in <strong>crypto</strong> (7), Explicit fetching in
<strong>crypto</strong> (7) and Implicit fetching in
<strong>crypto</strong> (7).</p>
<p>Support for Linux Kernel TLS</p>
<p>In order to use KTLS, support for it must be compiled in using the
<code>enable-ktls</code> configuration option. It must also be enabled
at run time using the <strong>SSL_OP_ENABLE_KTLS</strong> option.</p>
<p>New Algorithms</p>
<ul>
<li><p>KDF algorithms SINGLE STEP and SSH See
<strong>EVP_KDF-SS</strong> (7) and
<strong>EVP_KDF-SSHKDF</strong> (7)</p></li>
<li><p>MAC Algorithms GMAC and KMAC See
<strong>EVP_MAC-GMAC</strong> (7) and
<strong>EVP_MAC-KMAC</strong> (7).</p></li>
<li><p>KEM Algorithm RSASVE See
<strong>EVP_KEM-RSA</strong> (7).</p></li>
<li><p>Cipher Algorithm AES-SIV See SIV Mode in
<strong>EVP_EncryptInit</strong> (3).</p></li>
<li><p>AES Key Wrap inverse ciphers supported by EVP layer. The inverse
ciphers use AES decryption for wrapping, and AES encryption for
unwrapping. The algorithms are: AES-128-WRAP-INV, AES-192-WRAP-INV,
AES-256-WRAP-INV, AES-128-WRAP-PAD-INV, AES-192-WRAP-PAD-INV and
AES-256-WRAP-PAD-INV.</p></li>
<li><p>CTS ciphers added to EVP layer. The algorithms are
AES-128-CBC-CTS, AES-192-CBC-CTS, AES-256-CBC-CTS, CAMELLIA-128-CBC-CTS,
CAMELLIA-192-CBC-CTS and CAMELLIA-256-CBC-CTS. CS1, CS2 and CS3 variants
are supported.</p></li>
</ul>
<p>CMS and PKCS#7 updates</p>
<ul>
<li><p>Added CAdES-BES signature verification support.</p></li>
<li><p>Added CAdES-BES signature scheme and attributes support (RFC
5126) to CMS API.</p></li>
<li><p>Added AuthEnvelopedData content type structure (RFC 5083) using
AES_GCM This uses the AES-GCM parameter (RFC 5084) for the Cryptographic
Message Syntax. Its purpose is to support encryption and decryption of a
digital envelope that is both authenticated and encrypted using AES GCM
mode.</p></li>
<li><p><strong>PKCS7_get_octet_string</strong> (3) and
<strong>PKCS7_type_is_other</strong> (3) were made public.</p></li>
</ul>
<p>PKCS#12 API updates</p>
<p>The default algorithms for pkcs12 creation with the
<strong>PKCS12_create()</strong> function were changed to more modern
PBKDF2 and AES based algorithms. The default MAC iteration count was
changed to PKCS12_DEFAULT_ITER to make it equal with the password-based
encryption iteration count. The default digest algorithm for the MAC
computation was changed to SHA-256. The pkcs12 application now supports
-legacy option that restores the previous default algorithms to support
interoperability with legacy systems.</p>
<p>Added enhanced PKCS#12 APIs which accept a library context
<strong>OSSL_LIB_CTX</strong> and (where relevant) a property query.
Other APIs which handle PKCS#7 and PKCS#8 objects have also been
enhanced where required. This includes:</p>
<p><strong>PKCS12_add_key_ex</strong> (3),
<strong>PKCS12_add_safe_ex</strong> (3),
<strong>PKCS12_add_safes_ex</strong> (3),
<strong>PKCS12_create_ex</strong> (3),
<strong>PKCS12_decrypt_skey_ex</strong> (3),
<strong>PKCS12_init_ex</strong> (3),
<strong>PKCS12_item_decrypt_d2i_ex</strong> (3),
<strong>PKCS12_item_i2d_encrypt_ex</strong> (3),
<strong>PKCS12_key_gen_asc_ex</strong> (3),
<strong>PKCS12_key_gen_uni_ex</strong> (3),
<strong>PKCS12_key_gen_utf8_ex</strong> (3),
<strong>PKCS12_pack_p7encdata_ex</strong> (3),
<strong>PKCS12_pbe_crypt_ex</strong> (3),
<strong>PKCS12_PBE_keyivgen_ex</strong> (3),
<strong>PKCS12_SAFEBAG_create_pkcs8_encrypt_ex</strong> (3),
<strong>PKCS5_pbe2_set_iv_ex</strong> (3),
<strong>PKCS5_pbe_set0_algor_ex</strong> (3),
<strong>PKCS5_pbe_set_ex</strong> (3),
<strong>PKCS5_pbkdf2_set_ex</strong> (3),
<strong>PKCS5_v2_PBE_keyivgen_ex</strong> (3),
<strong>PKCS5_v2_scrypt_keyivgen_ex</strong> (3),
<strong>PKCS8_decrypt_ex</strong> (3),
<strong>PKCS8_encrypt_ex</strong> (3),
<strong>PKCS8_set0_pbe_ex</strong> (3).</p>
<p>As part of this change the EVP_PBE_xxx APIs can also accept a library
context and property query and will call an extended version of the
key/IV derivation function which supports these parameters. This
includes <strong>EVP_PBE_CipherInit_ex</strong> (3),
<strong>EVP_PBE_find_ex</strong> (3) and
<strong>EVP_PBE_scrypt_ex</strong> (3).</p>
<p>PKCS#12 KDF versus FIPS</p>
<p>Unlike in 1.x.y, the PKCS12KDF algorithm used when a PKCS#12
structure is created with a MAC that does not work with the FIPS
provider as the PKCS12KDF is not a FIPS approvable mechanism.</p>
<p>See <strong>EVP_KDF-PKCS12KDF</strong> (7),
<strong>PKCS12_create</strong> (3), <strong>openssl-pkcs12</strong> (1),
<strong>OSSL_PROVIDER-FIPS</strong> (7).</p>
<p>Windows thread synchronization changes</p>
<p>Windows thread synchronization uses read/write primitives (SRWLock)
when supported by the OS, otherwise CriticalSection continues to be
used.</p>
<p>Trace API</p>
<p>A new generic trace API has been added which provides support for
enabling instrumentation through trace output. This feature is mainly
intended as an aid for developers and is disabled by default. To utilize
it, OpenSSL needs to be configured with the <code>enable-trace</code>
option.</p>
<p>If the tracing API is enabled, the application can activate trace
output by registering BIOs as trace channels for a number of tracing and
debugging categories. See <strong>OSSL_trace_enabled</strong> (3).</p>
<p>Key validation updates</p>
<p><strong>EVP_PKEY_public_check</strong> (3) and
<strong>EVP_PKEY_param_check</strong> (3) now work for more key types.
This includes RSA, DSA, ED25519, X25519, ED448 and X448. Previously (in
1.1.1) they would return -2. For key types that do not have parameters
then <strong>EVP_PKEY_param_check</strong> (3) will always return 1.</p>
<p><em>Other notable deprecations and changes</em></p>
<p>The function code part of an OpenSSL error code is no longer
relevant</p>
<p>This code is now always set to zero. Related functions are
deprecated.</p>
<p>STACK and HASH macros have been cleaned up</p>
<p>The type-safe wrappers are declared everywhere and implemented once.
See <strong>DEFINE_STACK_OF</strong> (3) and
<strong>DECLARE_LHASH_OF</strong> (3).</p>
<p>The RAND_DRBG subsystem has been removed</p>
<p>The new <strong>EVP_RAND</strong> (3) is a partial replacement: the
DRBG callback framework is absent. The RAND_DRBG API did not fit well
into the new provider concept as implemented by EVP_RAND and
EVP_RAND_CTX.</p>
<p>Removed <strong>FIPS_mode()</strong> and
<strong>FIPS_mode_set()</strong></p>
<p>These functions are legacy APIs that are not applicable to the new
provider model. Applications should instead use
<strong>EVP_default_properties_is_fips_enabled</strong> (3) and
<strong>EVP_default_properties_enable_fips</strong> (3).</p>
<p>Key generation is slower</p>
<p>The Miller-Rabin test now uses 64 rounds, which is used for all prime
generation, including RSA key generation. This affects the time for
larger keys sizes.</p>
<p>The default key generation method for the regular 2-prime RSA keys
was changed to the FIPS186-4 B.3.6 method (Generation of Probable Primes
with Conditions Based on Auxiliary Probable Primes). This method is
slower than the original method.</p>
<p>Change PBKDF2 to conform to SP800-132 instead of the older PKCS5
RFC2898</p>
<p>This checks that the salt length is at least 128 bits, the derived
key length is at least 112 bits, and that the iteration count is at
least 1000. For backwards compatibility these checks are disabled by
default in the default provider, but are enabled by default in the FIPS
provider.</p>
<p>To enable or disable the checks see
<strong>OSSL_KDF_PARAM_PKCS5</strong> in
<strong>EVP_KDF-PBKDF2</strong> (7). The parameter can be set using
<strong>EVP_KDF_derive</strong> (3).</p>
<p>Enforce a minimum DH modulus size of 512 bits</p>
<p>Smaller sizes now result in an error.</p>
<p>SM2 key changes</p>
<p>EC EVP_PKEYs with the SM2 curve have been reworked to automatically
become EVP_PKEY_SM2 rather than EVP_PKEY_EC.</p>
<p>Unlike in previous OpenSSL versions, this means that applications
cannot call <code>EVP_PKEY_set_alias_type(pkey, EVP_PKEY_SM2)</code> to
get SM2 computations.</p>
<p>Parameter and key generation is also reworked to make it possible to
generate EVP_PKEY_SM2 parameters and keys. Applications must now
generate SM2 keys directly and must not create an EVP_PKEY_EC key first.
It is no longer possible to import an SM2 key with domain parameters
other than the SM2 elliptic curve ones.</p>
<p>Validation of SM2 keys has been separated from the validation of
regular EC keys, allowing to improve the SM2 validation process to
reject loaded private keys that are not conforming to the SM2 ISO
standard. In particular, a private scalar <em>k</em> outside the range
<em>1 &lt;= k &lt; n-1</em> is now correctly rejected.</p>
<p><strong>EVP_PKEY_set_alias_type()</strong> method has been
removed</p>
<p>This function made a <strong>EVP_PKEY</strong> object mutable after
it had been set up. In OpenSSL 3.0 it was decided that a provided key
should not be able to change its type, so this function has been
removed.</p>
<p>Functions that return an internal key should be treated as read
only</p>
<p>Functions such as <strong>EVP_PKEY_get0_RSA</strong> (3) behave
slightly differently in OpenSSL 3.0. Previously they returned a pointer
to the low-level key used internally by libcrypto. From OpenSSL 3.0 this
key may now be held in a provider. Calling these functions will only
return a handle on the internal key where the EVP_PKEY was constructed
using this key in the first place, for example using a function or macro
such as <strong>EVP_PKEY_assign_RSA</strong> (3),
<strong>EVP_PKEY_set1_RSA</strong> (3), etc. Where the EVP_PKEY holds a
provider managed key, then these functions now return a cached copy of
the key. Changes to the internal provider key that take place after the
first time the cached key is accessed will not be reflected back in the
cached copy. Similarly any changes made to the cached copy by
application code will not be reflected back in the internal provider
key.</p>
<p>For the above reasons the keys returned from these functions should
typically be treated as read-only. To emphasise this the value returned
from <strong>EVP_PKEY_get0_RSA</strong> (3),
<strong>EVP_PKEY_get0_DSA</strong> (3),
<strong>EVP_PKEY_get0_EC_KEY</strong> (3) and
<strong>EVP_PKEY_get0_DH</strong> (3) have been made const. This may
break some existing code. Applications broken by this change should be
modified. The preferred solution is to refactor the code to avoid the
use of these deprecated functions. Failing this the code should be
modified to use a const pointer instead. The
<strong>EVP_PKEY_get1_RSA</strong> (3),
<strong>EVP_PKEY_get1_DSA</strong> (3),
<strong>EVP_PKEY_get1_EC_KEY</strong> (3) and
<strong>EVP_PKEY_get1_DH</strong> (3) functions continue to return a
non-const pointer to enable them to be freed. However they should also
be treated as read-only.</p>
<p>The public key check has moved from
<strong>EVP_PKEY_derive()</strong> to
<strong>EVP_PKEY_derive_set_peer()</strong></p>
<p>This may mean result in an error in
<strong>EVP_PKEY_derive_set_peer</strong> (3) rather than during
<strong>EVP_PKEY_derive</strong> (3). To disable this check use
EVP_PKEY_derive_set_peer_ex(dh, peer, 0).</p>
<p>The print format has cosmetic changes for some functions</p>
<p>The output from numerous printing functions such as
<strong>X509_signature_print</strong> (3),
<strong>X509_print_ex</strong> (3),
<strong>X509_CRL_print_ex</strong> (3), and other similar functions has
been amended such that there may be cosmetic differences between the
output observed in 1.1.1 and 3.0. This also applies to the
<strong>-text</strong> output from the <strong>openssl x509</strong> and
<strong>openssl crl</strong> applications.</p>
<p>Interactive mode from the <strong>openssl</strong> program has been
removed</p>
<p>From now on, running it without arguments is equivalent to
<strong>openssl help</strong>.</p>
<p>The error return values from some control calls (ctrl) have
changed</p>
<p>One significant change is that controls which used to return -2 for
invalid inputs, now return -1 indicating a generic error condition
instead.</p>
<p>DH and DHX key types have different settable parameters</p>
<p>Previously (in 1.1.1) these conflicting parameters were allowed, but
will now result in errors. See <strong>EVP_PKEY-DH</strong> (7) for
further details. This affects the behaviour of
<strong>openssl-genpkey</strong> (1) for DH parameter generation.</p>
<p><strong>EVP_CIPHER_CTX_set_flags()</strong> ordering change</p>
<p>If using a cipher from a provider the
<strong>EVP_CIPH_FLAG_LENGTH_BITS</strong> flag can only be set
<strong>after</strong> the cipher has been assigned to the cipher
context. See FLAGS in <strong>EVP_EncryptInit</strong> (3) for more
information.</p>
<p>Validation of operation context parameters</p>
<p>Due to move of the implementation of cryptographic operations to the
providers, validation of various operation parameters can be postponed
until the actual operation is executed where previously it happened
immediately when an operation parameter was set.</p>
<p>For example when setting an unsupported curve with
<strong>EVP_PKEY_CTX_set_ec_paramgen_curve_nid()</strong> this function
call will not fail but later keygen operations with the EVP_PKEY_CTX
will fail.</p>
<p>Removal of function code from the error codes</p>
<p>The function code part of the error code is now always set to 0. For
that reason the <strong>ERR_GET_FUNC()</strong> macro was removed.
Applications must resolve the error codes only using the library number
and the reason code.</p>
<p>ChaCha20-Poly1305 cipher does not allow a truncated IV length to be
used</p>
<p>In OpenSSL 3.0 setting the IV length to any value other than 12 will
result in an error. Prior to OpenSSL 3.0 the ivlen could be smaller that
the required 12 byte length, using EVP_CIPHER_CTX_ctrl(ctx,
EVP_CRTL_AEAD_SET_IVLEN, ivlen, NULL). This resulted in an IV that had
leading zero padding.</p>
<h2>Installation and Compilation</h2>
<p>Please refer to the INSTALL.md file in the top of the distribution
for instructions on how to build and install OpenSSL 3.0. Please also
refer to the various platform specific NOTES files for your specific
platform.</p>
<h2>Upgrading from OpenSSL 1.1.1</h2>
<p>Upgrading to OpenSSL 3.0 from OpenSSL 1.1.1 should be relatively
straight forward in most cases. The most likely area where you will
encounter problems is if you have used low level APIs in your code (as
discussed above). In that case you are likely to start seeing
deprecation warnings when compiling your application. If this happens
you have 3 options:</p>
<ol type="1">
<li><p>Ignore the warnings. They are just warnings. The deprecated
functions are still present and you may still use them. However be aware
that they may be removed from a future version of OpenSSL.</p></li>
<li><p>Suppress the warnings. Refer to your compiler documentation on
how to do this.</p></li>
<li><p>Remove your usage of the low level APIs. In this case you will
need to rewrite your code to use the high level APIs instead</p></li>
</ol>
<p><em>Error code changes</em></p>
<p>As OpenSSL 3.0 provides a brand new Encoder/Decoder mechanism for
working with widely used file formats, application code that checks for
particular error reason codes on key loading failures might need an
update.</p>
<p>Password-protected keys may deserve special attention. If only some
errors are treated as an indicator that the user should be asked about
the password again, it's worth testing these scenarios and processing
the newly relevant codes.</p>
<p>There may be more cases to treat specially, depending on the calling
application code.</p>
<h2>Upgrading from OpenSSL 1.0.2</h2>
<p>Upgrading to OpenSSL 3.0 from OpenSSL 1.0.2 is likely to be
significantly more difficult. In addition to the issues discussed above
in the section about Upgrading from OpenSSL 1.1.1, the main things to be
aware of are:</p>
<ol type="1">
<li><p>The build and installation procedure has changed significantly.
Check the file INSTALL.md in the top of the installation for
instructions on how to build and install OpenSSL for your platform. Also
read the various NOTES files in the same directory, as applicable for
your platform.</p></li>
<li><p>Many structures have been made opaque in OpenSSL 3.0. The
structure definitions have been removed from the public header files and
moved to internal header files. In practice this means that you can no
longer stack allocate some structures. Instead they must be heap
allocated through some function call (typically those function names
have a <code>_new</code> suffix to them). Additionally you must use
setter or getter functions to access the fields within those structures.
For example code that previously looked like this: EVP_MD_CTX md_ctx; /*
This line will now generate compiler errors */
EVP_MD_CTX_init(&amp;md_ctx); The code needs to be amended to look like
this: EVP_MD_CTX *md_ctx; md_ctx = EVP_MD_CTX_new(); ... ...
EVP_MD_CTX_free(md_ctx);</p></li>
<li><p>Support for TLSv1.3 has been added. This has a number of
implications for SSL/TLS applications. See the TLS1.3 page
&lt;https://wiki.openssl.org/index.php/TLS1.3&gt; for further
details.</p></li>
</ol>
<p>More details about the breaking changes between OpenSSL versions
1.0.2 and 1.1.0 can be found on the OpenSSL 1.1.0 Changes page
&lt;https://wiki.openssl.org/index.php/OpenSSL_1.1.0_Changes&gt;.</p>
<p><em>Upgrading from the OpenSSL 2.0 FIPS Object Module</em></p>
<p>The OpenSSL 2.0 FIPS Object Module was a separate download that had
to be built separately and then integrated into your main OpenSSL 1.0.2
build. In OpenSSL 3.0 the FIPS support is fully integrated into the
mainline version of OpenSSL and is no longer a separate download. For
further information see Completing the installation of the FIPS
Module.</p>
<p>The function calls <strong>FIPS_mode()</strong> and
<strong>FIPS_mode_set()</strong> have been removed from OpenSSL 3.0. You
should rewrite your application to not use them. See
<strong>fips_module</strong> (7) and
<strong>OSSL_PROVIDER-FIPS</strong> (7) for details.</p>
<h2>Completing the installation of the FIPS Module</h2>
<p>The FIPS Module will be built and installed automatically if FIPS
support has been configured. The current documentation can be found in
the README-FIPS
&lt;https://github.com/openssl/openssl/blob/master/README-FIPS.md&gt;
file.</p>
<h2>Programming</h2>
<p>Applications written to work with OpenSSL 1.1.1 will mostly just work
with OpenSSL 3.0. However changes will be required if you want to take
advantage of some of the new features that OpenSSL 3.0 makes available.
In order to do that you need to understand some new concepts introduced
in OpenSSL 3.0. Read Library contexts in <strong>crypto</strong> (7) for
further information.</p>
<p><em>Library Context</em></p>
<p>A library context allows different components of a complex
application to each use a different library context and have different
providers loaded with different configuration settings. See Library
contexts in <strong>crypto</strong> (7) for further info.</p>
<p>If the user creates an <strong>OSSL_LIB_CTX</strong> via
<strong>OSSL_LIB_CTX_new</strong> (3) then many functions may need to be
changed to pass additional parameters to handle the library context.</p>
<p>Using a Library Context - Old functions that should be changed</p>
<p>If a library context is needed then all EVP_* digest functions that
return a <strong>const EVP_MD *</strong> such as
<strong>EVP_sha256()</strong> should be replaced with a call to
<strong>EVP_MD_fetch</strong> (3). See ALGORITHM FETCHING in
<strong>crypto</strong> (7).</p>
<p>If a library context is needed then all EVP_* cipher functions that
return a <strong>const EVP_CIPHER *</strong> such as
<strong>EVP_aes_128_cbc()</strong> should be replaced vith a call to
<strong>EVP_CIPHER_fetch</strong> (3). See ALGORITHM FETCHING in
<strong>crypto</strong> (7).</p>
<p>Some functions can be passed an object that has already been set up
with a library context such as <strong>d2i_X509</strong> (3),
<strong>d2i_X509_CRL</strong> (3), <strong>d2i_X509_REQ</strong> (3) and
<strong>d2i_X509_PUBKEY</strong> (3). If NULL is passed instead then the
created object will be set up with the default library context. Use
<strong>X509_new_ex</strong> (3), <strong>X509_CRL_new_ex</strong> (3),
<strong>X509_REQ_new_ex</strong> (3) and
<strong>X509_PUBKEY_new_ex</strong> (3) if a library context is
required.</p>
<p>All functions listed below with a <em>NAME</em> have a replacement
function <em>NAME_ex</em> that takes <strong>OSSL_LIB_CTX</strong> as an
additional argument. Functions that have other mappings are listed along
with the respective name.</p>
<ul>
<li><p><strong>ASN1_item_new</strong> (3),
<strong>ASN1_item_d2i</strong> (3),
<strong>ASN1_item_d2i_fp</strong> (3),
<strong>ASN1_item_d2i_bio</strong> (3),
<strong>ASN1_item_sign</strong> (3) and
<strong>ASN1_item_verify</strong> (3)</p></li>
<li><p><strong>BIO_new</strong> (3)</p></li>
<li><p><strong>b2i_RSA_PVK_bio()</strong> and
<strong>i2b_PVK_bio()</strong></p></li>
<li><p><strong>BN_CTX_new</strong> (3) and
<strong>BN_CTX_secure_new</strong> (3)</p></li>
<li><p><strong>CMS_AuthEnvelopedData_create</strong> (3),
<strong>CMS_ContentInfo_new</strong> (3),
<strong>CMS_data_create</strong> (3),
<strong>CMS_digest_create</strong> (3),
<strong>CMS_EncryptedData_encrypt</strong> (3),
<strong>CMS_encrypt</strong> (3),
<strong>CMS_EnvelopedData_create</strong> (3),
<strong>CMS_ReceiptRequest_create0</strong> (3) and
<strong>CMS_sign</strong> (3)</p></li>
<li><p><strong>CONF_modules_load_file</strong> (3)</p></li>
<li><p><strong>CTLOG_new</strong> (3),
<strong>CTLOG_new_from_base64</strong> (3) and
<strong>CTLOG_STORE_new</strong> (3)</p></li>
<li><p><strong>CT_POLICY_EVAL_CTX_new</strong> (3)</p></li>
<li><p><strong>d2i_AutoPrivateKey</strong> (3),
<strong>d2i_PrivateKey</strong> (3) and
<strong>d2i_PUBKEY</strong> (3)</p></li>
<li><p><strong>d2i_PrivateKey_bio</strong> (3) and
<strong>d2i_PrivateKey_fp</strong> (3) Use
<strong>d2i_PrivateKey_ex_bio</strong> (3) and
<strong>d2i_PrivateKey_ex_fp</strong> (3)</p></li>
<li><p><strong>EC_GROUP_new</strong> (3) Use
<strong>EC_GROUP_new_by_curve_name_ex</strong> (3) or
<strong>EC_GROUP_new_from_params</strong> (3).</p></li>
<li><p><strong>EVP_DigestSignInit</strong> (3) and
<strong>EVP_DigestVerifyInit</strong> (3)</p></li>
<li><p><strong>EVP_PBE_CipherInit</strong> (3),
<strong>EVP_PBE_find</strong> (3) and
<strong>EVP_PBE_scrypt</strong> (3)</p></li>
<li><p><strong>PKCS5_PBE_keyivgen</strong> (3)</p></li>
<li><p><strong>EVP_PKCS82PKEY</strong> (3)</p></li>
<li><p><strong>EVP_PKEY_CTX_new_id</strong> (3) Use
<strong>EVP_PKEY_CTX_new_from_name</strong> (3)</p></li>
<li><p><strong>EVP_PKEY_derive_set_peer</strong> (3),
<strong>EVP_PKEY_new_raw_private_key</strong> (3) and
<strong>EVP_PKEY_new_raw_public_key</strong> (3)</p></li>
<li><p><strong>EVP_SignFinal</strong> (3) and
<strong>EVP_VerifyFinal</strong> (3)</p></li>
<li><p><strong>NCONF_new</strong> (3)</p></li>
<li><p><strong>OCSP_RESPID_match</strong> (3) and
<strong>OCSP_RESPID_set_by_key</strong> (3)</p></li>
<li><p><strong>OPENSSL_thread_stop</strong> (3)</p></li>
<li><p><strong>OSSL_STORE_open</strong> (3)</p></li>
<li><p><strong>PEM_read_bio_Parameters</strong> (3),
<strong>PEM_read_bio_PrivateKey</strong> (3),
<strong>PEM_read_bio_PUBKEY</strong> (3),
<strong>PEM_read_PrivateKey</strong> (3) and
<strong>PEM_read_PUBKEY</strong> (3)</p></li>
<li><p><strong>PEM_write_bio_PrivateKey</strong> (3),
<strong>PEM_write_bio_PUBKEY</strong> (3),
<strong>PEM_write_PrivateKey</strong> (3) and
<strong>PEM_write_PUBKEY</strong> (3)</p></li>
<li><p><strong>PEM_X509_INFO_read_bio</strong> (3) and
<strong>PEM_X509_INFO_read</strong> (3)</p></li>
<li><p><strong>PKCS12_add_key</strong> (3),
<strong>PKCS12_add_safe</strong> (3),
<strong>PKCS12_add_safes</strong> (3),
<strong>PKCS12_create</strong> (3),
<strong>PKCS12_decrypt_skey</strong> (3),
<strong>PKCS12_init</strong> (3),
<strong>PKCS12_item_decrypt_d2i</strong> (3),
<strong>PKCS12_item_i2d_encrypt</strong> (3),
<strong>PKCS12_key_gen_asc</strong> (3),
<strong>PKCS12_key_gen_uni</strong> (3),
<strong>PKCS12_key_gen_utf8</strong> (3),
<strong>PKCS12_pack_p7encdata</strong> (3),
<strong>PKCS12_pbe_crypt</strong> (3),
<strong>PKCS12_PBE_keyivgen</strong> (3),
<strong>PKCS12_SAFEBAG_create_pkcs8_encrypt</strong> (3)</p></li>
<li><p><strong>PKCS5_pbe_set0_algor</strong> (3),
<strong>PKCS5_pbe_set</strong> (3),
<strong>PKCS5_pbe2_set_iv</strong> (3),
<strong>PKCS5_pbkdf2_set</strong> (3) and
<strong>PKCS5_v2_scrypt_keyivgen</strong> (3)</p></li>
<li><p><strong>PKCS7_encrypt</strong> (3),
<strong>PKCS7_new</strong> (3) and
<strong>PKCS7_sign</strong> (3)</p></li>
<li><p><strong>PKCS8_decrypt</strong> (3),
<strong>PKCS8_encrypt</strong> (3) and
<strong>PKCS8_set0_pbe</strong> (3)</p></li>
<li><p><strong>RAND_bytes</strong> (3) and
<strong>RAND_priv_bytes</strong> (3)</p></li>
<li><p><strong>SMIME_write_ASN1</strong> (3)</p></li>
<li><p><strong>SSL_load_client_CA_file</strong> (3)</p></li>
<li><p><strong>SSL_CTX_new</strong> (3)</p></li>
<li><p><strong>TS_RESP_CTX_new</strong> (3)</p></li>
<li><p><strong>X509_CRL_new</strong> (3)</p></li>
<li><p><strong>X509_load_cert_crl_file</strong> (3) and
<strong>X509_load_cert_file</strong> (3)</p></li>
<li><p><strong>X509_LOOKUP_by_subject</strong> (3) and
<strong>X509_LOOKUP_ctrl</strong> (3)</p></li>
<li><p><strong>X509_NAME_hash</strong> (3)</p></li>
<li><p><strong>X509_new</strong> (3)</p></li>
<li><p><strong>X509_REQ_new</strong> (3) and
<strong>X509_REQ_verify</strong> (3)</p></li>
<li><p><strong>X509_STORE_CTX_new</strong> (3),
<strong>X509_STORE_set_default_paths</strong> (3),
<strong>X509_STORE_load_file</strong> (3),
<strong>X509_STORE_load_locations</strong> (3) and
<strong>X509_STORE_load_store</strong> (3)</p></li>
</ul>
<p>New functions that use a Library context</p>
<p>The following functions can be passed a library context if required.
Passing NULL will use the default library context.</p>
<ul>
<li><p><strong>BIO_new_from_core_bio</strong> (3)</p></li>
<li><p><strong>EVP_ASYM_CIPHER_fetch</strong> (3) and
<strong>EVP_ASYM_CIPHER_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_CIPHER_fetch</strong> (3) and
<strong>EVP_CIPHER_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_default_properties_enable_fips</strong> (3) and
<strong>EVP_default_properties_is_fips_enabled</strong> (3)</p></li>
<li><p><strong>EVP_KDF_fetch</strong> (3) and
<strong>EVP_KDF_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_KEM_fetch</strong> (3) and
<strong>EVP_KEM_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_KEYEXCH_fetch</strong> (3) and
<strong>EVP_KEYEXCH_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_KEYMGMT_fetch</strong> (3) and
<strong>EVP_KEYMGMT_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_MAC_fetch</strong> (3) and
<strong>EVP_MAC_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_MD_fetch</strong> (3) and
<strong>EVP_MD_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_PKEY_CTX_new_from_pkey</strong> (3)</p></li>
<li><p><strong>EVP_PKEY_Q_keygen</strong> (3)</p></li>
<li><p><strong>EVP_Q_mac</strong> (3) and
<strong>EVP_Q_digest</strong> (3)</p></li>
<li><p><strong>EVP_RAND</strong> (3) and
<strong>EVP_RAND_do_all_provided</strong> (3)</p></li>
<li><p><strong>EVP_set_default_properties</strong> (3)</p></li>
<li><p><strong>EVP_SIGNATURE_fetch</strong> (3) and
<strong>EVP_SIGNATURE_do_all_provided</strong> (3)</p></li>
<li><p><strong>OSSL_CMP_CTX_new</strong> (3) and
<strong>OSSL_CMP_SRV_CTX_new</strong> (3)</p></li>
<li><p><strong>OSSL_CRMF_ENCRYPTEDVALUE_get1_encCert</strong> (3)</p></li>
<li><p><strong>OSSL_CRMF_MSG_create_popo</strong> (3) and
<strong>OSSL_CRMF_MSGS_verify_popo</strong> (3)</p></li>
<li><p><strong>OSSL_CRMF_pbm_new</strong> (3) and
<strong>OSSL_CRMF_pbmp_new</strong> (3)</p></li>
<li><p><strong>OSSL_DECODER_CTX_add_extra</strong> (3) and
<strong>OSSL_DECODER_CTX_new_for_pkey</strong> (3)</p></li>
<li><p><strong>OSSL_DECODER_fetch</strong> (3) and
<strong>OSSL_DECODER_do_all_provided</strong> (3)</p></li>
<li><p><strong>OSSL_ENCODER_CTX_add_extra</strong> (3)</p></li>
<li><p><strong>OSSL_ENCODER_fetch</strong> (3) and
<strong>OSSL_ENCODER_do_all_provided</strong> (3)</p></li>
<li><p><strong>OSSL_LIB_CTX_free</strong> (3),
<strong>OSSL_LIB_CTX_load_config</strong> (3) and
<strong>OSSL_LIB_CTX_set0_default</strong> (3)</p></li>
<li><p><strong>OSSL_PROVIDER_add_builtin</strong> (3),
<strong>OSSL_PROVIDER_available</strong> (3),
<strong>OSSL_PROVIDER_do_all</strong> (3),
<strong>OSSL_PROVIDER_load</strong> (3),
<strong>OSSL_PROVIDER_set_default_search_path</strong> (3) and
<strong>OSSL_PROVIDER_try_load</strong> (3)</p></li>
<li><p><strong>OSSL_SELF_TEST_get_callback</strong> (3) and
<strong>OSSL_SELF_TEST_set_callback</strong> (3)</p></li>
<li><p><strong>OSSL_STORE_attach</strong> (3)</p></li>
<li><p><strong>OSSL_STORE_LOADER_fetch</strong> (3) and
<strong>OSSL_STORE_LOADER_do_all_provided</strong> (3)</p></li>
<li><p><strong>RAND_get0_primary</strong> (3),
<strong>RAND_get0_private</strong> (3),
<strong>RAND_get0_public</strong> (3),
<strong>RAND_set_DRBG_type</strong> (3) and
<strong>RAND_set_seed_source_type</strong> (3)</p></li>
</ul>
<p><em>Providers</em></p>
<p>Providers are described in detail here Providers in
<strong>crypto</strong> (7). See also OPENSSL PROVIDERS in
<strong>crypto</strong> (7).</p>
<p><em>Fetching algorithms and property queries</em></p>
<p>Implicit and Explicit Fetching is described in detail here ALGORITHM
FETCHING in <strong>crypto</strong> (7).</p>
<p><em>Mapping EVP controls and flags to provider
<strong>OSSL_PARAM</strong> (3) parameters</em></p>
<p>The existing functions for controls (such as
<strong>EVP_CIPHER_CTX_ctrl</strong> (3)) and manipulating flags (such
as <strong>EVP_MD_CTX_set_flags</strong> (3))internally use
<strong>OSSL_PARAMS</strong> to pass information to/from provider
objects. See <strong>OSSL_PARAM</strong> (3) for additional information
related to parameters.</p>
<p>For ciphers see CONTROLS in <strong>EVP_EncryptInit</strong> (3),
FLAGS in <strong>EVP_EncryptInit</strong> (3) and PARAMETERS in
<strong>EVP_EncryptInit</strong> (3).</p>
<p>For digests see CONTROLS in <strong>EVP_DigestInit</strong> (3),
FLAGS in <strong>EVP_DigestInit</strong> (3) and PARAMETERS in
<strong>EVP_DigestInit</strong> (3).</p>
<p><em>Deprecation of Low Level Functions</em></p>
<p>A significant number of APIs have been deprecated in OpenSSL 3.0.
This section describes some common categories of deprecations. See
Deprecated function mappings for the list of deprecated functions that
refer to these categories.</p>
<p>Providers are a replacement for engines and low-level method
overrides</p>
<p>Any accessor that uses an ENGINE is deprecated (such as
<strong>EVP_PKEY_set1_engine()</strong>). Applications using engines
should instead use providers.</p>
<p>Before providers were added algorithms were overridden by changing
the methods used by algorithms. All these methods such as
<strong>RSA_new_method()</strong> and <strong>RSA_meth_new()</strong>
are now deprecated and can be replaced by using providers instead.</p>
<p>Deprecated i2d and d2i functions for low-level key types</p>
<p>Any i2d and d2i functions such as <strong>d2i_DHparams()</strong>
that take a low-level key type have been deprecated. Applications should
instead use the <strong>OSSL_DECODER</strong> (3) and
<strong>OSSL_ENCODER</strong> (3) APIs to read and write files. See
Migration in <strong>d2i_RSAPrivateKey</strong> (3) for further
details.</p>
<p>Deprecated low-level key object getters and setters</p>
<p>Applications that set or get low-level key objects (such as
<strong>EVP_PKEY_set1_DH()</strong> or <strong>EVP_PKEY_get0()</strong>)
should instead use the OSSL_ENCODER (See
<strong>OSSL_ENCODER_to_bio</strong> (3)) or OSSL_DECODER (See
<strong>OSSL_DECODER_from_bio</strong> (3)) APIs, or alternatively use
<strong>EVP_PKEY_fromdata</strong> (3) or
<strong>EVP_PKEY_todata</strong> (3).</p>
<p>Deprecated low-level key parameter getters</p>
<p>Functions that access low-level objects directly such as
<strong>RSA_get0_n</strong> (3) are now deprecated. Applications should
use one of <strong>EVP_PKEY_get_bn_param</strong> (3),
<strong>EVP_PKEY_get_int_param</strong> (3),
l&lt;<strong>EVP_PKEY_get_size_t_param</strong> (3)&gt;,
<strong>EVP_PKEY_get_utf8_string_param</strong> (3),
<strong>EVP_PKEY_get_octet_string_param</strong> (3) or
<strong>EVP_PKEY_get_params</strong> (3) to access fields from an
EVP_PKEY. Gettable parameters are listed in Common RSA parameters in
<strong>EVP_PKEY-RSA</strong> (7), DH parameters in
<strong>EVP_PKEY-DH</strong> (7), DSA parameters in
<strong>EVP_PKEY-DSA</strong> (7), FFC parameters in
<strong>EVP_PKEY-FFC</strong> (7), Common EC parameters in
<strong>EVP_PKEY-EC</strong> (7) and Common X25519, X448, ED25519 and
ED448 parameters in <strong>EVP_PKEY-X25519</strong> (7). Applications
may also use <strong>EVP_PKEY_todata</strong> (3) to return all
fields.</p>
<p>Deprecated low-level key parameter setters</p>
<p>Functions that access low-level objects directly such as
<strong>RSA_set0_crt_params</strong> (3) are now deprecated.
Applications should use <strong>EVP_PKEY_fromdata</strong> (3) to create
new keys from user provided key data. Keys should be immutable once they
are created, so if required the user may use
<strong>EVP_PKEY_todata</strong> (3),
<strong>OSSL_PARAM_merge</strong> (3), and
<strong>EVP_PKEY_fromdata</strong> (3) to create a modified key. See
Examples in <strong>EVP_PKEY-DH</strong> (7) for more information. See
Deprecated low-level key generation functions for information on
generating a key using parameters.</p>
<p>Deprecated low-level object creation</p>
<p>Low-level objects were created using methods such as
<strong>RSA_new</strong> (3), <strong>RSA_up_ref</strong> (3) and
<strong>RSA_free</strong> (3). Applications should instead use the
high-level EVP_PKEY APIs, e.g. <strong>EVP_PKEY_new</strong> (3),
<strong>EVP_PKEY_up_ref</strong> (3) and
<strong>EVP_PKEY_free</strong> (3). See also
<strong>EVP_PKEY_CTX_new_from_name</strong> (3) and
<strong>EVP_PKEY_CTX_new_from_pkey</strong> (3).</p>
<p>EVP_PKEYs may be created in a variety of ways: See also Deprecated
low-level key generation functions, Deprecated low-level key reading and
writing functions and Deprecated low-level key parameter setters.</p>
<p>Deprecated low-level encryption functions</p>
<p>Low-level encryption functions such as
<strong>AES_encrypt</strong> (3) and <strong>AES_decrypt</strong> (3)
have been informally discouraged from use for a long time. Applications
should instead use the high level EVP APIs
<strong>EVP_EncryptInit_ex</strong> (3),
<strong>EVP_EncryptUpdate</strong> (3), and
<strong>EVP_EncryptFinal_ex</strong> (3) or
<strong>EVP_DecryptInit_ex</strong> (3),
<strong>EVP_DecryptUpdate</strong> (3) and
<strong>EVP_DecryptFinal_ex</strong> (3).</p>
<p>Deprecated low-level digest functions</p>
<p>Use of low-level digest functions such as
<strong>SHA1_Init</strong> (3) have been informally discouraged from use
for a long time. Applications should instead use the the high level EVP
APIs <strong>EVP_DigestInit_ex</strong> (3),
<strong>EVP_DigestUpdate</strong> (3) and
<strong>EVP_DigestFinal_ex</strong> (3), or the quick one-shot
<strong>EVP_Q_digest</strong> (3).</p>
<p>Note that the functions <strong>SHA1</strong> (3),
<strong>SHA224</strong> (3), <strong>SHA256</strong> (3),
<strong>SHA384</strong> (3) and <strong>SHA512</strong> (3) have changed
to macros that use <strong>EVP_Q_digest</strong> (3).</p>
<p>Deprecated low-level signing functions</p>
<p>Use of low-level signing functions such as
<strong>DSA_sign</strong> (3) have been informally discouraged for a
long time. Instead applications should use
<strong>EVP_DigestSign</strong> (3) and
<strong>EVP_DigestVerify</strong> (3). See also
<strong>EVP_SIGNATURE-RSA</strong> (7),
<strong>EVP_SIGNATURE-DSA</strong> (7),
<strong>EVP_SIGNATURE-ECDSA</strong> (7) and
<strong>EVP_SIGNATURE-ED25519</strong> (7).</p>
<p>Deprecated low-level MAC functions</p>
<p>Low-level mac functions such as <strong>CMAC_Init</strong> (3) are
deprecated. Applications should instead use the new
<strong>EVP_MAC</strong> (3) interface, using
<strong>EVP_MAC_CTX_new</strong> (3),
<strong>EVP_MAC_CTX_free</strong> (3),
<strong>EVP_MAC_init</strong> (3), <strong>EVP_MAC_update</strong> (3)
and <strong>EVP_MAC_final</strong> (3) or the single-shot MAC function
<strong>EVP_Q_mac</strong> (3). See <strong>EVP_MAC</strong> (3),
<strong>EVP_MAC-HMAC</strong> (7), <strong>EVP_MAC-CMAC</strong> (7),
<strong>EVP_MAC-GMAC</strong> (7), <strong>EVP_MAC-KMAC</strong> (7),
<strong>EVP_MAC-BLAKE2</strong> (7),
<strong>EVP_MAC-Poly1305</strong> (7) and
<strong>EVP_MAC-Siphash</strong> (7) for additional information.</p>
<p>Note that the one-shot method <strong>HMAC()</strong> is still
available for compatibility purposes, but this can also be replaced by
using EVP_Q_MAC if a library context is required.</p>
<p>Deprecated low-level validation functions</p>
<p>Low-level validation functions such as <strong>DH_check</strong> (3)
have been informally discouraged from use for a long time. Applications
should instead use the high-level EVP_PKEY APIs such as
<strong>EVP_PKEY_check</strong> (3),
<strong>EVP_PKEY_param_check</strong> (3),
<strong>EVP_PKEY_param_check_quick</strong> (3),
<strong>EVP_PKEY_public_check</strong> (3),
<strong>EVP_PKEY_public_check_quick</strong> (3),
<strong>EVP_PKEY_private_check</strong> (3), and
<strong>EVP_PKEY_pairwise_check</strong> (3).</p>
<p>Deprecated low-level key exchange functions</p>
<p>Many low-level functions have been informally discouraged from use
for a long time. Applications should instead use
<strong>EVP_PKEY_derive</strong> (3). See
<strong>EVP_KEYEXCH-DH</strong> (7),
<strong>EVP_KEYEXCH-ECDH</strong> (7) and
<strong>EVP_KEYEXCH-X25519</strong> (7).</p>
<p>Deprecated low-level key generation functions</p>
<p>Many low-level functions have been informally discouraged from use
for a long time. Applications should instead use
<strong>EVP_PKEY_keygen_init</strong> (3) and
<strong>EVP_PKEY_generate</strong> (3) as described in
<strong>EVP_PKEY-DSA</strong> (7), <strong>EVP_PKEY-DH</strong> (7),
<strong>EVP_PKEY-RSA</strong> (7), <strong>EVP_PKEY-EC</strong> (7) and
<strong>EVP_PKEY-X25519</strong> (7). The 'quick' one-shot function
<strong>EVP_PKEY_Q_keygen</strong> (3) and macros for the most common
cases: &lt;<strong>EVP_RSA_gen</strong> (3)&gt; and
<strong>EVP_EC_gen</strong> (3) may also be used.</p>
<p>Deprecated low-level key reading and writing functions</p>
<p>Use of low-level objects (such as DSA) has been informally
discouraged from use for a long time. Functions to read and write these
low-level objects (such as <strong>PEM_read_DSA_PUBKEY()</strong>)
should be replaced. Applications should instead use
<strong>OSSL_ENCODER_to_bio</strong> (3) and
<strong>OSSL_DECODER_from_bio</strong> (3).</p>
<p>Deprecated low-level key printing functions</p>
<p>Use of low-level objects (such as DSA) has been informally
discouraged from use for a long time. Functions to print these low-level
objects such as <strong>DSA_print()</strong> should be replaced with the
equivalent EVP_PKEY functions. Application should use one of
<strong>EVP_PKEY_print_public</strong> (3),
<strong>EVP_PKEY_print_private</strong> (3),
<strong>EVP_PKEY_print_params</strong> (3),
<strong>EVP_PKEY_print_public_fp</strong> (3),
<strong>EVP_PKEY_print_private_fp</strong> (3) or
<strong>EVP_PKEY_print_params_fp</strong> (3). Note that internally
these use <strong>OSSL_ENCODER_to_bio</strong> (3) and
<strong>OSSL_DECODER_from_bio</strong> (3).</p>
<p><em>Deprecated function mappings</em></p>
<p>The following functions have been deprecated in 3.0.</p>
<ul>
<li><p><strong>AES_bi_ige_encrypt()</strong> and
<strong>AES_ige_encrypt()</strong> There is no replacement for the IGE
functions. New code should not use these modes. These undocumented
functions were never integrated into the EVP layer. They implemented the
AES Infinite Garble Extension (IGE) mode and AES Bi-directional IGE
mode. These modes were never formally standardised and usage of these
functions is believed to be very small. In particular
<strong>AES_bi_ige_encrypt()</strong> has a known bug. It accepts 2 AES
keys, but only one is ever used. The security implications are believed
to be minimal, but this issue was never fixed for backwards
compatibility reasons.</p></li>
<li><p><strong>AES_encrypt()</strong>, <strong>AES_decrypt()</strong>,
<strong>AES_set_encrypt_key()</strong>,
<strong>AES_set_decrypt_key()</strong>,
<strong>AES_cbc_encrypt()</strong>,
<strong>AES_cfb128_encrypt()</strong>,
<strong>AES_cfb1_encrypt()</strong>,
<strong>AES_cfb8_encrypt()</strong>, <strong>AES_ecb_encrypt()</strong>,
<strong>AES_ofb128_encrypt()</strong></p></li>
<li><p><strong>AES_unwrap_key()</strong>,
<strong>AES_wrap_key()</strong> See Deprecated low-level encryption
functions</p></li>
<li><p><strong>AES_options()</strong> There is no replacement. It
returned a string indicating if the AES code was unrolled.</p></li>
<li><p><strong>ASN1_digest()</strong>, <strong>ASN1_sign()</strong>,
<strong>ASN1_verify()</strong> There are no replacements. These old
functions are not used, and could be disabled with the macro NO_ASN1_OLD
since OpenSSL 0.9.7.</p></li>
<li><p><strong>ASN1_STRING_length_set()</strong> Use
<strong>ASN1_STRING_set</strong> (3) or
<strong>ASN1_STRING_set0</strong> (3) instead. This was a potentially
unsafe function that could change the bounds of a previously passed in
pointer.</p></li>
<li><p><strong>BF_encrypt()</strong>, <strong>BF_decrypt()</strong>,
<strong>BF_set_key()</strong>, <strong>BF_cbc_encrypt()</strong>,
<strong>BF_cfb64_encrypt()</strong>, <strong>BF_ecb_encrypt()</strong>,
<strong>BF_ofb64_encrypt()</strong> See Deprecated low-level encryption
functions. The Blowfish algorithm has been moved to the Legacy
Provider.</p></li>
<li><p><strong>BF_options()</strong> There is no replacement. This
option returned a constant string.</p></li>
<li><p><strong>BIO_get_callback()</strong>,
<strong>BIO_set_callback()</strong>,
<strong>BIO_debug_callback()</strong> Use the respective non-deprecated
<strong>_ex()</strong> functions.</p></li>
<li><p><strong>BN_is_prime_ex()</strong>,
<strong>BN_is_prime_fasttest_ex()</strong> Use
<strong>BN_check_prime</strong> (3) which avoids possible misuse and
always uses at least 64 rounds of the Miller-Rabin primality
test.</p></li>
<li><p><strong>BN_pseudo_rand()</strong>,
<strong>BN_pseudo_rand_range()</strong> Use <strong>BN_rand</strong> (3)
and <strong>BN_rand_range</strong> (3).</p></li>
<li><p><strong>BN_X931_derive_prime_ex()</strong>,
<strong>BN_X931_generate_prime_ex()</strong>,
<strong>BN_X931_generate_Xpq()</strong> There are no replacements for
these low-level functions. They were used internally by
<strong>RSA_X931_derive_ex()</strong> and
<strong>RSA_X931_generate_key_ex()</strong> which are also deprecated.
Use <strong>EVP_PKEY_keygen</strong> (3) instead.</p></li>
<li><p><strong>Camellia_encrypt()</strong>,
<strong>Camellia_decrypt()</strong>,
<strong>Camellia_set_key()</strong>,
<strong>Camellia_cbc_encrypt()</strong>,
<strong>Camellia_cfb128_encrypt()</strong>,
<strong>Camellia_cfb1_encrypt()</strong>,
<strong>Camellia_cfb8_encrypt()</strong>,
<strong>Camellia_ctr128_encrypt()</strong>,
<strong>Camellia_ecb_encrypt()</strong>,
<strong>Camellia_ofb128_encrypt()</strong> See Deprecated low-level
encryption functions.</p></li>
<li><p><strong>CAST_encrypt()</strong>, <strong>CAST_decrypt()</strong>,
<strong>CAST_set_key()</strong>, <strong>CAST_cbc_encrypt()</strong>,
<strong>CAST_cfb64_encrypt()</strong>,
<strong>CAST_ecb_encrypt()</strong>,
<strong>CAST_ofb64_encrypt()</strong> See Deprecated low-level
encryption functions. The CAST algorithm has been moved to the Legacy
Provider.</p></li>
<li><p><strong>CMAC_CTX_new()</strong>,
<strong>CMAC_CTX_cleanup()</strong>, <strong>CMAC_CTX_copy()</strong>,
<strong>CMAC_CTX_free()</strong>,
<strong>CMAC_CTX_get0_cipher_ctx()</strong> See Deprecated low-level MAC
functions.</p></li>
<li><p><strong>CMAC_Init()</strong>, <strong>CMAC_Update()</strong>,
<strong>CMAC_Final()</strong>, <strong>CMAC_resume()</strong> See
Deprecated low-level MAC functions.</p></li>
<li><p><strong>CRYPTO_mem_ctrl()</strong>,
<strong>CRYPTO_mem_debug_free()</strong>,
<strong>CRYPTO_mem_debug_malloc()</strong>,
<strong>CRYPTO_mem_debug_pop()</strong>,
<strong>CRYPTO_mem_debug_push()</strong>,
<strong>CRYPTO_mem_debug_realloc()</strong>,
<strong>CRYPTO_mem_leaks()</strong>,
<strong>CRYPTO_mem_leaks_cb()</strong>,
<strong>CRYPTO_mem_leaks_fp()</strong>,
<strong>CRYPTO_set_mem_debug()</strong> Memory-leak checking has been
deprecated in favor of more modern development tools, such as compiler
memory and leak sanitizers or Valgrind.</p></li>
<li><p><strong>CRYPTO_cts128_encrypt_block()</strong>,
<strong>CRYPTO_cts128_encrypt()</strong>,
<strong>CRYPTO_cts128_decrypt_block()</strong>,
<strong>CRYPTO_cts128_decrypt()</strong>,
<strong>CRYPTO_nistcts128_encrypt_block()</strong>,
<strong>CRYPTO_nistcts128_encrypt()</strong>,
<strong>CRYPTO_nistcts128_decrypt_block()</strong>,
<strong>CRYPTO_nistcts128_decrypt()</strong> Use the higher level
functions <strong>EVP_CipherInit_ex2()</strong>,
<strong>EVP_CipherUpdate()</strong> and
<strong>EVP_CipherFinal_ex()</strong> instead. See the cts_mode
parameter in Gettable and Settable EVP_CIPHER_CTX parameters in
<strong>EVP_EncryptInit</strong> (3). See EXAMPLES in
<strong>EVP_EncryptInit</strong> (3) for a AES-256-CBC-CTS
example.</p></li>
<li><p><strong>d2i_DHparams()</strong>,
<strong>d2i_DHxparams()</strong>, <strong>d2i_DSAparams()</strong>,
<strong>d2i_DSAPrivateKey()</strong>,
<strong>d2i_DSAPrivateKey_bio()</strong>,
<strong>d2i_DSAPrivateKey_fp()</strong>,
<strong>d2i_DSA_PUBKEY()</strong>,
<strong>d2i_DSA_PUBKEY_bio()</strong>,
<strong>d2i_DSA_PUBKEY_fp()</strong>,
<strong>d2i_DSAPublicKey()</strong>,
<strong>d2i_ECParameters()</strong>,
<strong>d2i_ECPrivateKey()</strong>,
<strong>d2i_ECPrivateKey_bio()</strong>,
<strong>d2i_ECPrivateKey_fp()</strong>,
<strong>d2i_EC_PUBKEY()</strong>, <strong>d2i_EC_PUBKEY_bio()</strong>,
<strong>d2i_EC_PUBKEY_fp()</strong>, <strong>o2i_ECPublicKey()</strong>,
<strong>d2i_RSAPrivateKey()</strong>,
<strong>d2i_RSAPrivateKey_bio()</strong>,
<strong>d2i_RSAPrivateKey_fp()</strong>,
<strong>d2i_RSA_PUBKEY()</strong>,
<strong>d2i_RSA_PUBKEY_bio()</strong>,
<strong>d2i_RSA_PUBKEY_fp()</strong>,
<strong>d2i_RSAPublicKey()</strong>,
<strong>d2i_RSAPublicKey_bio()</strong>,
<strong>d2i_RSAPublicKey_fp()</strong> See Deprecated i2d and d2i
functions for low-level key types</p></li>
<li><p><strong>DES_crypt()</strong>, <strong>DES_fcrypt()</strong>,
<strong>DES_encrypt1()</strong>, <strong>DES_encrypt2()</strong>,
<strong>DES_encrypt3()</strong>, <strong>DES_decrypt3()</strong>,
<strong>DES_ede3_cbc_encrypt()</strong>,
<strong>DES_ede3_cfb64_encrypt()</strong>,
<strong>DES_ede3_cfb_encrypt()</strong>,<strong>DES_ede3_ofb64_encrypt()</strong>,
<strong>DES_ecb_encrypt()</strong>, <strong>DES_ecb3_encrypt()</strong>,
<strong>DES_ofb64_encrypt()</strong>,
<strong>DES_ofb_encrypt()</strong>, DES_cfb64_encrypt
<strong>DES_cfb_encrypt()</strong>, <strong>DES_cbc_encrypt()</strong>,
<strong>DES_ncbc_encrypt()</strong>,
<strong>DES_pcbc_encrypt()</strong>,
<strong>DES_xcbc_encrypt()</strong>, <strong>DES_cbc_cksum()</strong>,
<strong>DES_quad_cksum()</strong>,
<strong>DES_check_key_parity()</strong>,
<strong>DES_is_weak_key()</strong>, <strong>DES_key_sched()</strong>,
<strong>DES_options()</strong>, <strong>DES_random_key()</strong>,
<strong>DES_set_key()</strong>, <strong>DES_set_key_checked()</strong>,
<strong>DES_set_key_unchecked()</strong>,
<strong>DES_set_odd_parity()</strong>,
<strong>DES_string_to_2keys()</strong>,
<strong>DES_string_to_key()</strong> See Deprecated low-level encryption
functions. Algorithms for DESX-CBC, DES-ECB, DES-CBC, DES-OFB, DES-CFB,
DES-CFB1 and DES-CFB8 have been moved to the Legacy Provider.</p></li>
<li><p><strong>DH_bits()</strong>, <strong>DH_security_bits()</strong>,
<strong>DH_size()</strong> Use <strong>EVP_PKEY_get_bits</strong> (3),
<strong>EVP_PKEY_get_security_bits</strong> (3) and
<strong>EVP_PKEY_get_size</strong> (3).</p></li>
<li><p><strong>DH_check()</strong>, <strong>DH_check_ex()</strong>,
<strong>DH_check_params()</strong>,
<strong>DH_check_params_ex()</strong>,
<strong>DH_check_pub_key()</strong>,
<strong>DH_check_pub_key_ex()</strong> See Deprecated low-level
validation functions</p></li>
<li><p><strong>DH_clear_flags()</strong>,
<strong>DH_test_flags()</strong>, <strong>DH_set_flags()</strong> The
<strong>DH_FLAG_CACHE_MONT_P</strong> flag has been deprecated without
replacement. The <strong>DH_FLAG_TYPE_DH</strong> and
<strong>DH_FLAG_TYPE_DHX</strong> have been deprecated. Use
<strong>EVP_PKEY_is_a()</strong> to determine the type of a key. There
is no replacement for setting these flags.</p></li>
<li><p><strong>DH_compute_key()</strong>
<strong>DH_compute_key_padded()</strong> See Deprecated low-level key
exchange functions.</p></li>
<li><p><strong>DH_new()</strong>, <strong>DH_new_by_nid()</strong>,
<strong>DH_free()</strong>, <strong>DH_up_ref()</strong> See Deprecated
low-level object creation</p></li>
<li><p><strong>DH_generate_key()</strong>,
<strong>DH_generate_parameters_ex()</strong> See Deprecated low-level
key generation functions.</p></li>
<li><p><strong>DH_get0_pqg()</strong>, <strong>DH_get0_p()</strong>,
<strong>DH_get0_q()</strong>, <strong>DH_get0_g()</strong>,
<strong>DH_get0_key()</strong>, <strong>DH_get0_priv_key()</strong>,
<strong>DH_get0_pub_key()</strong>, <strong>DH_get_length()</strong>,
<strong>DH_get_nid()</strong> See Deprecated low-level key parameter
getters</p></li>
<li><p><strong>DH_get_1024_160()</strong>,
<strong>DH_get_2048_224()</strong>, <strong>DH_get_2048_256()</strong>
Applications should instead set the
<strong>OSSL_PKEY_PARAM_GROUP_NAME</strong> as specified in DH
parameters in <strong>EVP_PKEY-DH</strong> (7)) to one of dh_1024_160,
dh_2048_224 or dh_2048_256 when generating a DH key.</p></li>
<li><p><strong>DH_KDF_X9_42()</strong> Applications should use
<strong>EVP_PKEY_CTX_set_dh_kdf_type</strong> (3) instead.</p></li>
<li><p><strong>DH_get_default_method()</strong>,
<strong>DH_get0_engine()</strong>, DH_meth_*(),
<strong>DH_new_method()</strong>, <strong>DH_OpenSSL()</strong>,
<strong>DH_get_ex_data()</strong>,
<strong>DH_set_default_method()</strong>,
<strong>DH_set_method()</strong>, <strong>DH_set_ex_data()</strong> See
Providers are a replacement for engines and low-level method
overrides</p></li>
<li><p><strong>DHparams_print()</strong>,
<strong>DHparams_print_fp()</strong> See Deprecated low-level key
printing functions</p></li>
<li><p><strong>DH_set0_key()</strong>, <strong>DH_set0_pqg()</strong>,
<strong>DH_set_length()</strong> See Deprecated low-level key parameter
setters</p></li>
<li><p><strong>DSA_bits()</strong>,
<strong>DSA_security_bits()</strong>, <strong>DSA_size()</strong> Use
<strong>EVP_PKEY_get_bits</strong> (3),
<strong>EVP_PKEY_get_security_bits</strong> (3) and
<strong>EVP_PKEY_get_size</strong> (3).</p></li>
<li><p><strong>DHparams_dup()</strong>, <strong>DSA_dup_DH()</strong>
There is no direct replacement. Applications may use
<strong>EVP_PKEY_copy_parameters</strong> (3) and
<strong>EVP_PKEY_dup</strong> (3) instead.</p></li>
<li><p><strong>DSA_generate_key()</strong>,
<strong>DSA_generate_parameters_ex()</strong> See Deprecated low-level
key generation functions.</p></li>
<li><p><strong>DSA_get0_engine()</strong>,
<strong>DSA_get_default_method()</strong>,
<strong>DSA_get_ex_data()</strong>, <strong>DSA_get_method()</strong>,
DSA_meth_*(), <strong>DSA_new_method()</strong>,
<strong>DSA_OpenSSL()</strong>,
<strong>DSA_set_default_method()</strong>,
<strong>DSA_set_ex_data()</strong>, <strong>DSA_set_method()</strong>
See Providers are a replacement for engines and low-level method
overrides.</p></li>
<li><p><strong>DSA_get0_p()</strong>, <strong>DSA_get0_q()</strong>,
<strong>DSA_get0_g()</strong>, <strong>DSA_get0_pqg()</strong>,
<strong>DSA_get0_key()</strong>, <strong>DSA_get0_priv_key()</strong>,
<strong>DSA_get0_pub_key()</strong> See Deprecated low-level key
parameter getters.</p></li>
<li><p><strong>DSA_new()</strong>, <strong>DSA_free()</strong>,
<strong>DSA_up_ref()</strong> See Deprecated low-level object
creation</p></li>
<li><p><strong>DSAparams_dup()</strong> There is no direct replacement.
Applications may use <strong>EVP_PKEY_copy_parameters</strong> (3) and
<strong>EVP_PKEY_dup</strong> (3) instead.</p></li>
<li><p><strong>DSAparams_print()</strong>,
<strong>DSAparams_print_fp()</strong>, <strong>DSA_print()</strong>,
<strong>DSA_print_fp()</strong> See Deprecated low-level key printing
functions</p></li>
<li><p><strong>DSA_set0_key()</strong>, <strong>DSA_set0_pqg()</strong>
See Deprecated low-level key parameter setters</p></li>
<li><p><strong>DSA_set_flags()</strong>,
<strong>DSA_clear_flags()</strong>, <strong>DSA_test_flags()</strong>
The <strong>DSA_FLAG_CACHE_MONT_P</strong> flag has been deprecated
without replacement.</p></li>
<li><p><strong>DSA_sign()</strong>, <strong>DSA_do_sign()</strong>,
<strong>DSA_sign_setup()</strong>, <strong>DSA_verify()</strong>,
<strong>DSA_do_verify()</strong> See Deprecated low-level signing
functions.</p></li>
<li><p><strong>ECDH_compute_key()</strong> See Deprecated low-level key
exchange functions.</p></li>
<li><p><strong>ECDH_KDF_X9_62()</strong> Applications may either set
this using the helper function
<strong>EVP_PKEY_CTX_set_ecdh_kdf_type</strong> (3) or by setting an
<strong>OSSL_PARAM</strong> (3) using the kdf-type as shown in EXAMPLES
in <strong>EVP_KEYEXCH-ECDH</strong> (7)</p></li>
<li><p><strong>ECDSA_sign()</strong>, <strong>ECDSA_sign_ex()</strong>,
<strong>ECDSA_sign_setup()</strong>, <strong>ECDSA_do_sign()</strong>,
<strong>ECDSA_do_sign_ex()</strong>, <strong>ECDSA_verify()</strong>,
<strong>ECDSA_do_verify()</strong> See Deprecated low-level signing
functions.</p></li>
<li><p><strong>ECDSA_size()</strong> Applications should use
<strong>EVP_PKEY_get_size</strong> (3).</p></li>
<li><p><strong>EC_GF2m_simple_method()</strong>,
<strong>EC_GFp_mont_method()</strong>,
<strong>EC_GFp_nist_method()</strong>,
<strong>EC_GFp_nistp224_method()</strong>,
<strong>EC_GFp_nistp256_method()</strong>,
<strong>EC_GFp_nistp521_method()</strong>,
<strong>EC_GFp_simple_method()</strong> There are no replacements for
these functions. Applications should rely on the library automatically
assigning a suitable method internally when an EC_GROUP is
constructed.</p></li>
<li><p><strong>EC_GROUP_clear_free()</strong> Use
<strong>EC_GROUP_free</strong> (3) instead.</p></li>
<li><p><strong>EC_GROUP_get_curve_GF2m()</strong>,
<strong>EC_GROUP_get_curve_GFp()</strong>,
<strong>EC_GROUP_set_curve_GF2m()</strong>,
<strong>EC_GROUP_set_curve_GFp()</strong> Applications should use
<strong>EC_GROUP_get_curve</strong> (3) and
<strong>EC_GROUP_set_curve</strong> (3).</p></li>
<li><p><strong>EC_GROUP_have_precompute_mult()</strong>,
<strong>EC_GROUP_precompute_mult()</strong>,
<strong>EC_KEY_precompute_mult()</strong> These functions are not widely
used. Applications should instead switch to named curves which OpenSSL
has hardcoded lookup tables for.</p></li>
<li><p><strong>EC_GROUP_new()</strong>,
<strong>EC_GROUP_method_of()</strong>,
<strong>EC_POINT_method_of()</strong> EC_METHOD is now an internal-only
concept and a suitable EC_METHOD is assigned internally without
application intervention. Users of <strong>EC_GROUP_new()</strong>
should switch to a different suitable constructor.</p></li>
<li><p><strong>EC_KEY_can_sign()</strong> Applications should use
<strong>EVP_PKEY_can_sign</strong> (3) instead.</p></li>
<li><p><strong>EC_KEY_check_key()</strong> See Deprecated low-level
validation functions</p></li>
<li><p><strong>EC_KEY_set_flags()</strong>,
<strong>EC_KEY_get_flags()</strong>,
<strong>EC_KEY_clear_flags()</strong> See Common EC parameters in
<strong>EVP_PKEY-EC</strong> (7) which handles flags as separate
parameters for
<strong>OSSL_PKEY_PARAM_EC_POINT_CONVERSION_FORMAT</strong>,
<strong>OSSL_PKEY_PARAM_EC_GROUP_CHECK_TYPE</strong>,
<strong>OSSL_PKEY_PARAM_EC_ENCODING</strong>,
<strong>OSSL_PKEY_PARAM_USE_COFACTOR_ECDH</strong> and
<strong>OSSL_PKEY_PARAM_EC_INCLUDE_PUBLIC</strong>. See also EXAMPLES in
<strong>EVP_PKEY-EC</strong> (7)</p></li>
<li><p><strong>EC_KEY_dup()</strong>, <strong>EC_KEY_copy()</strong>
There is no direct replacement. Applications may use
<strong>EVP_PKEY_copy_parameters</strong> (3) and
<strong>EVP_PKEY_dup</strong> (3) instead.</p></li>
<li><p><strong>EC_KEY_decoded_from_explicit_params()</strong> There is
no replacement.</p></li>
<li><p><strong>EC_KEY_generate_key()</strong> See Deprecated low-level
key generation functions.</p></li>
<li><p><strong>EC_KEY_get0_group()</strong>,
<strong>EC_KEY_get0_private_key()</strong>,
<strong>EC_KEY_get0_public_key()</strong>,
<strong>EC_KEY_get_conv_form()</strong>,
<strong>EC_KEY_get_enc_flags()</strong> See Deprecated low-level key
parameter getters.</p></li>
<li><p><strong>EC_KEY_get0_engine()</strong>,
<strong>EC_KEY_get_default_method()</strong>,
<strong>EC_KEY_get_method()</strong>,
<strong>EC_KEY_new_method()</strong>,
<strong>EC_KEY_get_ex_data()</strong>,
<strong>EC_KEY_OpenSSL()</strong>,
<strong>EC_KEY_set_ex_data()</strong>,
<strong>EC_KEY_set_default_method()</strong>, EC_KEY_METHOD_*(),
<strong>EC_KEY_set_method()</strong> See Providers are a replacement for
engines and low-level method overrides</p></li>
<li><p><strong>EC_METHOD_get_field_type()</strong> Use
<strong>EC_GROUP_get_field_type</strong> (3) instead. See Providers are
a replacement for engines and low-level method overrides</p></li>
<li><p><strong>EC_KEY_key2buf()</strong>,
<strong>EC_KEY_oct2key()</strong>, <strong>EC_KEY_oct2priv()</strong>,
<strong>EC_KEY_priv2buf()</strong>, <strong>EC_KEY_priv2oct()</strong>
There are no replacements for these.</p></li>
<li><p><strong>EC_KEY_new()</strong>,
<strong>EC_KEY_new_by_curve_name()</strong>,
<strong>EC_KEY_free()</strong>, <strong>EC_KEY_up_ref()</strong> See
Deprecated low-level object creation</p></li>
<li><p><strong>EC_KEY_print()</strong>,
<strong>EC_KEY_print_fp()</strong> See Deprecated low-level key printing
functions</p></li>
<li><p><strong>EC_KEY_set_asn1_flag()</strong>,
<strong>EC_KEY_set_conv_form()</strong>,
<strong>EC_KEY_set_enc_flags()</strong> See Deprecated low-level key
parameter setters.</p></li>
<li><p><strong>EC_KEY_set_group()</strong>,
<strong>EC_KEY_set_private_key()</strong>,
<strong>EC_KEY_set_public_key()</strong>,
<strong>EC_KEY_set_public_key_affine_coordinates()</strong> See
Deprecated low-level key parameter setters.</p></li>
<li><p><strong>ECParameters_print()</strong>,
<strong>ECParameters_print_fp()</strong>,
<strong>ECPKParameters_print()</strong>,
<strong>ECPKParameters_print_fp()</strong> See Deprecated low-level key
printing functions</p></li>
<li><p><strong>EC_POINT_bn2point()</strong>,
<strong>EC_POINT_point2bn()</strong> These functions were not
particularly useful, since EC point serialization formats are not
individual big-endian integers.</p></li>
<li><p><strong>EC_POINT_get_affine_coordinates_GF2m()</strong>,
<strong>EC_POINT_get_affine_coordinates_GFp()</strong>,
<strong>EC_POINT_set_affine_coordinates_GF2m()</strong>,
<strong>EC_POINT_set_affine_coordinates_GFp()</strong> Applications
should use <strong>EC_POINT_get_affine_coordinates</strong> (3) and
<strong>EC_POINT_set_affine_coordinates</strong> (3) instead.</p></li>
<li><p><strong>EC_POINT_get_Jprojective_coordinates_GFp()</strong>,
<strong>EC_POINT_set_Jprojective_coordinates_GFp()</strong> These
functions are not widely used. Applications should instead use the
<strong>EC_POINT_set_affine_coordinates</strong> (3) and
<strong>EC_POINT_get_affine_coordinates</strong> (3) functions.</p></li>
<li><p><strong>EC_POINT_make_affine()</strong>,
<strong>EC_POINTs_make_affine()</strong> There is no replacement. These
functions were not widely used, and OpenSSL automatically performs this
conversion when needed.</p></li>
<li><p><strong>EC_POINT_set_compressed_coordinates_GF2m()</strong>,
<strong>EC_POINT_set_compressed_coordinates_GFp()</strong> Applications
should use <strong>EC_POINT_set_compressed_coordinates</strong> (3)
instead.</p></li>
<li><p><strong>EC_POINTs_mul()</strong> This function is not widely
used. Applications should instead use the
<strong>EC_POINT_mul</strong> (3) function.</p></li>
<li><p><strong>ENGINE_*()</strong> All engine functions are deprecated.
An engine should be rewritten as a provider. See Providers are a
replacement for engines and low-level method overrides.</p></li>
<li><p><strong>ERR_load_*()</strong>,
<strong>ERR_func_error_string()</strong>,
<strong>ERR_get_error_line()</strong>,
<strong>ERR_get_error_line_data()</strong>,
<strong>ERR_get_state()</strong> OpenSSL now loads error strings
automatically so these functions are not needed.</p></li>
<li><p><strong>ERR_peek_error_line_data()</strong>,
<strong>ERR_peek_last_error_line_data()</strong> The new functions are
<strong>ERR_peek_error_func</strong> (3),
<strong>ERR_peek_last_error_func</strong> (3),
<strong>ERR_peek_error_data</strong> (3),
<strong>ERR_peek_last_error_data</strong> (3),
<strong>ERR_get_error_all</strong> (3),
<strong>ERR_peek_error_all</strong> (3) and
<strong>ERR_peek_last_error_all</strong> (3). Applications should use
<strong>ERR_get_error_all</strong> (3), or pick information with
ERR_peek functions and finish off with getting the error code by using
<strong>ERR_get_error</strong> (3).</p></li>
<li><p><strong>EVP_CIPHER_CTX_iv()</strong>,
<strong>EVP_CIPHER_CTX_iv_noconst()</strong>,
<strong>EVP_CIPHER_CTX_original_iv()</strong> Applications should
instead use <strong>EVP_CIPHER_CTX_get_updated_iv</strong> (3),
<strong>EVP_CIPHER_CTX_get_updated_iv</strong> (3) and
<strong>EVP_CIPHER_CTX_get_original_iv</strong> (3) respectively. See
<strong>EVP_CIPHER_CTX_get_original_iv</strong> (3) for further
information.</p></li>
<li><p><strong>EVP_CIPHER_meth_*()</strong>,
<strong>EVP_MD_CTX_set_update_fn()</strong>,
<strong>EVP_MD_CTX_update_fn()</strong>,
<strong>EVP_MD_meth_*()</strong> See Providers are a replacement for
engines and low-level method overrides.</p></li>
<li><p><strong>EVP_PKEY_CTRL_PKCS7_ENCRYPT()</strong>,
<strong>EVP_PKEY_CTRL_PKCS7_DECRYPT()</strong>,
<strong>EVP_PKEY_CTRL_PKCS7_SIGN()</strong>,
<strong>EVP_PKEY_CTRL_CMS_ENCRYPT()</strong>,
<strong>EVP_PKEY_CTRL_CMS_DECRYPT()</strong>, and
<strong>EVP_PKEY_CTRL_CMS_SIGN()</strong> These control operations are
not invoked by the OpenSSL library anymore and are replaced by direct
checks of the key operation against the key type when the operation is
initialized.</p></li>
<li><p><strong>EVP_PKEY_CTX_get0_dh_kdf_ukm()</strong>,
<strong>EVP_PKEY_CTX_get0_ecdh_kdf_ukm()</strong> See the kdf-ukm item
in DH key exchange parameters in <strong>EVP_KEYEXCH-DH</strong> (7) and
ECDH Key Exchange parameters in <strong>EVP_KEYEXCH-ECDH</strong> (7).
These functions are obsolete and should not be required.</p></li>
<li><p><strong>EVP_PKEY_CTX_set_rsa_keygen_pubexp()</strong>
Applications should use
<strong>EVP_PKEY_CTX_set1_rsa_keygen_pubexp</strong> (3)
instead.</p></li>
<li><p><strong>EVP_PKEY_cmp()</strong>,
<strong>EVP_PKEY_cmp_parameters()</strong> Applications should use
<strong>EVP_PKEY_eq</strong> (3) and
<strong>EVP_PKEY_parameters_eq</strong> (3) instead. See
<strong>EVP_PKEY_copy_parameters</strong> (3) for further
details.</p></li>
<li><p><strong>EVP_PKEY_encrypt_old()</strong>,
<strong>EVP_PKEY_decrypt_old()</strong>, Applications should use
<strong>EVP_PKEY_encrypt_init</strong> (3) and
<strong>EVP_PKEY_encrypt</strong> (3) or
<strong>EVP_PKEY_decrypt_init</strong> (3) and
<strong>EVP_PKEY_decrypt</strong> (3) instead.</p></li>
<li><p><strong>EVP_PKEY_get0()</strong> This function returns NULL if
the key comes from a provider.</p></li>
<li><p><strong>EVP_PKEY_get0_DH()</strong>,
<strong>EVP_PKEY_get0_DSA()</strong>,
<strong>EVP_PKEY_get0_EC_KEY()</strong>,
<strong>EVP_PKEY_get0_RSA()</strong>,
<strong>EVP_PKEY_get1_DH()</strong>,
<strong>EVP_PKEY_get1_DSA()</strong>, EVP_PKEY_get1_EC_KEY and
<strong>EVP_PKEY_get1_RSA()</strong>,
<strong>EVP_PKEY_get0_hmac()</strong>,
<strong>EVP_PKEY_get0_poly1305()</strong>,
<strong>EVP_PKEY_get0_siphash()</strong> See Functions that return an
internal key should be treated as read only.</p></li>
<li><p><strong>EVP_PKEY_meth_*()</strong> See Providers are a
replacement for engines and low-level method overrides.</p></li>
<li><p><strong>EVP_PKEY_new_CMAC_key()</strong> See Deprecated low-level
MAC functions.</p></li>
<li><p><strong>EVP_PKEY_assign()</strong>,
<strong>EVP_PKEY_set1_DH()</strong>,
<strong>EVP_PKEY_set1_DSA()</strong>,
<strong>EVP_PKEY_set1_EC_KEY()</strong>,
<strong>EVP_PKEY_set1_RSA()</strong> See Deprecated low-level key object
getters and setters</p></li>
<li><p><strong>EVP_PKEY_set1_tls_encodedpoint()</strong>
<strong>EVP_PKEY_get1_tls_encodedpoint()</strong> These functions were
previously used by libssl to set or get an encoded public key into/from
an EVP_PKEY object. With OpenSSL 3.0 these are replaced by the more
generic functions <strong>EVP_PKEY_set1_encoded_public_key</strong> (3)
and <strong>EVP_PKEY_get1_encoded_public_key</strong> (3). The old
versions have been converted to deprecated macros that just call the new
functions.</p></li>
<li><p><strong>EVP_PKEY_set1_engine()</strong>,
<strong>EVP_PKEY_get0_engine()</strong> See Providers are a replacement
for engines and low-level method overrides.</p></li>
<li><p><strong>EVP_PKEY_set_alias_type()</strong> This function has been
removed. There is no replacement. See
<strong>EVP_PKEY_set_alias_type()</strong> method has been
removed</p></li>
<li><p><strong>HMAC_Init_ex()</strong>, <strong>HMAC_Update()</strong>,
<strong>HMAC_Final()</strong>, <strong>HMAC_size()</strong> See
Deprecated low-level MAC functions.</p></li>
<li><p><strong>HMAC_CTX_new()</strong>,
<strong>HMAC_CTX_free()</strong>, <strong>HMAC_CTX_copy()</strong>,
<strong>HMAC_CTX_reset()</strong>,
<strong>HMAC_CTX_set_flags()</strong>,
<strong>HMAC_CTX_get_md()</strong> See Deprecated low-level MAC
functions.</p></li>
<li><p><strong>i2d_DHparams()</strong>, <strong>i2d_DHxparams()</strong>
See Deprecated low-level key reading and writing functions and Migration
in <strong>d2i_RSAPrivateKey</strong> (3)</p></li>
<li><p><strong>i2d_DSAparams()</strong>,
<strong>i2d_DSAPrivateKey()</strong>,
<strong>i2d_DSAPrivateKey_bio()</strong>,
<strong>i2d_DSAPrivateKey_fp()</strong>,
<strong>i2d_DSA_PUBKEY()</strong>,
<strong>i2d_DSA_PUBKEY_bio()</strong>,
<strong>i2d_DSA_PUBKEY_fp()</strong>,
<strong>i2d_DSAPublicKey()</strong> See Deprecated low-level key reading
and writing functions and Migration in
<strong>d2i_RSAPrivateKey</strong> (3)</p></li>
<li><p><strong>i2d_ECParameters()</strong>,
<strong>i2d_ECPrivateKey()</strong>,
<strong>i2d_ECPrivateKey_bio()</strong>,
<strong>i2d_ECPrivateKey_fp()</strong>,
<strong>i2d_EC_PUBKEY()</strong>, <strong>i2d_EC_PUBKEY_bio()</strong>,
<strong>i2d_EC_PUBKEY_fp()</strong>, <strong>i2o_ECPublicKey()</strong>
See Deprecated low-level key reading and writing functions and Migration
in <strong>d2i_RSAPrivateKey</strong> (3)</p></li>
<li><p><strong>i2d_RSAPrivateKey()</strong>,
<strong>i2d_RSAPrivateKey_bio()</strong>,
<strong>i2d_RSAPrivateKey_fp()</strong>,
<strong>i2d_RSA_PUBKEY()</strong>,
<strong>i2d_RSA_PUBKEY_bio()</strong>,
<strong>i2d_RSA_PUBKEY_fp()</strong>,
<strong>i2d_RSAPublicKey()</strong>,
<strong>i2d_RSAPublicKey_bio()</strong>,
<strong>i2d_RSAPublicKey_fp()</strong> See Deprecated low-level key
reading and writing functions and Migration in
<strong>d2i_RSAPrivateKey</strong> (3)</p></li>
<li><p><strong>IDEA_encrypt()</strong>,
<strong>IDEA_set_decrypt_key()</strong>,
<strong>IDEA_set_encrypt_key()</strong>,
<strong>IDEA_cbc_encrypt()</strong>,
<strong>IDEA_cfb64_encrypt()</strong>,
<strong>IDEA_ecb_encrypt()</strong>,
<strong>IDEA_ofb64_encrypt()</strong> See Deprecated low-level
encryption functions. IDEA has been moved to the Legacy
Provider.</p></li>
<li><p><strong>IDEA_options()</strong> There is no replacement. This
function returned a constant string.</p></li>
<li><p><strong>MD2()</strong>, <strong>MD2_Init()</strong>,
<strong>MD2_Update()</strong>, <strong>MD2_Final()</strong> See
Deprecated low-level encryption functions. MD2 has been moved to the
Legacy Provider.</p></li>
<li><p><strong>MD2_options()</strong> There is no replacement. This
function returned a constant string.</p></li>
<li><p><strong>MD4()</strong>, <strong>MD4_Init()</strong>,
<strong>MD4_Update()</strong>, <strong>MD4_Final()</strong>,
<strong>MD4_Transform()</strong> See Deprecated low-level encryption
functions. MD4 has been moved to the Legacy Provider.</p></li>
<li><p><strong>MDC2()</strong>, <strong>MDC2_Init()</strong>,
<strong>MDC2_Update()</strong>, <strong>MDC2_Final()</strong> See
Deprecated low-level encryption functions. MDC2 has been moved to the
Legacy Provider.</p></li>
<li><p><strong>MD5()</strong>, <strong>MD5_Init()</strong>,
<strong>MD5_Update()</strong>, <strong>MD5_Final()</strong>,
<strong>MD5_Transform()</strong> See Deprecated low-level encryption
functions.</p></li>
<li><p><strong>NCONF_WIN32()</strong> This undocumented function has no
replacement. See HISTORY in <strong>config</strong> (5) for more
details.</p></li>
<li><p><strong>OCSP_parse_url()</strong> Use
<strong>OSSL_HTTP_parse_url</strong> (3) instead.</p></li>
<li><p><strong>OCSP_REQ_CTX</strong> type and
<strong>OCSP_REQ_CTX_*()</strong> functions These methods were used to
collect all necessary data to form a HTTP request, and to perform the
HTTP transfer with that request. With OpenSSL 3.0, the type is
<strong>OSSL_HTTP_REQ_CTX</strong>, and the deprecated functions are
replaced with <strong>OSSL_HTTP_REQ_CTX_*()</strong>. See
<strong>OSSL_HTTP_REQ_CTX</strong> (3) for additional details.</p></li>
<li><p><strong>OPENSSL_fork_child()</strong>,
<strong>OPENSSL_fork_parent()</strong>,
<strong>OPENSSL_fork_prepare()</strong> There is no replacement for
these functions. These pthread fork support methods were unused by
OpenSSL.</p></li>
<li><p><strong>OSSL_STORE_ctrl()</strong>,
<strong>OSSL_STORE_do_all_loaders()</strong>,
<strong>OSSL_STORE_LOADER_get0_engine()</strong>,
<strong>OSSL_STORE_LOADER_get0_scheme()</strong>,
<strong>OSSL_STORE_LOADER_new()</strong>,
<strong>OSSL_STORE_LOADER_set_attach()</strong>,
<strong>OSSL_STORE_LOADER_set_close()</strong>,
<strong>OSSL_STORE_LOADER_set_ctrl()</strong>,
<strong>OSSL_STORE_LOADER_set_eof()</strong>,
<strong>OSSL_STORE_LOADER_set_error()</strong>,
<strong>OSSL_STORE_LOADER_set_expect()</strong>,
<strong>OSSL_STORE_LOADER_set_find()</strong>,
<strong>OSSL_STORE_LOADER_set_load()</strong>,
<strong>OSSL_STORE_LOADER_set_open()</strong>,
<strong>OSSL_STORE_LOADER_set_open_ex()</strong>,
<strong>OSSL_STORE_register_loader()</strong>,
<strong>OSSL_STORE_unregister_loader()</strong>,
<strong>OSSL_STORE_vctrl()</strong> These functions helped applications
and engines create loaders for schemes they supported. These are all
deprecated and discouraged in favour of provider implementations, see
<strong>provider-storemgmt</strong> (7).</p></li>
<li><p><strong>PEM_read_DHparams()</strong>,
<strong>PEM_read_bio_DHparams()</strong>,
<strong>PEM_read_DSAparams()</strong>,
<strong>PEM_read_bio_DSAparams()</strong>,
<strong>PEM_read_DSAPrivateKey()</strong>,
<strong>PEM_read_DSA_PUBKEY()</strong>, PEM_read_bio_DSAPrivateKey and
<strong>PEM_read_bio_DSA_PUBKEY()</strong>,
<strong>PEM_read_ECPKParameters()</strong>,
<strong>PEM_read_ECPrivateKey()</strong>,
<strong>PEM_read_EC_PUBKEY()</strong>,
<strong>PEM_read_bio_ECPKParameters()</strong>,
<strong>PEM_read_bio_ECPrivateKey()</strong>,
<strong>PEM_read_bio_EC_PUBKEY()</strong>,
<strong>PEM_read_RSAPrivateKey()</strong>,
<strong>PEM_read_RSA_PUBKEY()</strong>,
<strong>PEM_read_RSAPublicKey()</strong>,
<strong>PEM_read_bio_RSAPrivateKey()</strong>,
<strong>PEM_read_bio_RSA_PUBKEY()</strong>,
<strong>PEM_read_bio_RSAPublicKey()</strong>,
<strong>PEM_write_bio_DHparams()</strong>,
<strong>PEM_write_bio_DHxparams()</strong>,
<strong>PEM_write_DHparams()</strong>,
<strong>PEM_write_DHxparams()</strong>,
<strong>PEM_write_DSAparams()</strong>,
<strong>PEM_write_DSAPrivateKey()</strong>,
<strong>PEM_write_DSA_PUBKEY()</strong>,
<strong>PEM_write_bio_DSAparams()</strong>,
<strong>PEM_write_bio_DSAPrivateKey()</strong>,
<strong>PEM_write_bio_DSA_PUBKEY()</strong>,
<strong>PEM_write_ECPKParameters()</strong>,
<strong>PEM_write_ECPrivateKey()</strong>,
<strong>PEM_write_EC_PUBKEY()</strong>,
<strong>PEM_write_bio_ECPKParameters()</strong>,
<strong>PEM_write_bio_ECPrivateKey()</strong>,
<strong>PEM_write_bio_EC_PUBKEY()</strong>,
<strong>PEM_write_RSAPrivateKey()</strong>,
<strong>PEM_write_RSA_PUBKEY()</strong>,
<strong>PEM_write_RSAPublicKey()</strong>,
<strong>PEM_write_bio_RSAPrivateKey()</strong>,
<strong>PEM_write_bio_RSA_PUBKEY()</strong>,
<strong>PEM_write_bio_RSAPublicKey()</strong>, See Deprecated low-level
key reading and writing functions</p></li>
<li><p><strong>PKCS1_MGF1()</strong> See Deprecated low-level encryption
functions.</p></li>
<li><p><strong>RAND_get_rand_method()</strong>,
<strong>RAND_set_rand_method()</strong>,
<strong>RAND_OpenSSL()</strong>, <strong>RAND_set_rand_engine()</strong>
Applications should instead use <strong>RAND_set_DRBG_type</strong> (3),
<strong>EVP_RAND</strong> (3) and <strong>EVP_RAND</strong> (7). See
<strong>RAND_set_rand_method</strong> (3) for more details.</p></li>
<li><p><strong>RC2_encrypt()</strong>, <strong>RC2_decrypt()</strong>,
<strong>RC2_set_key()</strong>, <strong>RC2_cbc_encrypt()</strong>,
<strong>RC2_cfb64_encrypt()</strong>,
<strong>RC2_ecb_encrypt()</strong>,
<strong>RC2_ofb64_encrypt()</strong>, <strong>RC4()</strong>,
<strong>RC4_set_key()</strong>, <strong>RC4_options()</strong>,
<strong>RC5_32_encrypt()</strong>, <strong>RC5_32_set_key()</strong>,
<strong>RC5_32_decrypt()</strong>,
<strong>RC5_32_cbc_encrypt()</strong>,
<strong>RC5_32_cfb64_encrypt()</strong>,
<strong>RC5_32_ecb_encrypt()</strong>,
<strong>RC5_32_ofb64_encrypt()</strong> See Deprecated low-level
encryption functions. The Algorithms RC2, RC4 and RC5 have been moved to
the Legacy Provider.</p></li>
<li><p><strong>RIPEMD160()</strong>, <strong>RIPEMD160_Init()</strong>,
<strong>RIPEMD160_Update()</strong>, <strong>RIPEMD160_Final()</strong>,
<strong>RIPEMD160_Transform()</strong> See Deprecated low-level digest
functions. The RIPE algorithm has been moved to the Legacy
Provider.</p></li>
<li><p><strong>RSA_bits()</strong>,
<strong>RSA_security_bits()</strong>, <strong>RSA_size()</strong> Use
<strong>EVP_PKEY_get_bits</strong> (3),
<strong>EVP_PKEY_get_security_bits</strong> (3) and
<strong>EVP_PKEY_get_size</strong> (3).</p></li>
<li><p><strong>RSA_check_key()</strong>,
<strong>RSA_check_key_ex()</strong> See Deprecated low-level validation
functions</p></li>
<li><p><strong>RSA_clear_flags()</strong>, <strong>RSA_flags()</strong>,
<strong>RSA_set_flags()</strong>, <strong>RSA_test_flags()</strong>,
<strong>RSA_setup_blinding()</strong>,
<strong>RSA_blinding_off()</strong>, <strong>RSA_blinding_on()</strong>
All of these RSA flags have been deprecated without replacement:
<strong>RSA_FLAG_BLINDING</strong>,
<strong>RSA_FLAG_CACHE_PRIVATE</strong>,
<strong>RSA_FLAG_CACHE_PUBLIC</strong>,
<strong>RSA_FLAG_EXT_PKEY</strong>,
<strong>RSA_FLAG_NO_BLINDING</strong>,
<strong>RSA_FLAG_THREAD_SAFE</strong>
<strong>RSA_METHOD_FLAG_NO_CHECK</strong></p></li>
<li><p><strong>RSA_generate_key_ex()</strong>,
<strong>RSA_generate_multi_prime_key()</strong> See Deprecated low-level
key generation functions.</p></li>
<li><p><strong>RSA_get0_engine()</strong> See Providers are a
replacement for engines and low-level method overrides</p></li>
<li><p><strong>RSA_get0_crt_params()</strong>,
<strong>RSA_get0_d()</strong>, <strong>RSA_get0_dmp1()</strong>,
<strong>RSA_get0_dmq1()</strong>, <strong>RSA_get0_e()</strong>,
<strong>RSA_get0_factors()</strong>, <strong>RSA_get0_iqmp()</strong>,
<strong>RSA_get0_key()</strong>,
<strong>RSA_get0_multi_prime_crt_params()</strong>,
<strong>RSA_get0_multi_prime_factors()</strong>,
<strong>RSA_get0_n()</strong>, <strong>RSA_get0_p()</strong>,
<strong>RSA_get0_pss_params()</strong>, <strong>RSA_get0_q()</strong>,
<strong>RSA_get_multi_prime_extra_count()</strong> See Deprecated
low-level key parameter getters</p></li>
<li><p><strong>RSA_new()</strong>, <strong>RSA_free()</strong>,
<strong>RSA_up_ref()</strong> See Deprecated low-level object
creation.</p></li>
<li><p><strong>RSA_get_default_method()</strong>, RSA_get_ex_data and
<strong>RSA_get_method()</strong> See Providers are a replacement for
engines and low-level method overrides.</p></li>
<li><p><strong>RSA_get_version()</strong> There is no
replacement.</p></li>
<li><p><strong>RSA_meth_*()</strong>, <strong>RSA_new_method()</strong>,
RSA_null_method and <strong>RSA_PKCS1_OpenSSL()</strong> See Providers
are a replacement for engines and low-level method overrides.</p></li>
<li><p><strong>RSA_padding_add_*()</strong>,
<strong>RSA_padding_check_*()</strong> See Deprecated low-level signing
functions and Deprecated low-level encryption functions.</p></li>
<li><p><strong>RSA_print()</strong>, <strong>RSA_print_fp()</strong> See
Deprecated low-level key printing functions</p></li>
<li><p><strong>RSA_public_encrypt()</strong>,
<strong>RSA_private_decrypt()</strong> See Deprecated low-level
encryption functions</p></li>
<li><p><strong>RSA_private_encrypt()</strong>,
<strong>RSA_public_decrypt()</strong> This is equivalent to doing sign
and verify recover operations (with a padding mode of none). See
Deprecated low-level signing functions.</p></li>
<li><p><strong>RSAPrivateKey_dup()</strong>,
<strong>RSAPublicKey_dup()</strong> There is no direct replacement.
Applications may use <strong>EVP_PKEY_dup</strong> (3).</p></li>
<li><p><strong>RSAPublicKey_it()</strong>,
<strong>RSAPrivateKey_it()</strong> See Deprecated low-level key reading
and writing functions</p></li>
<li><p><strong>RSA_set0_crt_params()</strong>,
<strong>RSA_set0_factors()</strong>, <strong>RSA_set0_key()</strong>,
<strong>RSA_set0_multi_prime_params()</strong> See Deprecated low-level
key parameter setters.</p></li>
<li><p><strong>RSA_set_default_method()</strong>,
<strong>RSA_set_method()</strong>, <strong>RSA_set_ex_data()</strong>
See Providers are a replacement for engines and low-level method
overrides</p></li>
<li><p><strong>RSA_sign()</strong>,
<strong>RSA_sign_ASN1_OCTET_STRING()</strong>,
<strong>RSA_verify()</strong>,
<strong>RSA_verify_ASN1_OCTET_STRING()</strong>,
<strong>RSA_verify_PKCS1_PSS()</strong>,
<strong>RSA_verify_PKCS1_PSS_mgf1()</strong> See Deprecated low-level
signing functions.</p></li>
<li><p><strong>RSA_X931_derive_ex()</strong>,
<strong>RSA_X931_generate_key_ex()</strong>,
<strong>RSA_X931_hash_id()</strong> There are no replacements for these
functions. X931 padding can be set using Signature Parameters in
<strong>EVP_SIGNATURE-RSA</strong> (7). See
<strong>OSSL_SIGNATURE_PARAM_PAD_MODE</strong>.</p></li>
<li><p><strong>SEED_encrypt()</strong>, <strong>SEED_decrypt()</strong>,
<strong>SEED_set_key()</strong>, <strong>SEED_cbc_encrypt()</strong>,
<strong>SEED_cfb128_encrypt()</strong>,
<strong>SEED_ecb_encrypt()</strong>,
<strong>SEED_ofb128_encrypt()</strong> See Deprecated low-level
encryption functions. The SEED algorithm has been moved to the Legacy
Provider.</p></li>
<li><p><strong>SHA1_Init()</strong>, <strong>SHA1_Update()</strong>,
<strong>SHA1_Final()</strong>, <strong>SHA1_Transform()</strong>,
<strong>SHA224_Init()</strong>, <strong>SHA224_Update()</strong>,
<strong>SHA224_Final()</strong>, <strong>SHA256_Init()</strong>,
<strong>SHA256_Update()</strong>, <strong>SHA256_Final()</strong>,
<strong>SHA256_Transform()</strong>, <strong>SHA384_Init()</strong>,
<strong>SHA384_Update()</strong>, <strong>SHA384_Final()</strong>,
<strong>SHA512_Init()</strong>, <strong>SHA512_Update()</strong>,
<strong>SHA512_Final()</strong>, <strong>SHA512_Transform()</strong> See
Deprecated low-level digest functions.</p></li>
<li><p><strong>SRP_Calc_A()</strong>, <strong>SRP_Calc_B()</strong>,
<strong>SRP_Calc_client_key()</strong>,
<strong>SRP_Calc_server_key()</strong>, <strong>SRP_Calc_u()</strong>,
<strong>SRP_Calc_x()</strong>,
<strong>SRP_check_known_gN_param()</strong>,
<strong>SRP_create_verifier()</strong>,
<strong>SRP_create_verifier_BN()</strong>,
<strong>SRP_get_default_gN()</strong>,
<strong>SRP_user_pwd_free()</strong>,
<strong>SRP_user_pwd_new()</strong>,
<strong>SRP_user_pwd_set0_sv()</strong>,
<strong>SRP_user_pwd_set1_ids()</strong>,
<strong>SRP_user_pwd_set_gN()</strong>,
<strong>SRP_VBASE_add0_user()</strong>,
<strong>SRP_VBASE_free()</strong>,
<strong>SRP_VBASE_get1_by_user()</strong>,
<strong>SRP_VBASE_init()</strong>, <strong>SRP_VBASE_new()</strong>,
<strong>SRP_Verify_A_mod_N()</strong>,
<strong>SRP_Verify_B_mod_N()</strong> There are no replacements for the
SRP functions.</p></li>
<li><p><strong>SSL_CTX_set_tmp_dh_callback()</strong>,
<strong>SSL_set_tmp_dh_callback()</strong>,
<strong>SSL_CTX_set_tmp_dh()</strong>, <strong>SSL_set_tmp_dh()</strong>
These are used to set the Diffie-Hellman (DH) parameters that are to be
used by servers requiring ephemeral DH keys. Instead applications should
consider using the built-in DH parameters that are available by calling
<strong>SSL_CTX_set_dh_auto</strong> (3) or
<strong>SSL_set_dh_auto</strong> (3). If custom parameters are necessary
then applications can use the alternative functions
<strong>SSL_CTX_set0_tmp_dh_pkey</strong> (3) and
<strong>SSL_set0_tmp_dh_pkey</strong> (3). There is no direct
replacement for the callback functions. The callback was originally
useful in order to have different parameters for export and non-export
ciphersuites. Export ciphersuites are no longer supported by OpenSSL.
Use of the callback functions should be replaced by one of the other
methods described above.</p></li>
<li><p><strong>SSL_CTX_set_tlsext_ticket_key_cb()</strong> Use the new
<strong>SSL_CTX_set_tlsext_ticket_key_evp_cb</strong> (3) function
instead.</p></li>
<li><p><strong>WHIRLPOOL()</strong>, <strong>WHIRLPOOL_Init()</strong>,
<strong>WHIRLPOOL_Update()</strong>, <strong>WHIRLPOOL_Final()</strong>,
<strong>WHIRLPOOL_BitUpdate()</strong> See Deprecated low-level digest
functions. The Whirlpool algorithm has been moved to the Legacy
Provider.</p></li>
<li><p><strong>X509_certificate_type()</strong> This was an undocumented
function. Applications can use <strong>X509_get0_pubkey</strong> (3) and
<strong>X509_get0_signature</strong> (3) instead.</p></li>
<li><p><strong>X509_http_nbio()</strong>,
<strong>X509_CRL_http_nbio()</strong> Use
<strong>X509_load_http</strong> (3) and
<strong>X509_CRL_load_http</strong> (3) instead.</p></li>
</ul>
<p><em>NID handling for provided keys and algorithms</em></p>
<p>The following functions for NID (numeric id) handling have changed
semantics.</p>
<ul>
<li><p><strong>EVP_PKEY_id()</strong>,
<strong>EVP_PKEY_get_id()</strong> This function was previously used to
reliably return the NID of an EVP_PKEY object, e.g., to look up the name
of the algorithm of such EVP_PKEY by calling
<strong>OBJ_nid2sn</strong> (3). With the introduction of
<strong>provider</strong> (7)s <strong>EVP_PKEY_id()</strong> or its new
equivalent <strong>EVP_PKEY_get_id</strong> (3) might now also return
the value -1 (<strong>EVP_PKEY_KEYMGMT</strong>) indicating the use of a
provider to implement the EVP_PKEY object. Therefore, the use of
<strong>EVP_PKEY_get0_type_name</strong> (3) is recommended for
retrieving the name of the EVP_PKEY algorithm.</p></li>
</ul>
<h2>Using the FIPS Module in applications</h2>
<p>See <strong>fips_module</strong> (7) and
<strong>OSSL_PROVIDER-FIPS</strong> (7) for details.</p>
<h2>OpenSSL command line application changes</h2>
<p><em>New applications</em></p>
<p><strong>openssl kdf</strong> uses the new
<strong>EVP_KDF</strong> (3) API. <strong>openssl kdf</strong> uses the
new <strong>EVP_MAC</strong> (3) API.</p>
<p><em>Added options</em></p>
<p><strong>-provider_path</strong> and <strong>-provider</strong> are
available to all apps and can be used multiple times to load any
providers, such as the 'legacy' provider or third party providers. If
used then the 'default' provider would also need to be specified if
required. The <strong>-provider_path</strong> must be specified before
the <strong>-provider</strong> option.</p>
<p>The <strong>list</strong> app has many new options. See
<strong>openssl-list</strong> (1) for more information.</p>
<p><strong>-crl_lastupdate</strong> and <strong>-crl_nextupdate</strong>
used by <strong>openssl ca</strong> allows explicit setting of fields in
the generated CRL.</p>
<p><em>Removed options</em></p>
<p>Interactive mode is not longer available.</p>
<p>The <strong>-crypt</strong> option used by <strong>openssl
passwd</strong>. The <strong>-c</strong> option used by <strong>openssl
x509</strong>, <strong>openssl dhparam</strong>, <strong>openssl
dsaparam</strong>, and <strong>openssl ecparam</strong>.</p>
<p><em>Other Changes</em></p>
<p>The output of Command line applications may have minor changes. These
are primarily changes in capitalisation and white space. However, in
some cases, there are additional differences. For example, the DH
parameters output from <strong>openssl dhparam</strong> now lists 'P',
'Q', 'G' and 'pcounter' instead of 'prime', 'generator', 'subgroup
order' and 'counter' respectively.</p>
<p>The <strong>openssl</strong> commands that read keys, certificates,
and CRLs now automatically detect the PEM or DER format of the input
files so it is not necessary to explicitly specify the input format
anymore. However if the input format option is used the specified format
will be required.</p>
<p><strong>openssl speed</strong> no longer uses low-level API calls.
This implies some of the performance numbers might not be comparable
with the previous releases due to higher overhead. This applies
particularly to measuring performance on smaller data chunks.</p>
<p>b&lt;openssl dhparam&gt;, <strong>openssl dsa</strong>,
<strong>openssl gendsa</strong>, <strong>openssl dsaparam</strong>,
<strong>openssl genrsa</strong> and <strong>openssl rsa</strong> have
been modified to use PKEY APIs. <strong>openssl genrsa</strong> and
<strong>openssl rsa</strong> now write PKCS #8 keys by default.</p>
<p><em>Default settings</em></p>
<p>SHA256 is now the default digest for TS query used by <strong>openssl
ts</strong>.</p>
<p><em>Deprecated apps</em></p>
<p><strong>openssl rsautl</strong> is deprecated, use <strong>openssl
pkeyutl</strong> instead. <strong>openssl dhparam</strong>,
<strong>openssl dsa</strong>, <strong>openssl gendsa</strong>,
<strong>openssl dsaparam</strong>, <strong>openssl genrsa</strong>,
<strong>openssl rsa</strong>, <strong>openssl genrsa</strong> and
<strong>openssl rsa</strong> are now in maintenance mode and no new
features will be added to them.</p>
<h2>TLS Changes</h2>
<ul>
<li><p>TLS 1.3 FFDHE key exchange support added This uses DH safe prime
named groups.</p></li>
<li><p>Support for fully pluggable TLSv1.3 groups. This means that
providers may supply their own group implementations (using either the
key exchange or the key encapsulation methods) which will automatically
be detected and used by libssl.</p></li>
<li><p>SSL and SSL_CTX options are now 64 bit instead of 32 bit. The
signatures of the functions to get and set options on SSL and SSL_CTX
objects changed from unsigned long to uint64_t type. This may require
source code changes. For example it is no longer possible to use the
<strong>SSL_OP_</strong> macro values in preprocessor <code>#if</code>
conditions. However it is still possible to test whether these macros
are defined or not. See <strong>SSL_CTX_get_options</strong> (3),
<strong>SSL_CTX_set_options</strong> (3),
<strong>SSL_get_options</strong> (3) and
<strong>SSL_set_options</strong> (3).</p></li>
<li><p><strong>SSL_set1_host()</strong> and
<strong>SSL_add1_host()</strong> Changes These functions now take IP
literal addresses as well as actual hostnames.</p></li>
<li><p>Added SSL option SSL_OP_CLEANSE_PLAINTEXT If the option is set,
openssl cleanses (zeroizes) plaintext bytes from internal buffers after
delivering them to the application. Note, the application is still
responsible for cleansing other copies (e.g.: data received by
<strong>SSL_read</strong> (3)).</p></li>
<li><p>Client-initiated renegotiation is disabled by default. To allow
it, use the <strong>-client_renegotiation</strong> option, the
<strong>SSL_OP_ALLOW_CLIENT_RENEGOTIATION</strong> flag, or the
<code>ClientRenegotiation</code> config parameter as
appropriate.</p></li>
<li><p>Secure renegotiation is now required by default for TLS
connections Support for RFC 5746 secure renegotiation is now required by
default for SSL or TLS connections to succeed. Applications that require
the ability to connect to legacy peers will need to explicitly set
SSL_OP_LEGACY_SERVER_CONNECT. Accordingly, SSL_OP_LEGACY_SERVER_CONNECT
is no longer set as part of SSL_OP_ALL.</p></li>
<li><p>Combining the Configure options no-ec and no-dh no longer
disables TLSv1.3 Typically if OpenSSL has no EC or DH algorithms then it
cannot support connections with TLSv1.3. However OpenSSL now supports
pluggable groups through providers. Therefore third party providers may
supply group implementations even where there are no built-in ones.
Attempting to create TLS connections in such a build without also
disabling TLSv1.3 at run time or using third party provider groups may
result in handshake failures. TLSv1.3 can be disabled at compile time
using the no-tls1_3 Configure option.</p></li>
<li><p><strong>SSL_CTX_set_ciphersuites()</strong> and
<strong>SSL_set_ciphersuites()</strong> changes. The methods now ignore
unknown ciphers.</p></li>
<li><p>Security callback change. The security callback, which can be
customised by application code, supports the security operation
SSL_SECOP_TMP_DH. This is defined to take an EVP_PKEY in the other
parameter. In most places this is what is passed. All these places occur
server side. However there was one client side call of this security
operation and it passed a DH object instead. This is incorrect according
to the definition of SSL_SECOP_TMP_DH, and is inconsistent with all of
the other locations. Therefore this client side call has been changed to
pass an EVP_PKEY instead.</p></li>
<li><p>New SSL option SSL_OP_IGNORE_UNEXPECTED_EOF The SSL option
SSL_OP_IGNORE_UNEXPECTED_EOF is introduced. If that option is set, an
unexpected EOF is ignored, it pretends a close notify was received
instead and so the returned error becomes
SSL_ERROR_ZERO_RETURN.</p></li>
<li><p>The security strength of SHA1 and MD5 based signatures in TLS has
been reduced. This results in SSL 3, TLS 1.0, TLS 1.1 and DTLS 1.0 no
longer working at the default security level of 1 and instead requires
security level 0. The security level can be changed either using the
cipher string with <code>@SECLEVEL</code>, or calling
<strong>SSL_CTX_set_security_level</strong> (3). This also means that
where the signature algorithms extension is missing from a ClientHello
then the handshake will fail in TLS 1.2 at security level 1. This is
because, although this extension is optional, failing to provide one
means that OpenSSL will fallback to a default set of signature
algorithms. This default set requires the availability of SHA1.</p></li>
<li><p>X509 certificates signed using SHA1 are no longer allowed at
security level 1 and above. In TLS/SSL the default security level is 1.
It can be set either using the cipher string with
<code>@SECLEVEL</code>, or calling
<strong>SSL_CTX_set_security_level</strong> (3). If the leaf certificate
is signed with SHA-1, a call to
<strong>SSL_CTX_use_certificate</strong> (3) will fail if the security
level is not lowered first. Outside TLS/SSL, the default security level
is -1 (effectively 0). It can be set using
<strong>X509_VERIFY_PARAM_set_auth_level</strong> (3) or using the
<strong>-auth_level</strong> options of the commands.</p></li>
</ul>
<h1>SEE ALSO</h1>
<p><strong>fips_module</strong> (7)</p>
<h1>HISTORY</h1>
<p>The migration guide was created for OpenSSL 3.0.</p>
<h1>COPYRIGHT</h1>
<p>Copyright 2021-2023 The OpenSSL Project Authors. All Rights
Reserved.</p>
<p>Licensed under the Apache License 2.0 (the License). You may not use
this file except in compliance with the License. You can obtain a copy
in the file LICENSE in the source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
