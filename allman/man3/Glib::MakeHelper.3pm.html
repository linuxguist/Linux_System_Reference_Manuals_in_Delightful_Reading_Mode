<pre><code></code></pre>
<p><br />
</p>
<link rel='stylesheet' href='../style.css'>
<script src='../script.js'></script>
<h1>NAME</h1>
<p>Glib::MakeHelper - Makefile.PL utilities for Glib-based
extensions</p>
<h1>SYNOPSIS</h1>
<p>eval "use Glib::MakeHelper; 1" or
complain_that_glib_is_too_old_and_die(); %xspod_files =
Glib::MakeHelper-&gt;do_pod_files (@xs_files); package MY; sub postamble
{ return Glib::MakeHelper-&gt;postamble_clean () .
Glib::MakeHelper-&gt;postamble_docs (@main::xs_files) .
Glib::MakeHelper-&gt;postamble_rpms ( MYLIB =&gt; $build_reqs{MyLib}, );
}</p>
<h1>DESCRIPTION</h1>
<p>The Makefile.PL for your typical Glib-based module is huge and hairy,
thanks to all the crazy hoops you have to jump through to get things
right. This module wraps up some of the more intense and error-prone
bits to reduce the amount of copied code and potential for errors.</p>
<h1>METHODS</h1>
<dl>
<dt>HASH = Glib::MakeHelper-&gt;do_pod_files (@xs_files)</dt>
<dd>
<p>Scan the <em><code>@xs_files</code></em> and return a hash describing
the pod files that will be created. This is in the format wanted by
<strong>WriteMakefile()</strong>. If <code>@ARGV</code> contains the
string <code>disable-apidoc</code> an empty list will be returned and
thus no apidoc pod will be generated speeding up the build process.</p>
</dd>
<dt>LIST = Glib::MakeHelper-&gt;select_files_by_version ($stem, $major,
$minor)</dt>
<dd>
<p>Returns a list of all files that match $stem-\d+\.\d+ and for which
the first number is bigger than <em><code>$major</code></em> and the
second number is bigger than <em><code>$minor</code></em>. If
<em><code>$minor</code></em> is odd, it will be incremented by one so
that the version number of an upcoming stable release can be used during
development as well.</p>
</dd>
<dt>LIST = Glib::MakeHelper-&gt;read_source_list_file ($filename)</dt>
<dd>
<p>Reads <em><code>$filename</code></em>, removes all comments (starting
with #) and leading and trailing whitespace, and returns a list of all
lines that survived the treatment.</p>
</dd>
<dt>string = Glib::MakeHelper-&gt;get_configure_requires_yaml
(%module_to_version)</dt>
<dd>
<p>Generates YAML code that lists every module found in
<em><code>%module_to_version</code></em> under the
<code>configure_requires</code> key. This can be used with
ExtUtils::MakeMaker's <code>EXTRA_META</code> parameter to specify which
modules are needed at <em>Makefile.PL</em> time. This function is
<strong>deprecated</strong> since ExtUtils::MakeMaker 6.46 removed
support for <code>EXTRA_META</code> in favor of the new keys
<code>META_MERGE</code> and <code>META_ADD</code>.</p>
</dd>
<dt>string = Glib::MakeHelper-&gt;postamble_clean (@files)</dt>
<dd>
<p>Create and return the text of a realclean rule that cleans up after
much of the autogeneration performed by Glib-based modules. Everything
in <code>@files</code> will be deleted, too (it may be empty). The
reasoning behind using this instead of just having you use the 'clean'
or 'realclean' keys is that this avoids you having to remember to put
Glib's stuff in your Makefile.PL's WriteMakefile arguments.</p>
</dd>
<dt>string = Glib::MakeHelper-&gt;postamble_docs (@xs_files)</dt>
<dd>
<p>NOTE: this is The Old Way. see postamble_docs_full for The New Way.
Create and return the text of Makefile rules to build documentation from
the XS files with Glib::ParseXSDoc and Glib::GenPod. Use this in your
MY::postamble to enable autogeneration of POD. This updates dependencies
with the list of pod names generated by an earlier run of
<code>do_pod_files</code>. There is a special Makefile variable
POD_DEPENDS that should be set to the list of files that need to be
created before the doc.pl step is run, include files. There is also a
variable BLIB_DONE which should be used as a dependency anywhere a rule
needs to be sure that a loadable and working module resides in the blib
directory before running.</p>
</dd>
<dt>string = Glib::MakeHelper-&gt;postamble_docs_full (...)</dt>
<dd>
<p>Create and return the text of Makefile rules to build documentation
from the XS files with Glib::ParseXSDoc and Glib::GenPod. Use this in
your MY::postamble to enable autogeneration of POD. This updates
dependencies with the list of pod names generated by an earlier run of
<code>do_pod_files</code>. There is a special Makefile variable
POD_DEPENDS that should be set to the list of files that need to be
created before the doc.pl step is run, include files. There is also a
variable BLIB_DONE which should be used as a dependency anywhere a rule
needs to be sure that a loadable and working module resides in the blib
directory before running. The parameters are a list of key=&gt;value
pairs. You must specify at minimum either DEPENDS or XS_FILES.</p>
<dl>
<dt>DEPENDS =&gt; ExtUtils::Depends object</dt>
<dd>
<p>Most gtk2-perl modules use ExtUtils::Depends to find headers,
typemaps, and other data from parent modules and to install this data
for child modules. We can find from this object the list of XS files to
scan for documentation, doctype mappings for parent modules, and other
goodies.</p>
</dd>
<dt>XS_FILES =&gt; \@xs_file_names</dt>
<dd>
<p>A list of xs files to scan for documentation. Ignored if DEPENDS is
used.</p>
</dd>
<dt>DOCTYPES =&gt; \@doctypes_file_names</dt>
<dd>
<p>List of filenames to pass to <code>Glib::GenPod::add_types</code>.
May be omitted.</p>
</dd>
<dt>COPYRIGHT =&gt; string</dt>
<dd>
<p>POD text to be inserted in the 'COPYRIGHT' section of each generated
page. May be omitted.</p>
</dd>
<dt>COPYRIGHT_FROM =&gt; file name</dt>
<dd>
<p>The name of a file containing the POD to be inserted in the
'COPYRIGHT' section of each generated page. May be omitted.</p>
</dd>
<dt>NAME =&gt; extension name</dt>
<dd>
<p>The name of the extension, used to set the main mod for Glib::GenPod
(used in the generated see-also listings). May be omitted in favor of
the name held inside the ExtUtils::Depends object. If DEPENDS is also
specified, NAME wins.</p>
</dd>
</dl>
</dd>
<dt>string = Glib::MakeHelper-&gt;postamble_rpms (HASH)</dt>
<dd>
<p>Create and return the text of Makefile rules to manage building RPMs.
You'd put this in your Makefile.PL's MY::postamble. <em>HASH</em> is a
set of search and replace keys for the spec file. All occurrences of
@<em>key</em>@ in the spec file template perl-$(DISTNAME).spec.in will
be replaced with <em>value</em>. 'VERSION' and 'SOURCE' are supplied for
you. For example: Glib::MakeHelper-&gt;postamble_rpms ( MYLIB =&gt;
2.0.0, # we can work with anything from this up MYLIB_RUN =&gt; 2.3.1, #
we are actually compiled against this one PERL_GLIB =&gt; 1.01, # you
must have this version of Glib ); will replace <code>@MYLIB</code>@,
<code>@MYLIB_RUN</code>@, and <code>@PERL_GLIB</code>@ in spec file. See
the build setups for Glib and Gtk2 for examples. Note: This function
just returns an empty string on Win32.</p>
</dd>
<dt>string = Glib::MakeHelper-&gt;postamble_precompiled_headers
(@headers)</dt>
<dd>
<p>Create and return the text of Makefile rules for a
'precompiled-headers' target that precompiles
<em><code>@headers</code></em>. If you call this before you call
<code>postamble_clean</code>, all temporary files will be removed by the
'realclean' target.</p>
</dd>
</dl>
<h1>NOTICE</h1>
<p>The MakeMaker distributed with perl 5.8.x generates makefiles with a
bug that causes object files to be created in the wrong directory. There
is an override inserted by this module under the name MY::const_cccmd to
fix this issue.</p>
<h1>AUTHOR</h1>
<p>Ross McFarland &lt;rwmcfa1 at neces dot com&gt;</p>
<p>hacked up and documented by muppet.</p>
<h1>COPYRIGHT AND LICENSE</h1>
<p>Copyright 2003-2004, 2012 by the gtk2-perl team</p>
<p>This library is free software; you can redistribute it and/or modify
it under the terms of the Lesser General Public License (LGPL). For more
information, see http://www.fsf.org/licenses/lgpl.txt</p>
