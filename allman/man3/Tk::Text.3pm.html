<pre><code></code></pre>
<p><br />
</p>
<link rel='stylesheet' href='../style.css'>
<script src='../script.js'></script>
<h1>NAME</h1>
<p>Tk::Text - Create and manipulate Text widgets</p>
<h1>SYNOPSIS</h1>
<p><em><code>$text</code></em> =
<em><code>$parent</code></em>-&gt;<strong>Text</strong>(?<em>options</em>?);</p>
<p><strong>-background</strong> <strong>-highlightbackground</strong>
<strong>-insertontime</strong> <strong>-selectborderwidth</strong>
<strong>-borderwidth</strong> <strong>-highlightcolor</strong>
<strong>-insertwidth</strong> <strong>-selectforeground</strong>
<strong>-cursor</strong> <strong>-highlightthickness</strong>
<strong>-padx</strong> <strong>-setgrid</strong>
<strong>-exportselection</strong> <strong>-insertbackground</strong>
<strong>-pady</strong> <strong>-takefocus</strong>
<strong>-font</strong> <strong>-insertborderwidth</strong>
<strong>-relief</strong> <strong>-xscrollcommand</strong>
<strong>-foreground</strong> <strong>-insertofftime</strong>
<strong>-selectbackground</strong> <strong>-yscrollcommand</strong></p>
<h1>WIDGET-SPECIFIC OPTIONS</h1>
<dl>
<dt>Name: height</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Height</dt>
<dd>

</dd>
<dt>Switch: -height</dt>
<dd>

</dd>
</dl>
<p>Specifies the desired height for the window, in units of characters
in the font given by the <strong>-font</strong> option. Must be at least
one.</p>
<dl>
<dt>Name: spacing1</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Spacing1</dt>
<dd>

</dd>
<dt>Switch: -spacing1</dt>
<dd>

</dd>
</dl>
<p>Requests additional space above each text line in the widget, using
any of the standard forms for screen distances. If a line wraps, this
option only applies to the first line on the display. This option may be
overridden with <strong>-spacing1</strong> options in tags.</p>
<dl>
<dt>Name: spacing2</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Spacing2</dt>
<dd>

</dd>
<dt>Switch: -spacing2</dt>
<dd>

</dd>
</dl>
<p>For lines that wrap (so that they cover more than one line on the
display) this option specifies additional space to provide between the
display lines that represent a single line of text. The value may have
any of the standard forms for screen distances. This option may be
overridden with <strong>-spacing2</strong> options in tags.</p>
<dl>
<dt>Name: spacing3</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Spacing3</dt>
<dd>

</dd>
<dt>Switch: -spacing3</dt>
<dd>

</dd>
</dl>
<p>Requests additional space below each text line in the widget, using
any of the standard forms for screen distances. If a line wraps, this
option only applies to the last line on the display. This option may be
overridden with <strong>-spacing3</strong> options in tags.</p>
<dl>
<dt>Name: state</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: State</dt>
<dd>

</dd>
<dt>Switch: -state</dt>
<dd>

</dd>
</dl>
<p>Specifies one of two states for the text: <strong>normal</strong> or
<strong>disabled</strong>. If the text is disabled then characters may
not be inserted or deleted and no insertion cursor will be displayed,
even if the input focus is in the widget.</p>
<dl>
<dt>Name: tabs</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Tabs</dt>
<dd>

</dd>
<dt>Switch: -tabs</dt>
<dd>

</dd>
</dl>
<p>Specifies a set of tab stops for the window. The option's value
consists of a list of screen distances giving the positions of the tab
stops. Each position may optionally be followed in the next list element
by one of the keywords <strong>left</strong>, <strong>right</strong>,
<strong>center</strong>, or <strong>numeric</strong>, which specifies
how to justify text relative to the tab stop. <strong>Left</strong> is
the default; it causes the text following the tab character to be
positioned with its left edge at the tab position.
<strong>Right</strong> means that the right edge of the text following
the tab character is positioned at the tab position, and
<strong>center</strong> means that the text is centered at the tab
position. <strong>Numeric</strong> means that the decimal point in the
text is positioned at the tab position; if there is no decimal point
then the least significant digit of the number is positioned just to the
left of the tab position; if there is no number in the text then the
text is right-justified at the tab position. For example, <strong>-tabs
=&gt; [qw/2c left 4c 6c center/]</strong> creates three tab stops at
two-centimeter intervals; the first two use left justification and the
third uses center justification. If the list of tab stops does not have
enough elements to cover all of the tabs in a text line, then Tk
extrapolates new tab stops using the spacing and alignment from the last
tab stop in the list. The value of the <strong>tabs</strong> option may
be overridden by <strong>-tabs</strong> options in tags. If no
<strong>-tabs</strong> option is specified, or if it is specified as an
empty list, then Tk uses default tabs spaced every eight (average size)
characters.</p>
<dl>
<dt>Name: width</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Width</dt>
<dd>

</dd>
<dt>Switch: -width</dt>
<dd>

</dd>
</dl>
<p>Specifies the desired width for the window in units of characters in
the font given by the <strong>-font</strong> option. If the font doesn't
have a uniform width then the width of the character ``0'' is used in
translating from character units to screen units.</p>
<dl>
<dt>Name: wrap</dt>
<dd>

</dd>
</dl>
<dl>
<dt>Class: Wrap</dt>
<dd>

</dd>
<dt>Switch: -wrap</dt>
<dd>

</dd>
</dl>
<p>Specifies how to handle lines in the text that are too long to be
displayed in a single line of the text's window. The value must be
<strong>none</strong> or <strong>char</strong> or <strong>word</strong>.
A wrap mode of <strong>none</strong> means that each line of text
appears as exactly one line on the screen; extra characters that don't
fit on the screen are not displayed. In the other modes each line of
text will be broken up into several screen lines if necessary to keep
all the characters visible. In <strong>char</strong> mode a screen line
break may occur after any character; in <strong>word</strong> mode a
line break will only be made at word boundaries.</p>
<h1>DESCRIPTION</h1>
<p>The <strong>Text</strong> method creates a new window (given by the
<code>$text</code> argument) and makes it into a text widget. Additional
options, described above, may be specified on the command line or in the
option database to configure aspects of the text such as its default
background color and relief. The <strong>text</strong> command returns
the path name of the new window.</p>
<p>A text widget displays one or more lines of text and allows that text
to be edited. Text widgets support four different kinds of annotations
on the text, called tags, marks, embedded windows or embedded images.
Tags allow different portions of the text to be displayed with different
fonts and colors. In addition, perl/Tk callbacks can be associated with
tags so that scripts are invoked when particular actions such as
keystrokes and mouse button presses occur in particular ranges of the
text. See TAGS below for more details.</p>
<p>The second form of annotation consists of marks, which are floating
markers in the text. Marks are used to keep track of various interesting
positions in the text as it is edited. See MARKS below for more
details.</p>
<p>The third form of annotation allows arbitrary windows to be embedded
in a text widget. See EMBEDDED WINDOWS below for more details.</p>
<p>The fourth form of annotation allows Tk images to be embedded in a
text widget. See EMBEDDED IMAGES below for more details.</p>
<p>The Perl/Tk <strong>Text</strong> widget does not support undo/redo,
use the <strong>TextUndo</strong> widget instead.</p>
<h1>INDICES</h1>
<p>Many of the methods for texts take one or more indices as arguments.
An index is a string used to indicate a particular place within a text,
such as a place to insert characters or one endpoint of a range of
characters to delete. Indices have the syntax</p>
<p>base modifier modifier modifier ...</p>
<p>Where <em>base</em> gives a starting point and the <em>modifier</em>s
adjust the index from the starting point (e.g. move forward or backward
one character). Every index must contain a <em>base</em>, but the
<em>modifier</em>s are optional.</p>
<p>The <em>base</em> for an index must have one of the following
forms:</p>
<dl>
<dt>line.char</dt>
<dd>
<p>Indicates <em>char</em>'th character on line <em>line</em>. Lines are
numbered from 1 for consistency with other UNIX programs that use this
numbering scheme. Within a line, characters are numbered from 0. If
<em>char</em> is <strong>end</strong> then it refers to the newline
character that ends the line.</p>
</dd>
<dt>@x,y</dt>
<dd>
<p>Indicates the character that covers the pixel whose x and y
coordinates within the text's window are <em>x</em> and <em>y</em>.</p>
</dd>
<dt>end</dt>
<dd>
<p>Indicates the end of the text (the character just after the last
newline).</p>
</dd>
<dt>mark</dt>
<dd>
<p>Indicates the character just after the mark whose name is
<em>mark</em>.</p>
</dd>
<dt>tag.first</dt>
<dd>
<p>Indicates the first character in the text that has been tagged with
<em>tag</em>. This form generates an error if no characters are
currently tagged with <em>tag</em>.</p>
</dd>
<dt>tag.last</dt>
<dd>
<p>Indicates the character just after the last one in the text that has
been tagged with <em>tag</em>. This form generates an error if no
characters are currently tagged with <em>tag</em>.</p>
</dd>
<dt>$widget</dt>
<dd>
<p>Indicates the position of the embedded window referenced by
<em><code>$widget</code></em>. This form generates an error if
<em><code>$widget</code></em> does not reference to an embedded
window.</p>
</dd>
<dt>imageName</dt>
<dd>
<p>Indicates the position of the embedded image whose name is
<em>imageName</em>. This form generates an error if there is no embedded
image by the given name.</p>
</dd>
</dl>
<p>If the <em>base</em> could match more than one of the above forms,
such as a <em>mark</em> and <em>imageName</em> both having the same
value, then the form earlier in the above list takes precedence. If
modifiers follow the base index, each one of them must have one of the
forms listed below. Keywords such as <strong>chars</strong> and
<strong>wordend</strong> may be abbreviated as long as the abbreviation
is unambiguous.</p>
<dl>
<dt>+ count chars</dt>
<dd>
<p>Adjust the index forward by <em>count</em> characters, moving to
later lines in the text if necessary. If there are fewer than
<em>count</em> characters in the text after the current index, then set
the index to the last character in the text. Spaces on either side of
<em>count</em> are optional.</p>
</dd>
<dt>- count chars</dt>
<dd>
<p>Adjust the index backward by <em>count</em> characters, moving to
earlier lines in the text if necessary. If there are fewer than
<em>count</em> characters in the text before the current index, then set
the index to the first character in the text. Spaces on either side of
<em>count</em> are optional.</p>
</dd>
<dt>+ count lines</dt>
<dd>
<p>Adjust the index forward by <em>count</em> lines, retaining the same
character position within the line. If there are fewer than
<em>count</em> lines after the line containing the current index, then
set the index to refer to the same character position on the last line
of the text. Then, if the line is not long enough to contain a character
at the indicated character position, adjust the character position to
refer to the last character of the line (the newline). Spaces on either
side of <em>count</em> are optional.</p>
</dd>
<dt>- count lines</dt>
<dd>
<p>Adjust the index backward by <em>count</em> lines, retaining the same
character position within the line. If there are fewer than
<em>count</em> lines before the line containing the current index, then
set the index to refer to the same character position on the first line
of the text. Then, if the line is not long enough to contain a character
at the indicated character position, adjust the character position to
refer to the last character of the line (the newline). Spaces on either
side of <em>count</em> are optional.</p>
</dd>
<dt>linestart</dt>
<dd>
<p>Adjust the index to refer to the first character on the line.</p>
</dd>
<dt>lineend</dt>
<dd>
<p>Adjust the index to refer to the last character on the line (the
newline).</p>
</dd>
<dt>wordstart</dt>
<dd>
<p>Adjust the index to refer to the first character of the word
containing the current index. A word consists of any number of adjacent
characters that are letters, digits, or underscores, or a single
character that is not one of these.</p>
</dd>
<dt>wordend</dt>
<dd>
<p>Adjust the index to refer to the character just after the last one of
the word containing the current index. If the current index refers to
the last character of the text then it is not modified.</p>
</dd>
</dl>
<p>If more than one modifier is present then they are applied in
left-to-right order. For example, the index ``<strong>end - 1
chars</strong>'' refers to the next-to-last character in the text and
``<strong>insert wordstart - 1 c</strong>'' refers to the character just
before the first one in the word containing the insertion cursor.</p>
<h1>TAGS</h1>
<p>The first form of annotation in text widgets is a tag. A tag is a
textual string that is associated with some of the characters in a text.
Tags may contain arbitrary characters, but it is probably best to avoid
using the the characters `` '' (space), <strong>+</strong>, or
<strong>-</strong>: these characters have special meaning in indices, so
tags containing them can't be used as indices. There may be any number
of tags associated with characters in a text. Each tag may refer to a
single character, a range of characters, or several ranges of
characters. An individual character may have any number of tags
associated with it.</p>
<p>A priority order is defined among tags, and this order is used in
implementing some of the tag-related functions described below. When a
tag is defined (by associating it with characters or setting its display
options or binding callbacks to it), it is given a priority higher than
any existing tag. The priority order of tags may be redefined using the
``<em><code>$text</code></em>-&gt;<strong>tagRaise</strong>'' and
``<em><code>$text</code></em>-&gt;<strong>tagLower</strong>''
methods.</p>
<p>Tags serve three purposes in text widgets. First, they control the
way information is displayed on the screen. By default, characters are
displayed as determined by the <strong>background</strong>,
<strong>font</strong>, and <strong>foreground</strong> options for the
text widget. However, display options may be associated with individual
tags using the
``<em><code>$text</code></em>-&gt;<strong>tagConfigure</strong>''
method. If a character has been tagged, then the display options
associated with the tag override the default display style. The
following options are currently supported for tags:</p>
<dl>
<dt>-background =&gt; color</dt>
<dd>
<p><em>Color</em> specifies the background color to use for characters
associated with the tag. It may have any of the forms accepted by
<strong>Tk_GetColor</strong>.</p>
</dd>
<dt>-bgstipple =&gt; bitmap</dt>
<dd>
<p><em>Bitmap</em> specifies a bitmap that is used as a stipple pattern
for the background. It may have any of the forms accepted by
<strong>Tk_GetBitmap</strong>. If <em>bitmap</em> hasn't been specified,
or if it is specified as an empty string, then a solid fill will be used
for the background.</p>
</dd>
<dt>-borderwidth =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies the width of a 3-D border to draw around
the background. It may have any of the forms accepted by
<strong>Tk_GetPixels</strong>. This option is used in conjunction with
the <strong>-relief</strong> option to give a 3-D appearance to the
background for characters; it is ignored unless the
<strong>-background</strong> option has been set for the tag.</p>
</dd>
<dt>-elide =&gt; boolean</dt>
<dd>
<p>Elide specifies whether the data should be elided. Elided data is not
displayed and takes no space on screen, but further on behaves just as
normal data.</p>
</dd>
<dt>-data =&gt; value</dt>
<dd>
<p>Allows an arbitrary perl scalar <em>value</em> to be associated with
the tag.</p>
</dd>
<dt>-fgstipple =&gt; bitmap</dt>
<dd>
<p><em>Bitmap</em> specifies a bitmap that is used as a stipple pattern
when drawing text and other foreground information such as underlines.
It may have any of the forms accepted by <strong>Tk_GetBitmap</strong>.
If <em>bitmap</em> hasn't been specified, or if it is specified as an
empty string, then a solid fill will be used.</p>
</dd>
<dt>-font =&gt; fontName</dt>
<dd>
<p><em>FontName</em> is the name of a font to use for drawing
characters. It may have any of the forms accepted by
<strong>Tk_GetFontStruct</strong>.</p>
</dd>
<dt>-foreground =&gt; color</dt>
<dd>
<p><em>Color</em> specifies the color to use when drawing text and other
foreground information such as underlines. It may have any of the forms
accepted by <strong>Tk_GetColor</strong>.</p>
</dd>
<dt>-justify =&gt; justify</dt>
<dd>
<p>If the first character of a display line has a tag for which this
option has been specified, then <em>justify</em> determines how to
justify the line. It must be one of <strong>left</strong>,
<strong>right</strong>, or <strong>center</strong>. If a line wraps,
then the justification for each line on the display is determined by the
first character of that display line.</p>
</dd>
<dt>-lmargin1 =&gt; pixels</dt>
<dd>
<p>If the first character of a text line has a tag for which this option
has been specified, then <em>pixels</em> specifies how much the line
should be indented from the left edge of the window. <em>Pixels</em> may
have any of the standard forms for screen distances. If a line of text
wraps, this option only applies to the first line on the display; the
<strong>-lmargin2</strong> option controls the indentation for
subsequent lines.</p>
</dd>
<dt>-lmargin2 =&gt; pixels</dt>
<dd>
<p>If the first character of a display line has a tag for which this
option has been specified, and if the display line is not the first for
its text line (i.e., the text line has wrapped), then <em>pixels</em>
specifies how much the line should be indented from the left edge of the
window. <em>Pixels</em> may have any of the standard forms for screen
distances. This option is only used when wrapping is enabled, and it
only applies to the second and later display lines for a text line.</p>
</dd>
<dt>-offset =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies an amount by which the text's baseline
should be offset vertically from the baseline of the overall line, in
pixels. For example, a positive offset can be used for superscripts and
a negative offset can be used for subscripts. <em>Pixels</em> may have
any of the standard forms for screen distances.</p>
</dd>
<dt>-overstrike =&gt; boolean</dt>
<dd>
<p>Specifies whether or not to draw a horizontal rule through the middle
of characters. <em>Boolean</em> may have any of the forms accepted by
<strong>Tk_GetBoolean</strong>.</p>
</dd>
<dt>-relief =&gt; relief</dt>
<dd>
<p><em>Relief</em> specifies the 3-D relief to use for drawing
backgrounds, in any of the forms accepted by
<strong>Tk_GetRelief</strong>. This option is used in conjunction with
the <strong>-borderwidth</strong> option to give a 3-D appearance to the
background for characters; it is ignored unless the
<strong>-background</strong> option has been set for the tag.</p>
</dd>
<dt>-rmargin =&gt; pixels</dt>
<dd>
<p>If the first character of a display line has a tag for which this
option has been specified, then <em>pixels</em> specifies how wide a
margin to leave between the end of the line and the right edge of the
window. <em>Pixels</em> may have any of the standard forms for screen
distances. This option is only used when wrapping is enabled. If a text
line wraps, the right margin for each line on the display is determined
by the first character of that display line.</p>
</dd>
<dt>-spacing1 =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies how much additional space should be left
above each text line, using any of the standard forms for screen
distances. If a line wraps, this option only applies to the first line
on the display.</p>
</dd>
<dt>-spacing2 =&gt; pixels</dt>
<dd>
<p>For lines that wrap, this option specifies how much additional space
to leave between the display lines for a single text line.
<em>Pixels</em> may have any of the standard forms for screen
distances.</p>
</dd>
<dt>-spacing3 =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies how much additional space should be left
below each text line, using any of the standard forms for screen
distances. If a line wraps, this option only applies to the last line on
the display.</p>
</dd>
<dt>-tabs =&gt; tabList</dt>
<dd>
<p><em>TabList</em> specifies a set of tab stops in the same form as for
the <strong>-tabs</strong> option for the text widget. This option only
applies to a display line if it applies to the first character on that
display line. If this option is specified as an empty string, it cancels
the option, leaving it unspecified for the tag (the default). If the
option is specified as a non-empty string that is an empty list, such as
<strong>-tabs =</strong> &gt;, then it requests default 8-character tabs
as described for the <strong>tabs</strong> widget option.</p>
</dd>
<dt>-underline =&gt; boolean</dt>
<dd>
<p><em>Boolean</em> specifies whether or not to draw an underline
underneath characters. It may have any of the forms accepted by
<strong>Tk_GetBoolean</strong>.</p>
</dd>
<dt>-wrap =&gt; mode</dt>
<dd>
<p><em>Mode</em> specifies how to handle lines that are wider than the
text's window. It has the same legal values as the
<strong>-wrap</strong> option for the text widget:
<strong>none</strong>, <strong>char</strong>, or <strong>word</strong>.
If this tag option is specified, it overrides the <strong>-wrap</strong>
option for the text widget.</p>
</dd>
</dl>
<p>If a character has several tags associated with it, and if their
display options conflict, then the options of the highest priority tag
are used. If a particular display option hasn't been specified for a
particular tag, or if it is specified as an empty string, then that
option will never be used; the next-highest-priority tag's option will
used instead. If no tag specifies a particular display option, then the
default style for the widget will be used.</p>
<p>The second purpose for tags is event bindings. You can associate
bindings with a tag in much the same way you can associate bindings with
a widget class: whenever particular X events occur on characters with
the given tag, a given &lt;perl/Tk callback|Tk::callbacks&gt; will be
executed. Tag bindings can be used to give behaviors to ranges of
characters; among other things, this allows hypertext-like features to
be implemented. For details, see the description of the
<strong>tagBind</strong> widget method below.</p>
<p>The third use for tags is in managing the selection. See THE
SELECTION below.</p>
<h1>MARKS</h1>
<p>The second form of annotation in text widgets is a mark. Marks are
used for remembering particular places in a text. They are something
like tags, in that they have names and they refer to places in the file,
but a mark isn't associated with particular characters. Instead, a mark
is associated with the gap between two characters. Only a single
position may be associated with a mark at any given time. If the
characters around a mark are deleted the mark will still remain; it will
just have new neighbor characters. In contrast, if the characters
containing a tag are deleted then the tag will no longer have an
association with characters in the file. Marks may be manipulated with
the ``<em><code>$text</code></em>-&gt;<strong>mark</strong>'' text
widget method, and their current locations may be determined by using
the mark name as an index in methods.</p>
<p>Each mark also has a <em>gravity</em>, which is either
<strong>left</strong> or <strong>right</strong>. The gravity for a mark
specifies what happens to the mark when text is inserted at the point of
the mark. If a mark has left gravity, then the mark is treated as if it
were attached to the character on its left, so the mark will remain to
the left of any text inserted at the mark position. If the mark has
right gravity, new text inserted at the mark position will appear to the
right of the mark. The gravity for a mark defaults to
<strong>right</strong>.</p>
<p>The name space for marks is different from that for tags: the same
name may be used for both a mark and a tag, but they will refer to
different things.</p>
<p>Two marks have special significance. First, the mark
<strong>insert</strong> is associated with the insertion cursor, as
described under THE INSERTION CURSOR below. Second, the mark
<strong>current</strong> is associated with the character closest to the
mouse and is adjusted automatically to track the mouse position and any
changes to the text in the widget (one exception:
<strong>current</strong> is not updated in response to mouse motions if
a mouse button is down; the update will be deferred until all mouse
buttons have been released). Neither of these special marks may be
deleted.</p>
<h1>EMBEDDED WINDOWS</h1>
<p>The third form of annotation in text widgets is an embedded window.
Each embedded window annotation causes a window to be displayed at a
particular point in the text. There may be any number of embedded
windows in a text widget, and any widget may be used as an embedded
window (subject to the usual rules for geometry management, which
require the text window to be the parent of the embedded window or a
descendant of its parent). The embedded window's position on the screen
will be updated as the text is modified or scrolled, and it will be
mapped and unmapped as it moves into and out of the visible area of the
text widget. Each embedded window occupies one character's worth of
index space in the text widget, and it may be referred to either by the
name of its embedded window or by its position in the widget's index
space. If the range of text containing the embedded window is deleted
then the window is destroyed.</p>
<p>When an embedded window is added to a text widget with the
<strong>widgetCreate</strong> method, several configuration options may
be associated with it. These options may be modified later with the
<strong>widgetConfigure</strong> method. The following options are
currently supported:</p>
<dl>
<dt>-align =&gt; where</dt>
<dd>
<p>If the window is not as tall as the line in which it is displayed,
this option determines where the window is displayed in the line.
<em>Where</em> must have one of the values <strong>top</strong> (align
the top of the window with the top of the line), <strong>center</strong>
(center the window within the range of the line),
<strong>bottom</strong> (align the bottom of the window with the bottom
of the line's area), or <strong>baseline</strong> (align the bottom of
the window with the baseline of the line).</p>
</dd>
<dt>-create =&gt; callback</dt>
<dd>
<p>Specifies a callback that may be evaluated to create the window for
the annotation. If no <strong>-window</strong> option has been specified
for the annotation this <em>callback</em> will be evaluated when the
annotation is about to be displayed on the screen. <em>Callback</em>
must create a window for the annotation and return the name of that
window as its result. If the annotation's window should ever be deleted,
<em>callback</em> will be evaluated again the next time the annotation
is displayed.</p>
</dd>
<dt>-padx =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies the amount of extra space to leave on each
side of the embedded window. It may have any of the usual forms defined
for a screen distance (see <strong>Tk_GetPixels</strong>).</p>
</dd>
<dt>-pady =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies the amount of extra space to leave on the
top and on the bottom of the embedded window. It may have any of the
usual forms defined for a screen distance (see
<strong>Tk_GetPixels</strong>).</p>
</dd>
<dt>-stretch =&gt; boolean</dt>
<dd>
<p>If the requested height of the embedded window is less than the
height of the line in which it is displayed, this option can be used to
specify whether the window should be stretched vertically to fill its
line. If the <strong>-pady</strong> option has been specified as well,
then the requested padding will be retained even if the window is
stretched.</p>
</dd>
<dt>-window =&gt; $widget</dt>
<dd>
<p>Specifies the name of a window to display in the annotation.</p>
</dd>
</dl>
<h1>EMBEDDED IMAGES</h1>
<p>The final form of annotation in text widgets is an embedded image.
Each embedded image annotation causes an image to be displayed at a
particular point in the text. There may be any number of embedded images
in a text widget, and a particular image may be embedded in multiple
places in the same text widget. The embedded image's position on the
screen will be updated as the text is modified or scrolled. Each
embedded image occupies one character's worth of index space in the text
widget, and it may be referred to either by its position in the widget's
index space, or the name it is assigned when the image is inserted into
the text widget with <strong>imageCreate</strong>. If the range of text
containing the embedded image is deleted then that copy of the image is
removed from the screen.</p>
<p>When an embedded image is added to a text widget with the
<strong>image</strong> create method, a name unique to this instance of
the image is returned. This name may then be used to refer to this image
instance. The name is taken to be the value of the
<strong>-name</strong> option (described below). If the
<strong>-name</strong> option is not provided, the
<strong>-image</strong> name is used instead. If the <em>imageName</em>
is already in use in the text widget, then <strong>#</strong><em>nn</em>
is added to the end of the <em>imageName</em>, where <em>nn</em> is an
arbitrary integer. This insures the <em>imageName</em> is unique. Once
this name is assigned to this instance of the image, it does not change,
even though the <strong>-image</strong> or <strong>-name</strong> values
can be changed with <strong>image configure</strong>.</p>
<p>When an embedded image is added to a text widget with the
<strong>imageCreate</strong> method, several configuration options may
be associated with it. These options may be modified later with the
<strong>image configure</strong> method. The following options are
currently supported:</p>
<dl>
<dt>-align =&gt; where</dt>
<dd>
<p>If the image is not as tall as the line in which it is displayed,
this option determines where the image is displayed in the line.
<em>Where</em> must have one of the values <strong>top</strong> (align
the top of the image with the top of the line), <strong>center</strong>
(center the image within the range of the line), <strong>bottom</strong>
(align the bottom of the image with the bottom of the line's area), or
<strong>baseline</strong> (align the bottom of the image with the
baseline of the line).</p>
</dd>
<dt>-image =&gt; image</dt>
<dd>
<p>Specifies the name of the Tk image to display in the annotation. If
<em>image</em> is not a valid Tk image, then an error is returned.</p>
</dd>
<dt>-name =&gt; ImageName</dt>
<dd>
<p>Specifies the name by which this image instance may be referenced in
the text widget. If <em>ImageName</em> is not supplied, then the name of
the Tk image is used instead. If the <em>imageName</em> is already in
use, <em>#nn</em> is appended to the end of the name as described
above.</p>
</dd>
<dt>-padx =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies the amount of extra space to leave on each
side of the embedded image. It may have any of the usual forms defined
for a screen distance.</p>
</dd>
<dt>-pady =&gt; pixels</dt>
<dd>
<p><em>Pixels</em> specifies the amount of extra space to leave on the
top and on the bottom of the embedded image. It may have any of the
usual forms defined for a screen distance.</p>
</dd>
</dl>
<h1>THE SELECTION</h1>
<p>Selection support is implemented via tags. If the
<strong>exportSelection</strong> option for the text widget is true then
the <strong>sel</strong> tag will be associated with the selection:</p>
<dl>
<dt>[1]</dt>
<dd>
<p>Whenever characters are tagged with <strong>sel</strong> the text
widget will claim ownership of the selection.</p>
</dd>
<dt>[2]</dt>
<dd>
<p>Attempts to retrieve the selection will be serviced by the text
widget, returning all the characters with the <strong>sel</strong>
tag.</p>
</dd>
<dt>[3]</dt>
<dd>
<p>If the selection is claimed away by another application or by another
window within this application, then the <strong>sel</strong> tag will
be removed from all characters in the text.</p>
</dd>
<dt>[4]</dt>
<dd>
<p>Whenever the sel tag range changes a virtual event
<strong>&lt;&lt;Selection</strong>&gt;&gt; is generated. The
<strong>sel</strong> tag is automatically defined when a text widget is
created, and it may not be deleted with the
``<em><code>$text</code></em>-&gt;<strong>tagDelete</strong>'' method.
Furthermore, the <strong>selectBackground</strong>,
<strong>selectBorderWidth</strong>, and
<strong>selectForeground</strong> options for the text widget are tied
to the <strong>-background</strong>, <strong>-borderwidth</strong>, and
<strong>-foreground</strong> options for the <strong>sel</strong> tag:
changes in either will automatically be reflected in the other.</p>
</dd>
</dl>
<h1>THE INSERTION CURSOR</h1>
<p>The mark named <strong>insert</strong> has special significance in
text widgets. It is defined automatically when a text widget is created
and it may not be unset with the
``<em><code>$text</code></em>-&gt;<strong>markUnset</strong>'' widget
command. The <strong>insert</strong> mark represents the position of the
insertion cursor, and the insertion cursor will automatically be drawn
at this point whenever the text widget has the input focus.</p>
<h1>THE MODIFIED FLAG</h1>
<p>The text widget can keep track of changes to the content of the
widget by means of the modified flag. Inserting or deleting text will
set this flag. The flag can be queried, set and cleared programatically
as well. Whenever the flag changes state a
<strong>&lt;&lt;Modified</strong>&gt;&gt; virtual event is gener- ated.
See the edit modified widget command for more details.</p>
<h1>WIDGET METHODS</h1>
<p>The <strong>Text</strong> method creates a widget object. This object
supports the <strong>configure</strong> and <strong>cget</strong>
methods described in Tk::options which can be used to enquire and modify
the options described above. The widget also inherits all the methods
provided by the generic Tk::Widget class.</p>
<p>The following additional methods are available for text widgets. In
addition, the extended text widget methods as documented in
<em>Mastering Perl/Tk</em> are included in this pod (with permission
from the publisher, <strong>O'Reilly and Associates Inc.</strong>).</p>
<dl>
<dt>$text-&gt;adjustSelect</dt>
<dd>
<p>Moves the end point of the selection and anchor point to the mouse
pointer location.</p>
</dd>
<dt>$text-&gt;bbox(index)</dt>
<dd>
<p>Returns a list of four elements describing the screen area of the
character given by <em>index</em>. The first two elements of the list
give the x and y coordinates of the upper-left corner of the area
occupied by the character, and the last two elements give the width and
height of the area. If the character is only partially visible on the
screen, then the return value reflects just the visible part. If the
character is not visible on the screen then the return value is an empty
list.</p>
</dd>
<dt>$text-&gt;clipboardColumnCopy</dt>
<dd>
<p>Performs a rectangular copy of the currently selected text with basic
compensation for tab characters.</p>
</dd>
<dt>$text-&gt;clipboardColumnCut</dt>
<dd>
<p>Performs a rectangular cut of the currently selected text with basic
compensation for tab characters.</p>
</dd>
<dt>$text-&gt;clipboardColumnPaste</dt>
<dd>
<p>Performs a rectangular paste of the text in the clipboard. The
upper-left corner is specified by the current position of the insert
mark with basic compensation for tab characters.</p>
</dd>
<dt>$text-&gt;compare(index1, op, index2)</dt>
<dd>
<p>Compares the indices given by <em>index1</em> and <em>index2</em>
according to the relational operator given by <em>op</em>, and returns 1
if the relationship is satisfied and 0 if it isn't. <em>Op</em> must be
one of the operators &lt;, &lt;=, ==, &gt;=, &gt;, or !=. If <em>op</em>
is == then 1 is returned if the two indices refer to the same character,
if <em>op</em> is &lt; then 1 is returned if <em>index1</em> refers to
an earlier character in the text than <em>index2</em>, and so on.</p>
</dd>
<dt>$text-&gt;Contents(?args?)</dt>
<dd>
<p>Query or change the entire contents of the text widget. If no
arguments are given, the entire contents of the text widget are
returned. If any arguments are given, the entire contents of the text
widget are deleted and replaced by the argument list.</p>
</dd>
<dt>$text-&gt;debug(?boolean?)</dt>
<dd>
<p>If <em>boolean</em> is specified, then it must have one of the true
or false values accepted by Tcl_GetBoolean. If the value is a true one
then internal consistency checks will be turned on in the B-tree code
associated with text widgets. If <em>boolean</em> has a false value then
the debugging checks will be turned off. In either case the command
returns an empty string. If <em>boolean</em> is not specified then the
command returns <strong>on</strong> or <strong>off</strong> to indicate
whether or not debugging is turned on. There is a single debugging
switch shared by all text widgets: turning debugging on or off in any
widget turns it on or off for all widgets. For widgets with large
amounts of text, the consistency checks may cause a noticeable
slow-down.</p>
</dd>
<dt>$text-&gt;delete(index1, ?index2?)</dt>
<dd>
<p>Delete a range of characters from the text. If both <em>index1</em>
and <em>index2</em> are specified, then delete all the characters
starting with the one given by <em>index1</em> and stopping just before
<em>index2</em> (i.e. the character at <em>index2</em> is not deleted).
If <em>index2</em> doesn't specify a position later in the text than
<em>index1</em> then no characters are deleted. If <em>index2</em> isn't
specified then the single character at <em>index1</em> is deleted. It is
not allowable to delete characters in a way that would leave the text
without a newline as the last character. The command returns an empty
string. If more indices are given, multiple ranges of text will be
deleted. All indices are first checked for validity before any deletions
are made. They are sorted and the text is removed from the last range to
the first range to deleted text does not cause a undesired index
shifting side-effects. If multiple ranges with the same start index are
given, then the longest range is used. If overlapping ranges are given,
then they will be merged into spans that do not cause deletion of text
outside the given ranges due to text shifted during deletion.</p>
</dd>
<dt>$text-&gt;deleteSelected</dt>
<dd>
<p>Delete the currently selected text.</p>
</dd>
<dt>$text-&gt;deleteTextTaggedWith(tag)</dt>
<dd>
<p>Delete the text tagged with the <em>tag</em> parameter.</p>
</dd>
<dt>$text-&gt;deleteToEndofLine</dt>
<dd>
<p>Delete from the insert mark location to the end of line.</p>
</dd>
<dt>$text-&gt;dlineinfo(index)</dt>
<dd>
<p>Returns a list with five elements describing the area occupied by the
display line containing <em>index</em>. The first two elements of the
list give the x and y coordinates of the upper-left corner of the area
occupied by the line, the third and fourth elements give the width and
height of the area, and the fifth element gives the position of the
baseline for the line, measured down from the top of the area. All of
this information is measured in pixels. If the current wrap mode is
<strong>none</strong> and the line extends beyond the boundaries of the
window, the area returned reflects the entire area of the line,
including the portions that are out of the window. If the line is
shorter than the full width of the window then the area returned
reflects just the portion of the line that is occupied by characters and
embedded windows. If the display line containing <em>index</em> is not
visible on the screen then the return value is an empty list.</p>
</dd>
<dt>$text-&gt;dump(?switches?, index1, ?index2?)</dt>
<dd>
<p>Return the contents of the text widget from <em>index1</em> up to,
but not including <em>index2</em>, including the text and information
about marks, tags, and embedded windows. If <em>index2</em> is not
specified, then it defaults to one character past <em>index1</em>. The
information is returned in the following format: <em>key1 value1 index1
key2 value2 index2</em> ... The possible <em>key</em> values are
<strong>text</strong>, <strong>mark</strong>, <strong>tagon</strong>,
<strong>tagoff</strong>, and <em><code>$text</code></em>. The
corresponding <em>value</em> is the text, mark name, tag name, or window
name. The <em>index</em> information is the index of the start of the
text, the mark, the tag transition, or the window. One or more of the
following switches (or abbreviations thereof) may be specified to
control the dump:</p>
<dl>
<dt>-all</dt>
<dd>
<p>Return information about all elements: text, marks, tags, and
windows. This is the default.</p>
</dd>
<dt>-command =&gt; callback</dt>
<dd>
<p>Instead of returning the information as the result of the dump
operation, invoke the <em>callback</em> on each element of the text
widget within the range. The callback has three arguments appended to it
before it is evaluated: the <em>key</em>, <em>value</em>, and
<em>index</em>.</p>
</dd>
<dt>-mark</dt>
<dd>
<p>Include information about marks in the dump results.</p>
</dd>
<dt>-tag</dt>
<dd>
<p>Include information about tag transitions in the dump results. Tag
information is returned as <strong>tagon</strong> and
<strong>tagoff</strong> elements that indicate the begin and end of each
range of each tag, respectively.</p>
</dd>
<dt>-text</dt>
<dd>
<p>Include information about text in the dump results. The value is the
text up to the next element or the end of range indicated by
<em>index2</em>. A text element does not span newlines. A multi-line
block of text that contains no marks or tag transitions will still be
dumped as a set of text seqments that each end with a newline. The
newline is part of the value.</p>
</dd>
<dt>-window</dt>
<dd>

</dd>
</dl>
<p>Include information about embedded windows in the dump results. The
value of a window is its Tk pathname, unless the window has not been
created yet. (It must have a create script.) In this case an empty
string is returned, and you must query the window by its index position
to get more information.</p>
</dd>
<dt>$text-&gt;edit( option, ?arg, arg ...? );</dt>
<dd>
<p>This command controls the undo mechanism and the modified flag. The
exact behavior of the command depends on the option argument that
follows the edit argument. The following forms of the command are
currently supported:</p>
<dl>
<dt>$text-&gt;editModified( ?boolean? );</dt>
<dd>
<p>If boolean is not specified, returns the modified flag of the widget.
The insert, delete, edit undo and edit redo commands or the user can set
or clear the modified flag. If boolean is specified, sets the modified
flag of the widget to boolean.</p>
</dd>
<dt>$text-&gt;editRedo;</dt>
<dd>
<p>(Not implemented, use <strong>TextUndo</strong>.) When the
<strong>-undo</strong> option is true, reapplies the last undone edits
provided no other edits were done since then. Generates an error when
the redo stack is empty. Does nothing when the <strong>-undo</strong>
option is false.</p>
</dd>
<dt>$text-&gt;editReset;</dt>
<dd>
<p>(Not implemented, use <strong>TextUndo</strong>.) Clears the undo and
redo stacks.</p>
</dd>
<dt>$text-&gt;editSeparator;</dt>
<dd>
<p>(Not implemented, use <strong>TextUndo</strong>.) Inserts a separator
(boundary) on the undo stack. Does nothing when the -undo option is
false.</p>
</dd>
<dt>$text-&gt;editUndo;</dt>
<dd>
<p>(Not implemented, use <strong>TextUndo</strong>.) Undoes the last
edit action when the -undo option is true. An edit action is defined as
all the insert and delete commands that are recorded on the undo stack
in between two separators. Generates an error when the undo stack is
empty. Does nothing when the -undo option is false.</p>
</dd>
</dl>
</dd>
<dt>$text-&gt;FindAll(mode, case, pattern)</dt>
<dd>
<p>Removes any current selections and then performs a global text
search. All matches are tagged with the <strong>sel</strong> tag.
<em>mode</em> can be be <strong>-exact</strong> or
<strong>-regexp</strong>. See the <strong>search</strong> command for
more information <em>case</em> can be <strong>-nocase</strong> or
<strong>-case</strong>. See the <strong>search</strong> command for more
information <em>pattern</em> is an exact string to match if
<em>mode</em> is <strong>-exact</strong> or a regular expression if the
match <em>mode</em> is <strong>-regexp</strong>.</p>
</dd>
<dt>$text-&gt;FindAndReplaceAll(mode, case, find, replace)</dt>
<dd>
<p>Same as the <strong>FindAll</strong> method, however additionally
substitutes the matched text with the characters <em>replace</em>.</p>
</dd>
<dt>$text-&gt;FindAndReplacePopUp</dt>
<dd>
<p>Creates a find-and-replace popup window if one does not already
exist. If there is currently selected text, then the 'find' field will
be 'pre-filled' with the selection.</p>
</dd>
<dt>$text-&gt;FindNext(direction, mode, case, pattern)</dt>
<dd>
<p>Removes any current selections and then performs a forward or reverse
text search. All matches are tagged with the <strong>sel</strong> tag.
<em>direction</em> can be <strong>-forwards</strong> or
<strong>-backwards</strong>. <em>mode, case</em> and <em>pattern</em>
are as for the <strong>FindAll</strong> method.</p>
</dd>
<dt>$text-&gt;FindPopUp</dt>
<dd>
<p>Creates a find popup, if one does not yet exist. If there is
currently selected text, then the 'find' field will be 'pre-filled' with
the selection.</p>
</dd>
<dt>$text-&gt;FindSelectionNext</dt>
<dd>
<p>Gets the currently selected text and removes all selections. It then
finds the next exact, case-sensitive string that matches in a forward
direction and selects the text and makes the new selection visible.</p>
</dd>
<dt>$text-&gt;FindSelectionPrevious</dt>
<dd>
<p>Gets the currently selected text and removes all selections. It then
finds the next exact, case-sensitive string that matches in a reverse
direction and selects the text and makes the new selection visible.</p>
</dd>
<dt>$text-&gt;get(index1, ?index2?)</dt>
<dd>
<p>Return a range of characters from the text. The return value will be
all the characters in the text starting with the one whose index is
<em>index1</em> and ending just before the one whose index is
<em>index2</em> (the character at <em>index2</em> will not be returned).
If <em>index2</em> is omitted then the single character at
<em>index1</em> is returned. If there are no characters in the specified
range (e.g. <em>index1</em> is past the end of the file or
<em>index2</em> is less than or equal to <em>index1</em>) then an empty
string is returned. If the specified range contains embedded windows, no
information about them is included in the returned string. If multiple
index pairs are given, multiple ranges of text will be returned in a
list. Invalid ranges will not be represented with empty strings in the
list. The ranges are returned in the order passed to
<strong>get</strong>.</p>
</dd>
<dt>$text-&gt;getSelected</dt>
<dd>
<p>Return the currently selected text.</p>
</dd>
<dt>$text-&gt;GetTextTaggedWith(tag)</dt>
<dd>
<p>Return the text tagged with the <em>tag</em> parameter.</p>
</dd>
<dt>$text-&gt;GotoLineNumber(line_number)</dt>
<dd>
<p>Set the insert mark to <em>line_number</em> and ensures the line is
visible.</p>
</dd>
<dt>$text-&gt;GotoLineNumberPopUp(line_number)</dt>
<dd>
<p>Displays a popup, pre-filling it with selected numeric text (if any),
or the line number from <strong>GotoLineNumber</strong> (if any).</p>
</dd>
<dt>$text-&gt;image(option, ?arg, arg, ...?)</dt>
<dd>

</dd>
</dl>
<dl>
<dt>$text-&gt;imageOption(?arg, arg, ...?)</dt>
<dd>

</dd>
</dl>
<p>This method is used to manipulate embedded images. The behavior of
the method depends on the <em>option</em> argument that follows the
<strong>image</strong> prefix. The following forms of the methods are
currently supported:</p>
<blockquote>
<dl>
<dt>$text-&gt;imageCget(index, option)</dt>
<dd>
<p>Returns the value of a configuration option for an embedded image.
<em>Index</em> identifies the embedded image, and <em>option</em>
specifies a particular configuration option, which must be one of the
ones listed in EMBEDDED IMAGES.</p>
</dd>
<dt>$text-&gt;imageConfigure(index, ?option, value, ...?)</dt>
<dd>
<p>Query or modify the configuration options for an embedded image. If
no <em>option</em> is specified, returns a list describing all of the
available options for the embedded image at <em>index</em> (see
Tk::options for information on the format of this list). If
<em>option</em> is specified with no <em>value</em>, then the command
returns a list describing the one named option (this list will be
identical to the corresponding sublist of the value returned if no
<em>option</em> is specified). If one or more <em>option-value</em>
pairs are specified, then the command modifies the given option(s) to
have the given value(s); in this case the command returns an empty
string. See EMBEDDED IMAGES for information on the options that are
supported.</p>
</dd>
<dt>$text-&gt;imageCreate(index, ?option, value, ...?)</dt>
<dd>
<p>This command creates a new image annotation, which will appear in the
text at the position given by <em>index</em>. Any number of
<em>option-value</em> pairs may be specified to configure the
annotation. Returns a unique identifier that may be used as an index to
refer to this image. See EMBEDDED IMAGES for information on the options
that are supported, and a description of the identifier returned.</p>
</dd>
<dt>$text-&gt;imageNames</dt>
<dd>
<p>Returns a list whose elements are the names of all image instances
currently embedded in <code>$text</code>.</p>
</dd>
</dl>
</blockquote>
<blockquote>

</blockquote>
<dl>
<dt>$text-&gt;index(index)</dt>
<dd>
<p>Returns the position corresponding to <em>index</em> in the form
<em>line.char</em> where <em>line</em> is the line number and
<em>char</em> is the character number. <em>Index</em> may have any of
the forms described under INDICES above.</p>
</dd>
<dt>$text-&gt;insert(index, chars, ?tagList, chars, tagList, ...?)</dt>
<dd>
<p>Inserts all of the <em>chars</em> arguments just before the character
at <em>index</em>. If <em>index</em> refers to the end of the text (the
character after the last newline) then the new text is inserted just
before the last newline instead. If there is a single <em>chars</em>
argument and no <em>tagList</em>, then the new text will receive any
tags that are present on both the character before and the character
after the insertion point; if a tag is present on only one of these
characters then it will not be applied to the new text. If
<em>tagList</em> is specified then it consists of a list of tag names;
the new characters will receive all of the tags in this list and no
others, regardless of the tags present around the insertion point. If
multiple <em>chars</em>-<em>tagList</em> argument pairs are present,
they produce the same effect as if a separate <strong>insert</strong>
widget command had been issued for each pair, in order. The last
<em>tagList</em> argument may be omitted.</p>
</dd>
<dt>$text-&gt;Insert(string)</dt>
<dd>
<p>Do NOT confuse this with the lower-case <strong>insert</strong>
method. Insert <em>string</em> at the point of the insertion cursor. If
there is a selection in the text, and it covers the point of the
insertion cursor, then it deletes the selection before inserting.</p>
</dd>
<dt>$text-&gt;InsertKeypress(character)</dt>
<dd>
<p>Inserts <em>character</em> at the <strong>insert</strong> mark. If in
overstrike mode, it firsts deletes the character at the
<strong>insert</strong> mark.</p>
</dd>
<dt>$text-&gt;InsertSelection</dt>
<dd>
<p>Inserts the current selection at the <strong>insert</strong>
mark.</p>
</dd>
<dt>$text-&gt;insertTab</dt>
<dd>
<p>Inserts a tab (\t) character at the <strong>insert</strong> mark.</p>
</dd>
<dt>$text-&gt;mark(option, ?arg, arg, ...?)</dt>
<dd>
<p>This command is used to manipulate marks. The exact behavior of the
command depends on the <em>option</em> argument that follows the
<strong>mark</strong> argument. The following forms of the command are
currently supported:</p>
<dl>
<dt>$text-&gt;markGravity(markName, ?direction?)</dt>
<dd>
<p>If <em>direction</em> is not specified, returns <strong>left</strong>
or <strong>right</strong> to indicate which of its adjacent characters
<em>markName</em> is attached to. If <em>direction</em> is specified, it
must be <strong>left</strong> or <strong>right</strong>; the gravity of
<em>markName</em> is set to the given value.</p>
</dd>
<dt>$text-&gt;markNames</dt>
<dd>
<p>Returns a list whose elements are the names of all the marks that are
currently set.</p>
</dd>
<dt>$text-&gt;markNext(index)</dt>
<dd>
<p>Returns the name of the next mark at or after <em>index</em>. If
<em>index</em> is specified in numerical form, then the search for the
next mark begins at that index. If <em>index</em> is the name of a mark,
then the search for the next mark begins immediately after that mark.
This can still return a mark at the same position if there are multiple
marks at the same index. These semantics mean that the <strong>mark
next</strong> operation can be used to step through all the marks in a
text widget in the same order as the mark information returned by the
<strong>dump</strong> operation. If a mark has been set to the special
<strong>end</strong> index, then it appears to be <em>after</em>
<strong>end</strong> with respect to the <strong>mark next</strong>
operation. An empty string is returned if there are no marks after
<em>index</em>.</p>
</dd>
<dt>$text-&gt;markPrevious(index)</dt>
<dd>
<p>Returns the name of the mark at or before <em>index</em>. If
<em>index</em> is specified in numerical form, then the search for the
previous mark begins with the character just before that index. If
<em>index</em> is the name of a mark, then the search for the next mark
begins immediately before that mark. This can still return a mark at the
same position if there are multiple marks at the same index. These
semantics mean that the <strong>mark previous</strong> operation can be
used to step through all the marks in a text widget in the reverse order
as the mark information returned by the <strong>dump</strong> operation.
An empty string is returned if there are no marks before
<em>index</em>.</p>
</dd>
<dt>$text-&gt;markSet(markName, index)</dt>
<dd>
<p>Sets the mark named <em>markName</em> to a position just before the
character at <em>index</em>. If <em>markName</em> already exists, it is
moved from its old position; if it doesn't exist, a new mark is created.
This command returns an empty string.</p>
</dd>
<dt>$text-&gt;markUnset(markName?, markName, markName, ...?)</dt>
<dd>
<p>Remove the mark corresponding to each of the <em>markName</em>
arguments. The removed marks will not be usable in indices and will not
be returned by future calls to
``<em><code>$text</code></em>-&gt;<strong>markNames</strong>''. This
command returns an empty string.</p>
</dd>
</dl>
</dd>
<dt>$text-&gt;markExists(markname)</dt>
<dd>
<p>Returns true if <em>markname</em> exists - false otherwise.</p>
</dd>
<dt>$text-&gt;menu(?menu?)</dt>
<dd>
<p>If <em>menu</em> reference is given as an argument, then the text
widget menu is adjusted to use this new <em>menu</em>. If the
<em>menu</em> argument is <strong>undef</strong>, then this command
disables the current text widget menu. If the <em>menu</em> argument is
omitted altogether, then the current text widget menu reference is
returned.</p>
</dd>
<dt>$text-&gt;openLine</dt>
<dd>
<p>Inserts a newline (\n) at the insert mark.</p>
</dd>
<dt>$text-&gt;OverstrikeMode(?boolean?)</dt>
<dd>
<p>Returns the overstrike mode if <em>boolean</em> is omitted or sets
the overstrike mode to <em>boolean</em>. True means overstrike mode is
enabled.</p>
</dd>
<dt>$text-&gt;PostPopupMenu(x,y)</dt>
<dd>
<p>Creates a popup menu at the specified (<em>x,y</em>) pixel
coordinates. The default menu has File, Edit, Search and View menu items
which cascade to sub-menus for further commands. There is an implicit
&lt;Button-3&gt; binding to this method that posts the menu over the
cursor.</p>
</dd>
<dt>$text-&gt;ResetAnchor</dt>
<dd>
<p>Sets the selection anchor to whichever end is farthest from the index
argument.</p>
</dd>
<dt>$text-&gt;scan(option, args) or</dt>
<dd>

</dd>
</dl>
<dl>
<dt>$text-&gt;scanoption(args)</dt>
<dd>

</dd>
</dl>
<p>This method is used to implement scanning on texts. It has two forms,
depending on <em>option</em>:</p>
<blockquote>
<dl>
<dt>$text-&gt;scanMark(x, y)</dt>
<dd>
<p>Records <em>x</em> and <em>y</em> and the current view in the text
window, for use in conjunction with later <strong>scanDragto</strong>
method. Typically this method is associated with a mouse button press in
the widget. It returns an empty string.</p>
</dd>
<dt>$text-&gt;scanDragto(x, y)</dt>
<dd>
<p>This command computes the difference between its <em>x</em> and
<em>y</em> arguments and the <em>x</em> and <em>y</em> arguments to the
last <strong>scanMark</strong> method for the widget. It then adjusts
the view by 10 times the difference in coordinates. This command is
typically associated with mouse motion events in the widget, to produce
the effect of dragging the text at high speed through the window. The
return value is an empty string.</p>
</dd>
</dl>
</blockquote>
<blockquote>

</blockquote>
<dl>
<dt>$text-&gt;search(?switches,? pattern, index, ?stopIndex?)</dt>
<dd>
<p>Searches the text in <em><code>$text</code></em> starting at
<em>index</em> for a range of characters that matches <em>pattern</em>.
If a match is found, the index of the first character in the match is
returned as result; otherwise an empty string is returned. One or more
of the following switches (or abbreviations thereof) may be specified to
control the search:</p>
<dl>
<dt>-forwards</dt>
<dd>
<p>The search will proceed forward through the text, finding the first
matching range starting at or after the position given by
<em>index</em>. This is the default.</p>
</dd>
<dt>-backwards</dt>
<dd>
<p>The search will proceed backward through the text, finding the
matching range closest to <em>index</em> whose first character is before
<em>index</em>.</p>
</dd>
<dt>-exact</dt>
<dd>
<p>Use exact matching: the characters in the matching range must be
identical to those in <em>pattern</em>. This is the default.</p>
</dd>
<dt>-regexp</dt>
<dd>
<p>Treat <em>pattern</em> as a regular expression and match it against
the text using the rules for regular expressions (see the
<strong>regexp</strong> command for details).</p>
</dd>
<dt>-nocase</dt>
<dd>
<p>Ignore case differences between the pattern and the text.</p>
</dd>
<dt>-count varName</dt>
<dd>
<p>The argument following <strong>-count</strong> gives the name of a
variable; if a match is found, the number of characters in the matching
range will be stored in the variable.</p>
</dd>
<dt>-hidden</dt>
<dd>
<p>Find hidden text as well. By default only displayed text is
found.</p>
</dd>
<dt>--</dt>
<dd>
<p>This switch has no effect except to terminate the list of switches:
the next argument will be treated as <em>pattern</em> even if it starts
with <strong>-</strong>.</p>
</dd>
</dl>
</dd>
</dl>
<p>The matching range must be entirely within a single line of text. For
regular expression matching the newlines are removed from the ends of
the lines before matching: use the <strong>$</strong> feature in regular
expressions to match the end of a line. For exact matching the newlines
are retained. If <em>stopIndex</em> is specified, the search stops at
that index: for forward searches, no match at or after
<em>stopIndex</em> will be considered; for backward searches, no match
earlier in the text than <em>stopIndex</em> will be considered. If
<em>stopIndex</em> is omitted, the entire text will be searched: when
the beginning or end of the text is reached, the search continues at the
other end until the starting location is reached again; if
<em>stopIndex</em> is specified, no wrap-around will occur.</p>
<dl>
<dt>$text-&gt;see(index)</dt>
<dd>
<p>Adjusts the view in the window so that the character given by
<em>index</em> is completely visible. If <em>index</em> is already
visible then the command does nothing. If <em>index</em> is a short
distance out of view, the command adjusts the view just enough to make
<em>index</em> visible at the edge of the window. If <em>index</em> is
far out of view, then the command centers <em>index</em> in the
window.</p>
</dd>
<dt>$text-&gt;selectAll</dt>
<dd>
<p>Selects all the text in the widget.</p>
</dd>
<dt>$text-&gt;selectLine</dt>
<dd>
<p>Selects the line with the insert mark.</p>
</dd>
<dt>$text-&gt;selectWord</dt>
<dd>
<p>Selects the word with the insert mark.</p>
</dd>
<dt>$text-&gt;SetCursor(position)</dt>
<dd>
<p>Moves the insert mark to <em>position</em>.</p>
</dd>
<dt>$text-&gt;tag(option, ?arg, arg, ...?)</dt>
<dd>
<p>This command is used to manipulate tags. The exact behavior of the
command depends on the <em>option</em> argument that follows the
<strong>tag</strong> argument. The following forms of the command are
currently supported:</p>
<dl>
<dt>$text-&gt;tagAdd(tagName, index1, ?index2, index1, index2,
...?)</dt>
<dd>
<p>Associate the tag <em>tagName</em> with all of the characters
starting with <em>index1</em> and ending just before <em>index2</em>
(the character at <em>index2</em> isn't tagged). A single command may
contain any number of <em>index1</em>-<em>index2</em> pairs. If the last
<em>index2</em> is omitted then the single character at <em>index1</em>
is tagged. If there are no characters in the specified range (e.g.
<em>index1</em> is past the end of the file or <em>index2</em> is less
than or equal to <em>index1</em>) then the command has no effect.</p>
</dd>
<dt>$text-&gt;tagBind(tagName, ?sequence?, ?script?)</dt>
<dd>
<p>This command associates <em>script</em> with the tag given by
<em>tagName</em>. Whenever the event sequence given by <em>sequence</em>
occurs for a character that has been tagged with <em>tagName</em>, the
script will be invoked. This method is similar to the
<strong>bind</strong> command except that it operates on characters in a
text rather than entire widgets. See the Tk::bind documentation for
complete details on the syntax of <em>sequence</em> and the
substitutions performed on <em>script</em> before invoking it. If all
arguments are specified then a new binding is created, replacing any
existing binding for the same <em>sequence</em> and <em>tagName</em> (if
the first character of <em>script</em> is ``+'' then <em>script</em>
augments an existing binding rather than replacing it). In this case the
return value is an empty string. If <em>script</em> is omitted then the
command returns the <em>script</em> associated with <em>tagName</em> and
<em>sequence</em> (an error occurs if there is no such binding). If both
<em>script</em> and <em>sequence</em> are omitted then the command
returns a list of all the sequences for which bindings have been defined
for <em>tagName</em>. The only events for which bindings may be
specified are those related to the mouse and keyboard (such as
<strong>Enter</strong>, <strong>Leave</strong>,
<strong>ButtonPress</strong>, <strong>Motion</strong>, and
<strong>KeyPress</strong>) or virtual events. Event bindings for a text
widget use the <strong>current</strong> mark described under MARKS
above. An <strong>Enter</strong> event triggers for a tag when the tag
first becomes present on the current character, and a
<strong>Leave</strong> event triggers for a tag when it ceases to be
present on the current character. <strong>Enter</strong> and
<strong>Leave</strong> events can happen either because the
<strong>current</strong> mark moved or because the character at that
position changed. Note that these events are different than
<strong>Enter</strong> and <strong>Leave</strong> events for windows.
Mouse and keyboard events are directed to the current character. If a
virtual event is used in a binding, that binding can trigger only if the
virtual event is defined by an underlying mouse-related or
keyboard-related event. It is possible for the current character to have
multiple tags, and for each of them to have a binding for a particular
event sequence. When this occurs, one binding is invoked for each tag,
in order from lowest-priority to highest priority. If there are multiple
matching bindings for a single tag, then the most specific binding is
chosen (see the the documentation for the <strong>bind</strong> command
for details). <strong>continue</strong> and <strong>break</strong>
commands within binding scripts are processed in the same way as for
bindings created with the <strong>bind</strong> command. If bindings are
created for the widget as a whole using the <strong>bind</strong>
command, then those bindings will supplement the tag bindings. The tag
bindings will be invoked first, followed by bindings for the window as a
whole.</p>
</dd>
<dt>$text-&gt;tagCget(tagName, option)</dt>
<dd>
<p>This command returns the current value of the option named
<em>option</em> associated with the tag given by <em>tagName</em>.
<em>Option</em> may have any of the values accepted by the <strong>tag
configure</strong> method.</p>
</dd>
<dt>$text-&gt;tagConfigure(tagName, ?option?, ?value?, ?option, value,
...?)</dt>
<dd>
<p>This command is similar to the <strong>configure</strong> method
except that it modifies options associated with the tag given by
<em>tagName</em> instead of modifying options for the overall text
widget. If no <em>option</em> is specified, the command returns a list
describing all of the available options for <em>tagName</em> (see
Tk::options for information on the format of this list). If
<em>option</em> is specified with no <em>value</em>, then the command
returns a list describing the one named option (this list will be
identical to the corresponding sublist of the value returned if no
<em>option</em> is specified). If one or more <em>option-value</em>
pairs are specified, then the command modifies the given option(s) to
have the given value(s) in <em>tagName</em>; in this case the command
returns an empty string. See TAGS above for details on the options
available for tags.</p>
</dd>
<dt>$text-&gt;tagDelete(tagName, ?tagName, ...?)</dt>
<dd>
<p>Deletes all tag information for each of the <em>tagName</em>
arguments. The command removes the tags from all characters in the file
and also deletes any other information associated with the tags, such as
bindings and display information. The command returns an empty
string.</p>
</dd>
<dt>$text-&gt;tagLower(tagName?, belowThis?)</dt>
<dd>
<p>Changes the priority of tag <em>tagName</em> so that it is just lower
in priority than the tag whose name is <em>belowThis</em>. If
<em>belowThis</em> is omitted, then <em>tagName</em>'s priority is
changed to make it lowest priority of all tags.</p>
</dd>
<dt>$text-&gt;tagNames(?index?)</dt>
<dd>
<p>Returns a list whose elements are the names of all the tags that are
active at the character position given by <em>index</em>. If
<em>index</em> is omitted, then the return value will describe all of
the tags that exist for the text (this includes all tags that have been
named in a ``<em><code>$text</code></em>-&gt;<strong>tag</strong>''
widget command but haven't been deleted by a
``<em><code>$text</code></em>-&gt;<strong>tagDelete</strong>'' method,
even if no characters are currently marked with the tag). The list will
be sorted in order from lowest priority to highest priority.</p>
</dd>
<dt>$text-&gt;tagNextrange(tagName, index1, ?index2?)</dt>
<dd>
<p>This command searches the text for a range of characters tagged with
<em>tagName</em> where the first character of the range is no earlier
than the character at <em>index1</em> and no later than the character
just before <em>index2</em> (a range starting at <em>index2</em> will
not be considered). If several matching ranges exist, the first one is
chosen. The command's return value is a list containing two elements,
which are the index of the first character of the range and the index of
the character just after the last one in the range. If no matching range
is found then the return value is an empty string. If <em>index2</em> is
not given then it defaults to the end of the text.</p>
</dd>
<dt>$text-&gt;tagPrevrange(tagName, index1, ?index2?)</dt>
<dd>
<p>This command searches the text for a range of characters tagged with
<em>tagName</em> where the first character of the range is before the
character at <em>index1</em> and no earlier than the character at
<em>index2</em> (a range starting at <em>index2</em> will be
considered). If several matching ranges exist, the one closest to
<em>index1</em> is chosen. The command's return value is a list
containing two elements, which are the index of the first character of
the range and the index of the character just after the last one in the
range. If no matching range is found then the return value is an empty
string. If <em>index2</em> is not given then it defaults to the
beginning of the text.</p>
</dd>
<dt>$text-&gt;tagRaise(tagName, ?aboveThis?)</dt>
<dd>
<p>Changes the priority of tag <em>tagName</em> so that it is just
higher in priority than the tag whose name is <em>aboveThis</em>. If
<em>aboveThis</em> is omitted, then <em>tagName</em>'s priority is
changed to make it highest priority of all tags.</p>
</dd>
<dt>$text-&gt;tagRanges(tagName)</dt>
<dd>
<p>Returns a list describing all of the ranges of text that have been
tagged with <em>tagName</em>. The first two elements of the list
describe the first tagged range in the text, the next two elements
describe the second range, and so on. The first element of each pair
contains the index of the first character of the range, and the second
element of the pair contains the index of the character just after the
last one in the range. If there are no characters tagged with
<em>tag</em> then an empty string is returned.</p>
</dd>
<dt>$text-&gt;tagRemove(tagName, index1, ?index2, index1, index2,
...?)</dt>
<dd>
<p>Remove the tag <em>tagName</em> from all of the characters starting
at <em>index1</em> and ending just before <em>index2</em> (the character
at <em>index2</em> isn't affected). A single command may contain any
number of <em>index1</em>-<em>index2</em> pairs. If the last
<em>index2</em> is omitted then the single character at <em>index1</em>
is tagged. If there are no characters in the specified range (e.g.
<em>index1</em> is past the end of the file or <em>index2</em> is less
than or equal to <em>index1</em>) then the command has no effect. This
command returns an empty string.</p>
</dd>
</dl>
</dd>
<dt>$text-&gt;ToggleInsertMode</dt>
<dd>
<p>Toggles the current overstrike mode.</p>
</dd>
<dt>$text-&gt;unselectAll</dt>
<dd>
<p>Unselects all the text in the widget.</p>
</dd>
<dt>$text-&gt;WhatLineNumberPopup</dt>
<dd>
<p>Creates a popup that displays the current line number of the insert
mark.</p>
</dd>
<dt>$text-&gt;widget(option?, arg, arg, ...?)</dt>
<dd>

</dd>
</dl>
<dl>
<dt>$text-&gt;widgetOption(?arg, arg, ...?)</dt>
<dd>

</dd>
</dl>
<p>This method is used to manipulate embedded windows. The behavior of
the method depends on the <em>option</em> argument that follows the
<strong>window</strong> argument. The following forms of the method are
currently supported:</p>
<blockquote>
<dl>
<dt>$text-&gt;windowCget(index, option)</dt>
<dd>
<p>Returns the value of a configuration option for an embedded window.
<em>Index</em> identifies the embedded window, and <em>option</em>
specifies a particular configuration option, which must be one of the
ones listed in EMBEDDED WINDOWS above.</p>
</dd>
<dt>$text-&gt;windowConfigure(index?, option, value, ...?)</dt>
<dd>
<p>Query or modify the configuration options for an embedded window. If
no <em>option</em> is specified, returns a list describing all of the
available options for the embedded window at <em>index</em> (see
Tk::options for information on the format of this list). If
<em>option</em> is specified with no <em>value</em>, then the command
returns a list describing the one named option (this list will be
identical to the corresponding sublist of the value returned if no
<em>option</em> is specified). If one or more <em>option-value</em>
pairs are specified, then the command modifies the given option(s) to
have the given value(s); in this case the command returns an empty
string. See EMBEDDED WINDOWS above for information on the options that
are supported.</p>
</dd>
<dt>$text-&gt;windowCreate(index?, option, value, ...?)</dt>
<dd>
<p>This command creates a new window annotation, which will appear in
the text at the position given by <em>index</em>. Any number of
<em>option-value</em> pairs may be specified to configure the
annotation. See EMBEDDED WINDOWS above for information on the options
that are supported. Returns an empty string.</p>
</dd>
<dt>$text-&gt;windowNames</dt>
<dd>
<p>Returns a list whose elements are the names of all windows currently
embedded in <code>$text</code>.</p>
</dd>
</dl>
</blockquote>
<blockquote>

</blockquote>
<dl>
<dt>$text-&gt;xview(option, args)</dt>
<dd>
<p>This command is used to query and change the horizontal position of
the text in the widget's window. It can take any of the following
forms:</p>
<dl>
<dt>$text-&gt;xview</dt>
<dd>
<p>Returns a list containing two elements. Each element is a real
fraction between 0 and 1; together they describe the portion of the
document's horizontal span that is visible in the window. For example,
if the first element is .2 and the second element is .6, 20% of the text
is off-screen to the left, the middle 40% is visible in the window, and
40% of the text is off-screen to the right. The fractions refer only to
the lines that are actually visible in the window: if the lines in the
window are all very short, so that they are entirely visible, the
returned fractions will be 0 and 1, even if there are other lines in the
text that are much wider than the window. These are the same values
passed to scrollbars via the <strong>-xscrollcommand</strong>
option.</p>
</dd>
<dt>$text-&gt;xviewMoveto(fraction)</dt>
<dd>
<p>Adjusts the view in the window so that <em>fraction</em> of the
horizontal span of the text is off-screen to the left. <em>Fraction</em>
is a fraction between 0 and 1.</p>
</dd>
<dt>$text-&gt;xviewScroll(number, what)</dt>
<dd>
<p>This command shifts the view in the window left or right according to
<em>number</em> and <em>what</em>. <em>Number</em> must be an integer.
<em>What</em> must be either <strong>units</strong> or
<strong>pages</strong> or an abbreviation of one of these. If
<em>what</em> is <strong>units</strong>, the view adjusts left or right
by <em>number</em> average-width characters on the display; if it is
<strong>pages</strong> then the view adjusts by <em>number</em>
screenfuls. If <em>number</em> is negative then characters farther to
the left become visible; if it is positive then characters farther to
the right become visible.</p>
</dd>
</dl>
</dd>
<dt>$text-&gt;yview(?args?)</dt>
<dd>
<p>This command is used to query and change the vertical position of the
text in the widget's window. It can take any of the following forms:</p>
<dl>
<dt>$text-&gt;yview</dt>
<dd>
<p>Returns a list containing two elements, both of which are real
fractions between 0 and 1. The first element gives the position of the
first character in the top line in the window, relative to the text as a
whole (0.5 means it is halfway through the text, for example). The
second element gives the position of the character just after the last
one in the bottom line of the window, relative to the text as a whole.
These are the same values passed to scrollbars via the
<strong>-yscrollcommand</strong> option.</p>
</dd>
<dt>$text-&gt;yviewMoveto(fraction)</dt>
<dd>
<p>Adjusts the view in the window so that the character given by
<em>fraction</em> appears on the top line of the window.
<em>Fraction</em> is a fraction between 0 and 1; 0 indicates the first
character in the text, 0.33 indicates the character one-third the way
through the text, and so on.</p>
</dd>
<dt>$text-&gt;yviewScroll(number, what)</dt>
<dd>
<p>This command adjust the view in the window up or down according to
<em>number</em> and <em>what</em>. <em>Number</em> must be an integer.
<em>What</em> must be either <strong>units</strong> or
<strong>pages</strong>. If <em>what</em> is <strong>units</strong>, the
view adjusts up or down by <em>number</em> lines on the display; if it
is <strong>pages</strong> then the view adjusts by <em>number</em>
screenfuls. If <em>number</em> is negative then earlier positions in the
text become visible; if it is positive then later positions in the text
become visible.</p>
</dd>
<dt>$text-&gt;yview(?-pickplace,? index)</dt>
<dd>
<p>Changes the view in the <em><code>$text</code></em>'s window to make
<em>index</em> visible. If the <strong>-pickplace</strong> option isn't
specified then <em>index</em> will appear at the top of the window. If
<strong>-pickplace</strong> is specified then the widget chooses where
<em>index</em> appears in the window:</p>
<dl>
<dt>[1]</dt>
<dd>
<p>If <em>index</em> is already visible somewhere in the window then the
command does nothing.</p>
</dd>
<dt>[2]</dt>
<dd>
<p>If <em>index</em> is only a few lines off-screen above the window
then it will be positioned at the top of the window.</p>
</dd>
<dt>[3]</dt>
<dd>
<p>If <em>index</em> is only a few lines off-screen below the window
then it will be positioned at the bottom of the window.</p>
</dd>
<dt>[4]</dt>
<dd>
<p>Otherwise, <em>index</em> will be centered in the window.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>The <strong>-pickplace</strong> option has been obsoleted by the
<strong>see</strong> widget command (<strong>see</strong> handles both
x- and y-motion to make a location visible, whereas
<strong>-pickplace</strong> only handles motion in y).</p>
<dl>
<dt>$text-&gt;yview(number)</dt>
<dd>
<p>This command makes the first character on the line after the one
given by <em>number</em> visible at the top of the window.
<em>Number</em> must be an integer. This command used to be used for
scrolling, but now it is obsolete.</p>
</dd>
</dl>
<h1>BINDINGS</h1>
<p>Tk automatically creates class bindings for texts that give them the
following default behavior. In the descriptions below, ``word'' refers
to a contiguous group of letters, digits, or ``_'' characters, or any
single character other than these.</p>
<dl>
<dt>[1]</dt>
<dd>
<p>Clicking mouse button 1 positions the insertion cursor just before
the character underneath the mouse cursor, sets the input focus to this
widget, and clears any selection in the widget. Dragging with mouse
button 1 strokes out a selection between the insertion cursor and the
character under the mouse.</p>
</dd>
<dt>[2]</dt>
<dd>
<p>Double-clicking with mouse button 1 selects the word under the mouse
and positions the insertion cursor at the beginning of the word.
Dragging after a double click will stroke out a selection consisting of
whole words.</p>
</dd>
<dt>[3]</dt>
<dd>
<p>Triple-clicking with mouse button 1 selects the line under the mouse
and positions the insertion cursor at the beginning of the line.
Dragging after a triple click will stroke out a selection consisting of
whole lines.</p>
</dd>
<dt>[4]</dt>
<dd>
<p>The ends of the selection can be adjusted by dragging with mouse
button 1 while the Shift key is down; this will adjust the end of the
selection that was nearest to the mouse cursor when button 1 was
pressed. If the button is double-clicked before dragging then the
selection will be adjusted in units of whole words; if it is
triple-clicked then the selection will be adjusted in units of whole
lines.</p>
</dd>
<dt>[5]</dt>
<dd>
<p>Clicking mouse button 1 with the Control key down will reposition the
insertion cursor without affecting the selection.</p>
</dd>
<dt>[6]</dt>
<dd>
<p>If any normal printing characters are typed, they are inserted at the
point of the insertion cursor.</p>
</dd>
<dt>[7]</dt>
<dd>
<p>The view in the widget can be adjusted by dragging with mouse button
2. If mouse button 2 is clicked without moving the mouse, the selection
is copied into the text at the position of the mouse cursor. The Insert
key also inserts the selection, but at the position of the insertion
cursor.</p>
</dd>
<dt>[8]</dt>
<dd>
<p>If the mouse is dragged out of the widget while button 1 is pressed,
the entry will automatically scroll to make more text visible (if there
is more text off-screen on the side where the mouse left the
window).</p>
</dd>
<dt>[9]</dt>
<dd>
<p>The Left and Right keys move the insertion cursor one character to
the left or right; they also clear any selection in the text. If Left or
Right is typed with the Shift key down, then the insertion cursor moves
and the selection is extended to include the new character. Control-Left
and Control-Right move the insertion cursor by words, and
Control-Shift-Left and Control-Shift-Right move the insertion cursor by
words and also extend the selection. Control-b and Control-f behave the
same as Left and Right, respectively. Meta-b and Meta-f behave the same
as Control-Left and Control-Right, respectively.</p>
</dd>
<dt>[10]</dt>
<dd>
<p>The Up and Down keys move the insertion cursor one line up or down
and clear any selection in the text. If Up or Right is typed with the
Shift key down, then the insertion cursor moves and the selection is
extended to include the new character. Control-Up and Control-Down move
the insertion cursor by paragraphs (groups of lines separated by blank
lines), and Control-Shift-Up and Control-Shift-Down move the insertion
cursor by paragraphs and also extend the selection. Control-p and
Control-n behave the same as Up and Down, respectively.</p>
</dd>
<dt>[11]</dt>
<dd>
<p>The Next and Prior keys move the insertion cursor forward or
backwards by one screenful and clear any selection in the text. If the
Shift key is held down while Next or Prior is typed, then the selection
is extended to include the new character. Control-v moves the view down
one screenful without moving the insertion cursor or adjusting the
selection.</p>
</dd>
<dt>[12]</dt>
<dd>
<p>Control-Next and Control-Prior scroll the view right or left by one
page without moving the insertion cursor or affecting the selection.</p>
</dd>
<dt>[13]</dt>
<dd>
<p>Home and Control-a move the insertion cursor to the beginning of its
line and clear any selection in the widget. Shift-Home moves the
insertion cursor to the beginning of the line and also extends the
selection to that point.</p>
</dd>
<dt>[14]</dt>
<dd>
<p>End and Control-e move the insertion cursor to the end of the line
and clear any selection in the widget. Shift-End moves the cursor to the
end of the line and extends the selection to that point.</p>
</dd>
<dt>[15]</dt>
<dd>
<p>Control-Home and Meta-&lt; move the insertion cursor to the beginning
of the text and clear any selection in the widget. Control-Shift-Home
moves the insertion cursor to the beginning of the text and also extends
the selection to that point.</p>
</dd>
<dt>[16]</dt>
<dd>
<p>Control-End and Meta-&gt; move the insertion cursor to the end of the
text and clear any selection in the widget. Control-Shift-End moves the
cursor to the end of the text and extends the selection to that
point.</p>
</dd>
<dt>[17]</dt>
<dd>
<p>The Select key and Control-Space set the selection anchor to the
position of the insertion cursor. They don't affect the current
selection. Shift-Select and Control-Shift-Space adjust the selection to
the current position of the insertion cursor, selecting from the anchor
to the insertion cursor if there was not any selection previously.</p>
</dd>
<dt>[18]</dt>
<dd>
<p>Control-/ selects the entire contents of the widget.</p>
</dd>
<dt>[19]</dt>
<dd>
<p>Control-\ clears any selection in the widget.</p>
</dd>
<dt>[20]</dt>
<dd>
<p>The F16 key (labelled Copy on many Sun workstations) or Meta-w copies
the selection in the widget to the clipboard, if there is a
selection.</p>
</dd>
<dt>[21]</dt>
<dd>
<p>The F20 key (labelled Cut on many Sun workstations) or Control-w
copies the selection in the widget to the clipboard and deletes the
selection. If there is no selection in the widget then these keys have
no effect.</p>
</dd>
<dt>[22]</dt>
<dd>
<p>The F18 key (labelled Paste on many Sun workstations) or Control-y
inserts the contents of the clipboard at the position of the insertion
cursor.</p>
</dd>
<dt>[23]</dt>
<dd>
<p>The Delete key deletes the selection, if there is one in the widget.
If there is no selection, it deletes the character to the right of the
insertion cursor.</p>
</dd>
<dt>[24]</dt>
<dd>
<p>Backspace and Control-h delete the selection, if there is one in the
widget. If there is no selection, they delete the character to the left
of the insertion cursor.</p>
</dd>
<dt>[25]</dt>
<dd>
<p>Control-d deletes the character to the right of the insertion
cursor.</p>
</dd>
<dt>[26]</dt>
<dd>
<p>Meta-d deletes the word to the right of the insertion cursor.</p>
</dd>
<dt>[27]</dt>
<dd>
<p>Control-k deletes from the insertion cursor to the end of its line;
if the insertion cursor is already at the end of a line, then Control-k
deletes the newline character.</p>
</dd>
<dt>[28]</dt>
<dd>
<p>Control-o opens a new line by inserting a newline character in front
of the insertion cursor without moving the insertion cursor.</p>
</dd>
<dt>[29]</dt>
<dd>
<p>Meta-backspace and Meta-Delete delete the word to the left of the
insertion cursor.</p>
</dd>
<dt>[30]</dt>
<dd>
<p>Control-x deletes whatever is selected in the text widget.</p>
</dd>
<dt>[31]</dt>
<dd>
<p>Control-t reverses the order of the two characters to the right of
the insertion cursor.</p>
</dd>
<dt>[32]</dt>
<dd>
<p>Control-z (and Control-underscore on UNIX when tk_strictMotif is
true) undoes the last edit action if the -undo option is true. Does
nothing otherwise.</p>
</dd>
<dt>[33]</dt>
<dd>
<p>Control-Z (or Control-y on Windows) reapplies the last undone edit
action if the -undo option is true. Does nothing otherwise.</p>
</dd>
</dl>
<p>If the widget is disabled using the <strong>-state</strong> option,
then its view can still be adjusted and text can still be selected, but
no insertion cursor will be displayed and no text modifications will
take place.</p>
<p>The behavior of texts can be changed by defining new bindings for
individual widgets or by redefining the class bindings.</p>
<h1>TIED INTERFACE</h1>
<p>The Perl/Tk Text widget also has built-in TIEHANDLE methods for
<strong>print</strong> and <strong>printf</strong> statements. This
means you can print to file handles tied to a Text widget, and the tied
methods automatically insert the print statement's arguments into the
Text widget.</p>
<p>For example:</p>
<p>#!/usr/local/bin/perl -w use POSIX acos; use Tk; use strict; my $mw =
MainWindow-&gt;new; my $text = $mw-&gt;Text(qw/-width 40 -height
10/)-&gt;pack; tie *STDOUT, ref $text, $text; print "Hello Text
World!\n"; printf "pi ~= %1.5f", acos(-1.0); MainLoop;</p>
<p>To tie a scrolled Text widget, use the Subwidget method to get to the
real widget:</p>
<p>my $text = $mw-&gt;Scrolled(Text)-&gt;pack; tie *STDOUT, Tk::Text,
$text-&gt;Subwidget(scrolled);</p>
<h1>PERFORMANCE ISSUES</h1>
<p>Text widgets should run efficiently under a variety of conditions.
The text widget uses about 2-3 bytes of main memory for each byte of
text, so texts containing a megabyte or more should be practical on most
workstations. Text is represented internally with a modified B-tree
structure that makes operations relatively efficient even with large
texts. Tags are included in the B-tree structure in a way that allows
tags to span large ranges or have many disjoint smaller ranges without
loss of efficiency. Marks are also implemented in a way that allows
large numbers of marks. In most cases it is fine to have large numbers
of unique tags, or a tag that has many distinct ranges.</p>
<p>One performance problem can arise if you have hundreds or thousands
of different tags that all have the following characteristics: the first
and last ranges of each tag are near the beginning and end of the text,
respectively, or a single tag range covers most of the text widget. The
cost of adding and deleting tags like this is proportional to the number
of other tags with the same properties. In contrast, there is no problem
with having thousands of distinct tags if their overall ranges are
localized and spread uniformly throughout the text.</p>
<p>Very long text lines can be expensive, especially if they have many
marks and tags within them.</p>
<p>The display line with the insert cursor is redrawn each time the
cursor blinks, which causes a steady stream of graphics traffic. Set the
<strong>-insertofftime</strong> option to 0 avoid this.</p>
<h1>SEE ALSO</h1>
<p>Tk::ROText Tk::TextUndo</p>
<h1>KEYWORDS</h1>
<p>text, widget</p>
