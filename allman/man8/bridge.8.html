<link rel='stylesheet' href='../style.css'>
<script src='../script.js'></script>
<h1>NAME</h1>
<p>bridge - show / manipulate bridge addresses and devices</p>
<h1>SYNOPSIS</h1>
<p><strong>bridge</strong> [ <em>OPTIONS</em> ] <em>OBJECT</em> {
<em>COMMAND</em> | <strong>help</strong> }</p>
<p><em>OBJECT</em> := { <strong>link</strong> | <strong>fdb</strong> |
<strong>mdb</strong> | <strong>vlan</strong> | <strong>vni</strong> |
<strong>monitor</strong> }</p>
<p><em>OPTIONS</em> := { <strong>-V</strong>[<em>ersion</em>] |
<strong>-s</strong>[<em>tatistics</em>] |
<strong>-n</strong>[<em>etns</em>] name |
<strong>-b</strong>[<em>atch</em>] filename |
<strong>-c</strong>[<em>olor</em>] | <strong>-p</strong>[<em>retty</em>]
| <strong>-j</strong>[<em>son</em>] |
<strong>-o</strong>[<em>neline</em>] }</p>
<p><strong>bridge link set</strong> <strong>dev</strong> <em>DEV</em> [
<strong>cost</strong> <em>COST</em> ] [ <strong>priority</strong>
<em>PRIO</em> ] [ <strong>state</strong> <em>STATE</em> ] [
<strong>guard</strong> { <strong>on</strong> | <strong>off</strong> } ]
[ <strong>hairpin</strong> { <strong>on</strong> | <strong>off</strong>
} ] [ <strong>fastleave</strong> { <strong>on</strong> |
<strong>off</strong> } ] [ <strong>root_block</strong> {
<strong>on</strong> | <strong>off</strong> } ] [
<strong>learning</strong> { <strong>on</strong> | <strong>off</strong> }
] [ <strong>learning_sync</strong> { <strong>on</strong> |
<strong>off</strong> } ] [ <strong>flood</strong> { <strong>on</strong>
| <strong>off</strong> } ] [ <strong>hwmode</strong> {
<strong>vepa</strong> | <strong>veb</strong> } ] [
<strong>bcast_flood</strong> { <strong>on</strong> |
<strong>off</strong> } ] [ <strong>mcast_flood</strong> {
<strong>on</strong> | <strong>off</strong> } ] [
<strong>mcast_router</strong> <em>MULTICAST_ROUTER</em> ] [
<strong>mcast_to_unicast</strong> { <strong>on</strong> |
<strong>off</strong> } ] [ <strong>neigh_suppress</strong> {
<strong>on</strong> | <strong>off</strong> } ] [
<strong>vlan_tunnel</strong> { <strong>on</strong> |
<strong>off</strong> } ] [ <strong>isolated</strong> {
<strong>on</strong> | <strong>off</strong> } ] [ <strong>locked</strong>
{ <strong>on</strong> | <strong>off</strong> } ] [
<strong>backup_port</strong> <em>DEVICE</em> ] [
<strong>nobackup_port</strong> ] [ <strong>self</strong> ] [
<strong>master</strong> ]</p>
<p><strong>bridge link</strong> [ <strong>show</strong> ] [
<strong>dev</strong> <em>DEV</em> ]</p>
<p><strong>bridge fdb</strong> { <strong>add</strong> |
<strong>append</strong> | <strong>del</strong> |
<strong>replace</strong> } <em>LLADDR</em> <strong>dev</strong>
<em>DEV</em> { <strong>local</strong> | <strong>static</strong> |
<strong>dynamic</strong> } [ <strong>self</strong> ] [
<strong>master</strong> ] [ <strong>router</strong> ] [
<strong>use</strong> ] [ <strong>extern_learn</strong> ] [
<strong>sticky</strong> ] [ <strong>src_vni</strong> <em>VNI</em> ] { [
<strong>dst</strong> <em>IPADDR</em> ] [ <strong>vni</strong>
<em>VNI</em> ] [ <strong>port</strong> <em>PORT</em> ] [
<strong>via</strong> <em>DEVICE</em> ] | <strong>nhid</strong>
<em>NHID</em> }</p>
<p><strong>bridge fdb</strong> [ [ <strong>show</strong> ] [
<strong>br</strong> <em>BRDEV</em> ] [ <strong>brport</strong>
<em>DEV</em> ] [ <strong>vlan</strong> <em>VID</em> ] [
<strong>state</strong> <em>STATE</em> ] [ <strong>dynamic</strong> <em>]
]</em></p>
<p><strong>bridge fdb get</strong> [ <strong>to</strong> <em>]</em>
<em>LLADDR [</em> <strong>br</strong> <em>BRDEV</em> ] <strong>{ brport
| dev }</strong> <em>DEV</em> [ <strong>vlan</strong> <em>VID</em> ] [
<strong>vni</strong> <em>VNI</em> ] [ <strong>self</strong> ] [
<strong>master</strong> ] [ <strong>dynamic</strong> ]</p>
<p><strong>bridge fdb flush</strong> <strong>dev</strong> <em>DEV</em> [
<strong>brport</strong> <em>DEV</em> ] [ <strong>vlan</strong>
<em>VID</em> ] [ <strong>self</strong> ] [ <strong>master</strong> ] [
<strong>[no]permanent</strong> | <strong>[no]static</strong> |
<strong>[no]dynamic</strong> ] [ <strong>[no]added_by_user</strong> ] [
<strong>[no]extern_learn</strong> ] [ <strong>[no]sticky</strong> ] [
<strong>[no]offloaded</strong> ]</p>
<p><strong>bridge mdb</strong> { <strong>add</strong> |
<strong>del</strong> } <strong>dev</strong> <em>DEV</em>
<strong>port</strong> <em>PORT</em> <strong>grp</strong> <em>GROUP</em>
[ <strong>src</strong> <em>SOURCE</em> ] [ <strong>permanent</strong> |
<strong>temp</strong> ] [ <strong>vid</strong> <em>VID</em> ]</p>
<p><strong>bridge mdb show</strong> [ <strong>dev</strong> <em>DEV</em>
]</p>
<p><strong>bridge vlan</strong> { <strong>add</strong> |
<strong>del</strong> } <strong>dev</strong> <em>DEV</em>
<strong>vid</strong> <em>VID</em> [ <strong>tunnel_info</strong>
<em>TUNNEL_ID</em> ] [ <strong>pvid</strong> ] [
<strong>untagged</strong> ] [ <strong>self</strong> ] [
<strong>master</strong> ]</p>
<p><strong>bridge vlan set</strong> <strong>dev</strong> <em>DEV</em>
<strong>vid</strong> <em>VID</em> [ <strong>state</strong>
<em>STP_STATE</em> ] [ <strong>mcast_router</strong>
<em>MULTICAST_ROUTER</em> ]</p>
<p><strong>bridge vlan</strong> [ <strong>show</strong> |
<strong>tunnelshow</strong> ] [ <strong>dev</strong> <em>DEV</em> ]</p>
<p><strong>bridge vlan global set</strong> <strong>dev</strong>
<em>DEV</em> <strong>vid</strong> <em>VID</em> [
<strong>mcast_snooping</strong> <em>MULTICAST_SNOOPING</em> ] [
<strong>mcast_querier</strong> <em>MULTICAST_QUERIER</em> ] [
<strong>mcast_igmp_version</strong> <em>IGMP_VERSION</em> ] [
<strong>mcast_mld_version</strong> <em>MLD_VERSION</em> ] [
<strong>mcast_last_member_count</strong> <em>LAST_MEMBER_COUNT</em> ] [
<strong>mcast_last_member_interval</strong>
<em>LAST_MEMBER_INTERVAL</em> ] [
<strong>mcast_startup_query_count</strong> <em>STARTUP_QUERY_COUNT</em>
] [ <strong>mcast_startup_query_interval</strong>
<em>STARTUP_QUERY_INTERVAL</em> ] [
<strong>mcast_membership_interval</strong> <em>MEMBERSHIP_INTERVAL</em>
] [ <strong>mcast_querier_interval</strong> <em>QUERIER_INTERVAL</em> ]
[ <strong>mcast_query_interval</strong> <em>QUERY_INTERVAL</em> ] [
<strong>mcast_query_response_interval</strong>
<em>QUERY_RESPONSE_INTERVAL</em> ]</p>
<p><strong>bridge vlan global</strong> [ <strong>show</strong> ] [
<strong>dev</strong> <em>DEV</em> ] [ <strong>vid</strong> <em>VID</em>
]</p>
<p><strong>bridge vlan</strong> show <strong>[</strong>"
<strong>dev</strong> <em>DEV</em> ]</p>
<p><strong>bridge vni</strong> { <strong>add</strong> |
<strong>del</strong> } <strong>dev</strong> <em>DEV</em>
<strong>vni</strong> <em>VNI</em> [ { <strong>group | remote }</strong>
<em>IPADDR</em> ]</p>
<p><strong>bridge vni</strong> show <strong>[</strong>"
<strong>dev</strong> <em>DEV</em> ]</p>
<p><strong>bridge monitor</strong> [ <strong>all</strong> |
<strong>neigh</strong> | <strong>link</strong> | <strong>mdb</strong> |
<strong>vlan</strong> ]</p>
<h1>OPTIONS</h1>
<dl>
<dt><strong>-V</strong>,<strong> -Version</strong></dt>
<dd>
<p>print the version of the <strong>bridge</strong> utility and
exit.</p>
</dd>
</dl>
<dl>
<dt><strong>-s</strong>,<strong> -stats</strong>,<strong>
-statistics</strong></dt>
<dd>
<p>output more information. If this option is given multiple times, the
amount of information increases. As a rule, the information is
statistics or some time values.</p>
</dd>
</dl>
<dl>
<dt><strong>-d</strong>,<strong> -details</strong></dt>
<dd>
<p>print detailed information about bridge vlan filter entries or MDB
router ports.</p>
</dd>
</dl>
<dl>
<dt><strong>-n</strong>,<strong> -net</strong>,<strong> -netns
</strong>&lt;NETNS&gt;</dt>
<dd>
<p>switches <strong>bridge</strong> to the specified network namespace
<em>NETNS</em>. Actually it just simplifies executing of:</p>
<p><strong>ip netns exec</strong> <em>NETNS</em> <strong>bridge</strong>
[ <em>OPTIONS</em> ] <em>OBJECT</em> { <em>COMMAND</em> |
<strong>help</strong> }</p>
<p>to</p>
<p><strong>bridge</strong> -n[etns] <em>NETNS</em> [ <em>OPTIONS</em> ]
<em>OBJECT</em> { <em>COMMAND</em> | <strong>help</strong> }</p>
</dd>
</dl>
<dl>
<dt><strong>-b</strong>,<strong> -batch </strong>&lt;FILENAME&gt;</dt>
<dd>
<p>Read commands from provided file or standard input and invoke them.
First failure will cause termination of bridge command.</p>
</dd>
</dl>
<dl>
<dt><strong>-force</strong></dt>
<dd>
<p>Don't terminate bridge command on errors in batch mode. If there were
any errors during execution of the commands, the application return code
will be non zero.</p>
</dd>
</dl>
<dl>
<dt><strong>-c</strong>[<strong>color</strong>][<strong>=</strong>{<strong>always</strong>|<strong>auto</strong>|<strong>never</strong>}</dt>
<dd>
<p>Configure color output. If parameter is omitted or
<strong>always</strong>, color output is enabled regardless of stdout
state. If parameter is <strong>auto</strong>, stdout is checked to be a
terminal before enabling color output. If parameter is
<strong>never</strong>, color output is disabled. If specified multiple
times, the last one takes precedence. This flag is ignored if
<strong>-json</strong> is also given.</p>
</dd>
</dl>
<dl>
<dt><strong>-j</strong>,<strong> -json</strong></dt>
<dd>
<p>Output results in JavaScript Object Notation (JSON).</p>
</dd>
</dl>
<dl>
<dt><strong>-p</strong>,<strong> -pretty</strong></dt>
<dd>
<p>When combined with -j generate a pretty JSON output.</p>
</dd>
</dl>
<dl>
<dt><strong>-o</strong>,<strong> -oneline</strong></dt>
<dd>
<p>output each record on a single line, replacing line feeds with the
<strong>'\'</strong> character. This is convenient when you want to
count records with <strong>wc</strong>(1) or to <strong>grep</strong>(1)
the output.</p>
</dd>
</dl>
<h1>BRIDGE - COMMAND SYNTAX</h1>
<h2></h2>
<p><em>OBJECT</em></p>
<dl>
<dt><strong>link</strong></dt>
<dd>
<p>- Bridge port.</p>
</dd>
</dl>
<dl>
<dt><strong>fdb</strong></dt>
<dd>
<p>- Forwarding Database entry.</p>
</dd>
</dl>
<dl>
<dt><strong>mdb</strong></dt>
<dd>
<p>- Multicast group database entry.</p>
</dd>
</dl>
<dl>
<dt><strong>vlan</strong></dt>
<dd>
<p>- VLAN filter list.</p>
</dd>
</dl>
<dl>
<dt><strong>vni</strong></dt>
<dd>
<p>- VNI filter list.</p>
</dd>
</dl>
<h2></h2>
<p><em>COMMAND</em></p>
<p>Specifies the action to perform on the object. The set of possible
actions depends on the object type. As a rule, it is possible to
<strong>add</strong>,<strong> delete</strong> and <strong>show</strong>
(or <strong>list</strong> ) objects, but some objects do not allow all
of these operations or have some additional commands. The
<strong>help</strong> command is available for all objects. It prints
out a list of available commands and argument syntax conventions.</p>
<p>If no command is given, some default command is assumed. Usually it
is <strong>list</strong> or, if the objects of this class cannot be
listed, <strong>help</strong>.</p>
<h1>bridge link - bridge port</h1>
<p><strong>link</strong> objects correspond to the port devices of the
bridge.</p>
<p>The corresponding commands set and display port status and bridge
specific attributes.</p>
<h2>bridge link set - set bridge specific attributes on a port</h2>
<dl>
<dt><strong>dev</strong><em> NAME </em></dt>
<dd>
<p>interface name of the bridge port</p>
</dd>
</dl>
<dl>
<dt><strong>cost</strong><em> COST </em></dt>
<dd>
<p>the STP path cost of the specified port.</p>
</dd>
</dl>
<dl>
<dt><strong>priority</strong><em> PRIO </em></dt>
<dd>
<p>the STP port priority. The priority value is an unsigned 8-bit
quantity (number between 0 and 255). This metric is used in the
designated port an droot port selection algorithms.</p>
</dd>
</dl>
<dl>
<dt><strong>state</strong><em> STATE </em></dt>
<dd>
<p>the operation state of the port. Except state 0 (disable STP or BPDU
filter feature), this is primarily used by user space STP/RSTP
implementation. One may enter port state name (case insensitive), or one
of the numbers below. Negative inputs are ignored, and unrecognized
names return an error.</p>
<p><strong>0</strong> - port is in STP <strong>DISABLED</strong> state.
Make this port completely inactive for STP. This is also called BPDU
filter and could be used to disable STP on an untrusted port, like a
leaf virtual devices.</p>
</dd>
</dl>
<p><strong>1</strong> - port is in STP <strong>LISTENING</strong> state.
Only valid if STP is enabled on the bridge. In this state the port
listens for STP BPDUs and drops all other traffic frames.</p>
<p><strong>2</strong> - port is in STP <strong>LEARNING</strong> state.
Only valid if STP is enabled on the bridge. In this state the port will
accept traffic only for the purpose of updating MAC address tables.</p>
<p><strong>3</strong> - port is in STP <strong>FORWARDING</strong>
state. Port is fully active.</p>
<p><strong>4</strong> - port is in STP <strong>BLOCKING</strong> state.
Only valid if STP is enabled on the bridge. This state is used during
the STP election process. In this state, port will only process STP
BPDUs.</p>
<dl>
<dt><strong>guard on </strong>or<strong> guard off </strong></dt>
<dd>
<p>Controls whether STP BPDUs will be processed by the bridge port. By
default, the flag is turned off allowed BPDU processing. Turning this
flag on will disables the bridge port if a STP BPDU packet is
received.</p>
<p>If running Spanning Tree on bridge, hostile devices on the network
may send BPDU on a port and cause network failure. Setting <strong>guard
on</strong> will detect and stop this by disabling the port. The port
will be restarted if link is brought down, or removed and reattached.
For example if guard is enable on eth0:</p>
<p><strong>ip link set dev eth0 down; ip link set dev eth0
up</strong></p>
</dd>
</dl>
<dl>
<dt><strong>hairpin on </strong>or<strong> hairpin off </strong></dt>
<dd>
<p>Controls whether traffic may be send back out of the port on which it
was received. This option is also called reflective relay mode, and is
used to support basic VEPA (Virtual Ethernet Port Aggregator)
capabilities. By default, this flag is turned off and the bridge will
not forward traffic back out of the receiving port.</p>
</dd>
</dl>
<dl>
<dt><strong>fastleave on </strong>or<strong> fastleave off
</strong></dt>
<dd>
<p>This flag allows the bridge to immediately stop multicast traffic on
a port that receives IGMP Leave message. It is only used with IGMP
snooping is enabled on the bridge. By default the flag is off.</p>
</dd>
</dl>
<dl>
<dt><strong>root_block on </strong>or<strong> root_block off
</strong></dt>
<dd>
<p>Controls whether a given port is allowed to become root port or not.
Only used when STP is enabled on the bridge. By default the flag is
off.</p>
<p>This feature is also called root port guard. If BPDU is received from
a leaf (edge) port, it should not be elected as root port. This could be
used if using STP on a bridge and the downstream bridges are not fully
trusted; this prevents a hostile guest from rerouting traffic.</p>
</dd>
</dl>
<dl>
<dt><strong>learning on </strong>or<strong> learning off </strong></dt>
<dd>
<p>Controls whether a given port will learn MAC addresses from received
traffic or not. If learning if off, the bridge will end up flooding any
traffic for which it has no FDB entry. By default this flag is on.</p>
</dd>
</dl>
<dl>
<dt><strong>learning_sync on </strong>or<strong> learning_sync off
</strong></dt>
<dd>
<p>Controls whether a given port will sync MAC addresses learned on
device port to bridge FDB.</p>
</dd>
</dl>
<dl>
<dt><strong>flood on </strong>or<strong> flood off </strong></dt>
<dd>
<p>Controls whether unicast traffic for which there is no FDB entry will
be flooded towards this given port. By default this flag is on.</p>
</dd>
</dl>
<dl>
<dt><strong>hwmode</strong></dt>
<dd>
<p>Some network interface cards support HW bridge functionality and they
may be configured in different modes. Currently support modes are:</p>
<p><strong>vepa</strong> - Data sent between HW ports is sent on the
wire to the external switch.</p>
<p><strong>veb</strong> - bridging happens in hardware.</p>
</dd>
</dl>
<dl>
<dt><strong>bcast_flood on </strong>or<strong> bcast_flood off
</strong></dt>
<dd>
<p>Controls flooding of broadcast traffic on the given port. By default
this flag is on.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_flood on </strong>or<strong> mcast_flood off
</strong></dt>
<dd>
<p>Controls whether multicast traffic for which there is no MDB entry
will be flooded towards this given port. By default this flag is on.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_router</strong><em> MULTICAST_ROUTER </em></dt>
<dd>
<p>This flag is almost the same as the per-VLAN flag, see below, except
its value can only be set in the range 0-2. The default is
<strong>1</strong> where the bridge figures out automatically where an
IGMP/MLD querier, MRDISC capable device, or PIM router, is located.
Setting this flag to <strong>2</strong> is useful in cases where the
multicast router does not indicate its presence in any meaningful way
(e.g. older versions of SMCRoute, or mrouted), or when there is a need
for forwarding both known and unknown IP multicast to a secondary/backup
router.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_to_unicast on </strong>or<strong> mcast_to_unicast off
</strong></dt>
<dd>
<p>Controls whether a given port will replicate packets using unicast
instead of multicast. By default this flag is off.</p>
<p>This is done by copying the packet per host and changing the
multicast destination MAC to a unicast one accordingly.</p>
<p><strong>mcast_to_unicast</strong> works on top of the multicast
snooping feature of the bridge. Which means unicast copies are only
delivered to hosts which are interested in it and signalized this via
IGMP/MLD reports previously.</p>
<p>This feature is intended for interface types which have a more
reliable and/or efficient way to deliver unicast packets than broadcast
ones (e.g. WiFi).</p>
<p>However, it should only be enabled on interfaces where no
IGMPv2/MLDv1 report suppression takes place. IGMP/MLD report suppression
issue is usually overcome by the network daemon (supplicant) enabling AP
isolation and by that separating all STAs.</p>
<p>Delivery of STA-to-STA IP multicast is made possible again by
enabling and utilizing the bridge hairpin mode, which considers the
incoming port as a potential outgoing port, too (see
<strong>hairpin</strong> option). Hairpin mode is performed after
multicast snooping, therefore leading to only deliver reports to STAs
running a multicast router.</p>
</dd>
</dl>
<dl>
<dt><strong>neigh_suppress on </strong>or<strong> neigh_suppress off
</strong></dt>
<dd>
<p>Controls whether neigh discovery (arp and nd) proxy and suppression
is enabled on the port. By default this flag is off.</p>
</dd>
</dl>
<dl>
<dt><strong>vlan_tunnel on </strong>or<strong> vlan_tunnel off
</strong></dt>
<dd>
<p>Controls whether vlan to tunnel mapping is enabled on the port. By
default this flag is off.</p>
</dd>
</dl>
<dl>
<dt><strong>isolated on </strong>or<strong> isolated off </strong></dt>
<dd>
<p>Controls whether a given port will be isolated, which means it will
be able to communicate with non-isolated ports only. By default this
flag is off.</p>
</dd>
</dl>
<dl>
<dt><strong>locked on </strong>or<strong> locked off </strong></dt>
<dd>
<p>Controls whether a port will be locked, meaning that hosts behind the
port will not be able to communicate through the port unless an FDB
entry with the units MAC address is in the FDB. The common use is that
hosts are allowed access through authentication with the IEEE 802.1X
protocol or based on whitelists or like setups. By default this flag is
off.</p>
</dd>
</dl>
<dl>
<dt><strong>backup_port</strong><em> DEVICE</em></dt>
<dd>
<p>If the port loses carrier all traffic will be redirected to the
configured backup port</p>
</dd>
</dl>
<dl>
<dt><strong>nobackup_port</strong></dt>
<dd>
<p>Removes the currently configured backup port</p>
</dd>
</dl>
<dl>
<dt><strong>self</strong></dt>
<dd>
<p>link setting is configured on specified physical device</p>
</dd>
</dl>
<dl>
<dt><strong>master</strong></dt>
<dd>
<p>link setting is configured on the software bridge (default)</p>
</dd>
</dl>
<dl>
<dt><strong>-t</strong>,<strong> -timestamp</strong></dt>
<dd>
<p>display current time when using monitor option.</p>
</dd>
</dl>
<h2>bridge link show - list ports configuration for all bridges.</h2>
<p>This command displays port configuration and flags for all
bridges.</p>
<p>To display port configuration and flags for a specific bridge, use
the "ip link show master &lt;bridge_device&gt;" command.</p>
<h1>bridge fdb - forwarding database management</h1>
<p><strong>fdb</strong> objects contain known Ethernet addresses on a
link.</p>
<p>The corresponding commands display fdb entries, add new entries,
append entries, and delete old ones.</p>
<h2>bridge fdb add - add a new fdb entry</h2>
<p>This command creates a new fdb entry.</p>
<dl>
<dt><strong>LLADDR</strong></dt>
<dd>
<p>the Ethernet MAC address.</p>
</dd>
</dl>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the interface to which this address is associated.</p>
<p><strong>local</strong> - is a local permanent fdb entry, which means
that the bridge will not forward frames with this destination MAC
address and VLAN ID, but terminate them locally. This flag is default
unless "static" or "dynamic" are explicitly specified.</p>
</dd>
</dl>
<p><strong>permanent</strong> - this is a synonym for "local"</p>
<p><strong>static</strong> - is a static (no arp) fdb entry</p>
<p><strong>dynamic</strong> - is a dynamic reachable age-able fdb
entry</p>
<p><strong>self</strong> - the operation is fulfilled directly by the
driver for the specified network device. If the network device belongs
to a master like a bridge, then the bridge is bypassed and not notified
of this operation (and if the device does notify the bridge, it is
driver-specific behavior and not mandated by this flag, check the driver
for more details). The "bridge fdb add" command can also be used on the
bridge device itself, and in this case, the added fdb entries will be
locally terminated (not forwarded). In the latter case, the "self" flag
is mandatory. The flag is set by default if "master" is not
specified.</p>
<p><strong>master</strong> - if the specified network device is a port
that belongs to a master device such as a bridge, the operation is
fulfilled by the master device's driver, which may in turn notify the
port driver too of the address. If the specified device is a master
itself, such as a bridge, this flag is invalid.</p>
<p><strong>router</strong> - the destination address is associated with
a router. Valid if the referenced device is a VXLAN type device and has
route short circuit enabled.</p>
<p><strong>use</strong> - the address is in use. User space can use this
option to indicate to the kernel that the fdb entry is in use.</p>
<p><strong>extern_learn</strong> - this entry was learned externally.
This option can be used to indicate to the kernel that an entry was
hardware or user-space controller learnt dynamic entry. Kernel will not
age such an entry.</p>
<p><strong>sticky</strong> - this entry will not change its port due to
learning.</p>
<p>The next command line parameters apply only when the specified device
<em>DEV</em> is of type VXLAN.</p>
<dl>
<dt><strong>dst</strong><em> IPADDR</em></dt>
<dd>
<p>the IP address of the destination VXLAN tunnel endpoint where the
Ethernet MAC ADDRESS resides.</p>
</dd>
</dl>
<dl>
<dt><strong>src_vni</strong><em> VNI</em></dt>
<dd>
<p>the src VNI Network Identifier (or VXLAN Segment ID) this entry
belongs to. Used only when the vxlan device is in external or collect
metadata mode. If omitted the value specified at vxlan device creation
will be used.</p>
</dd>
</dl>
<dl>
<dt><strong>vni</strong><em> VNI</em></dt>
<dd>
<p>the VXLAN VNI Network Identifier (or VXLAN Segment ID) to use to
connect to the remote VXLAN tunnel endpoint. If omitted the value
specified at vxlan device creation will be used.</p>
</dd>
</dl>
<dl>
<dt><strong>port</strong><em> PORT</em></dt>
<dd>
<p>the UDP destination PORT number to use to connect to the remote VXLAN
tunnel endpoint. If omitted the default value is used.</p>
</dd>
</dl>
<dl>
<dt><strong>via</strong><em> DEVICE</em></dt>
<dd>
<p>device name of the outgoing interface for the VXLAN device driver to
reach the remote VXLAN tunnel endpoint.</p>
</dd>
</dl>
<dl>
<dt><strong>nhid</strong><em> NHID </em></dt>
<dd>
<p>ecmp nexthop group for the VXLAN device driver to reach remote VXLAN
tunnel endpoints.</p>
</dd>
</dl>
<h2>bridge fdb append - append a forwarding database entry</h2>
<p>This command adds a new fdb entry with an already known
<em>LLADDR</em>. Valid only for multicast link layer addresses. The
command adds support for broadcast and multicast Ethernet MAC addresses.
The Ethernet MAC address is added multiple times into the forwarding
database and the vxlan device driver sends a copy of the data packet to
each entry found.</p>
<p>The arguments are the same as with <strong>bridge fdb
add</strong>.</p>
<h2>bridge fdb delete - delete a forwarding database entry</h2>
<p>This command removes an existing fdb entry.</p>
<p>The arguments are the same as with <strong>bridge fdb
add</strong>.</p>
<h2>bridge fdb replace - replace a forwarding database entry</h2>
<p>If no matching entry is found, a new one will be created instead.</p>
<p>The arguments are the same as with <strong>bridge fdb
add</strong>.</p>
<h2>bridge fdb show - list forwarding entries.</h2>
<p>This command displays the current forwarding table.</p>
<p>With the <strong>-statistics</strong> option, the command becomes
verbose. It prints out the last updated and last used time for each
entry.</p>
<h2>bridge fdb get - get bridge forwarding entry.</h2>
<p>lookup a bridge forwarding table entry.</p>
<dl>
<dt><strong>LLADDR</strong></dt>
<dd>
<p>the Ethernet MAC address.</p>
</dd>
</dl>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the interface to which this address is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>brport</strong><em> DEV</em></dt>
<dd>
<p>the bridge port to which this address is associated. same as dev
above.</p>
</dd>
</dl>
<dl>
<dt><strong>br</strong><em> DEV</em></dt>
<dd>
<p>the bridge to which this address is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>self</strong></dt>
<dd>
<p>- the address is associated with the port drivers fdb. Usually
hardware.</p>
</dd>
</dl>
<dl>
<dt><strong>master</strong></dt>
<dd>
<p>- the address is associated with master devices fdb. Usually software
(default).</p>
</dd>
</dl>
<h2>bridge fdb flush - flush bridge forwarding table entries.</h2>
<p>flush the matching bridge forwarding table entries. Some options
below have a negated form when "no" is prepended to them (e.g. permanent
and nopermanent).</p>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the target device for the operation. If the device is a bridge port
and "master" is set then the operation will be fulfilled by its master
device's driver and all entries pointing to that port will be
deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>brport</strong><em> DEV</em></dt>
<dd>
<p>the target bridge port for the operation. If the bridge device is
specified then only entries pointing to the bridge itself will be
deleted. Note that the target device specified by this option will
override the one specified by dev above.</p>
</dd>
</dl>
<dl>
<dt><strong>vlan</strong><em> VID</em></dt>
<dd>
<p>the target VLAN ID for the operation. Match forwarding table entries
only with the specified VLAN ID.</p>
</dd>
</dl>
<dl>
<dt><strong>self</strong></dt>
<dd>
<p>the operation is fulfilled directly by the driver for the specified
network device. If the network device belongs to a master like a bridge,
then the bridge is bypassed and not notified of this operation. The
"bridge fdb flush" command can also be used on the bridge device itself.
The flag is set by default if "master" is not specified.</p>
</dd>
</dl>
<dl>
<dt><strong>master</strong></dt>
<dd>
<p>if the specified network device is a port that belongs to a master
device such as a bridge, the operation is fulfilled by the master
device's driver.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]permanent</strong></dt>
<dd>
<p>if specified then only permanent entries will be deleted or
respectively if "no" is prepended then only non-permanent entries will
be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]static</strong></dt>
<dd>
<p>if specified then only static entries will be deleted or respectively
if "no" is prepended then only non-static entries will be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]dynamic</strong></dt>
<dd>
<p>if specified then only dynamic entries will be deleted or
respectively if "no" is prepended then only non-dynamic (static or
permanent) entries will be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]added_by_user</strong></dt>
<dd>
<p>if specified then only entries with added_by_user flag will be
deleted or respectively if "no" is prepended then only entries without
added_by_user flag will be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]extern_learn</strong></dt>
<dd>
<p>if specified then only entries with extern_learn flag will be deleted
or respectively if "no" is prepended then only entries without
extern_learn flag will be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]sticky</strong></dt>
<dd>
<p>if specified then only entries with sticky flag will be deleted or
respectively if "no" is prepended then only entries without sticky flag
will be deleted.</p>
</dd>
</dl>
<dl>
<dt><strong>[no]offloaded</strong></dt>
<dd>
<p>if specified then only entries with offloaded flag will be deleted or
respectively if "no" is prepended then only entries without offloaded
flag will be deleted.</p>
</dd>
</dl>
<h1>bridge mdb - multicast group database management</h1>
<p><strong>mdb</strong> objects contain known IP or L2 multicast group
addresses on a link.</p>
<p>The corresponding commands display mdb entries, add new entries, and
delete old ones.</p>
<h2>bridge mdb add - add a new multicast group database entry</h2>
<p>This command creates a new mdb entry.</p>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the interface where this group address is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>port</strong><em> PORT</em></dt>
<dd>
<p>the port whose link is known to have members of this multicast
group.</p>
</dd>
</dl>
<dl>
<dt><strong>grp</strong><em> GROUP</em></dt>
<dd>
<p>the multicast group address (IPv4, IPv6 or L2 multicast) whose
members reside on the link connected to the port.</p>
<p><strong>permanent</strong> - the mdb entry is permanent. Optional for
IPv4 and IPv6, mandatory for L2.</p>
</dd>
</dl>
<p><strong>temp</strong> - the mdb entry is temporary (default)</p>
<dl>
<dt><strong>src</strong><em> SOURCE</em></dt>
<dd>
<p>optional source IP address of a sender for this multicast group. If
IGMPv3 for IPv4, or MLDv2 for IPv6 respectively, are enabled it will be
included in the lookup when forwarding multicast traffic.</p>
</dd>
</dl>
<dl>
<dt><strong>vid</strong><em> VID</em></dt>
<dd>
<p>the VLAN ID which is known to have members of this multicast
group.</p>
</dd>
</dl>
<h2>bridge mdb delete - delete a multicast group database entry</h2>
<p>This command removes an existing mdb entry.</p>
<p>The arguments are the same as with <strong>bridge mdb
add</strong>.</p>
<h2>bridge mdb show - list multicast group database entries</h2>
<p>This command displays the current multicast group membership table.
The table is populated by IGMP and MLD snooping in the bridge driver
automatically. It can be altered by <strong>bridge mdb add</strong> and
<strong>bridge mdb del</strong> commands manually too.</p>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the interface only whose entries should be listed. Default is to list
all bridge interfaces.</p>
</dd>
</dl>
<p>With the <strong>-details</strong> option, the command becomes
verbose. It prints out the ports known to have a connected router.</p>
<p>With the <strong>-statistics</strong> option, the command displays
timer values for mdb and router port entries.</p>
<h1>bridge vlan - VLAN filter list</h1>
<p><strong>vlan</strong> objects contain known VLAN IDs for a link.</p>
<p>The corresponding commands display vlan filter entries, add new
entries, and delete old ones.</p>
<h2>bridge vlan add - add a new vlan filter entry</h2>
<p>This command creates a new vlan filter entry.</p>
<dl>
<dt><strong>dev</strong><em> NAME</em></dt>
<dd>
<p>the interface with which this vlan is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>vid</strong><em> VID</em></dt>
<dd>
<p>the VLAN ID that identifies the vlan.</p>
</dd>
</dl>
<dl>
<dt><strong>tunnel_info</strong><em> TUNNEL_ID</em></dt>
<dd>
<p>the TUNNEL ID that maps to this vlan. The tunnel id is set in
dst_metadata for every packet that belongs to this vlan (applicable to
bridge ports with vlan_tunnel flag set).</p>
</dd>
</dl>
<dl>
<dt><strong>pvid</strong></dt>
<dd>
<p>the vlan specified is to be considered a PVID at ingress. Any
untagged frames will be assigned to this VLAN.</p>
</dd>
</dl>
<dl>
<dt><strong>untagged</strong></dt>
<dd>
<p>the vlan specified is to be treated as untagged on egress.</p>
</dd>
</dl>
<dl>
<dt><strong>self</strong></dt>
<dd>
<p>the vlan is configured on the specified physical device. Required if
the device is the bridge device.</p>
</dd>
</dl>
<dl>
<dt><strong>master</strong></dt>
<dd>
<p>the vlan is configured on the software bridge (default).</p>
</dd>
</dl>
<h2>bridge vlan delete - delete a vlan filter entry</h2>
<p>This command removes an existing vlan filter entry.</p>
<p>The arguments are the same as with <strong>bridge vlan add</strong>.
The <strong>pvid </strong>and<strong> untagged</strong> flags are
ignored.</p>
<h2>bridge vlan set - change vlan filter entry's options</h2>
<p>This command changes vlan filter entry's options.</p>
<dl>
<dt><strong>dev</strong><em> NAME</em></dt>
<dd>
<p>the interface with which this vlan is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>vid</strong><em> VID</em></dt>
<dd>
<p>the VLAN ID that identifies the vlan.</p>
</dd>
</dl>
<dl>
<dt><strong>state</strong><em> STP_STATE </em></dt>
<dd>
<p>the operation state of the vlan. One may enter STP state name (case
insensitive), or one of the numbers below. Negative inputs are ignored,
and unrecognized names return an error. Note that the state is set only
for the vlan of the specified device, e.g. if it is a bridge port then
the state will be set only for the vlan of the port.</p>
<p><strong>0</strong> - vlan is in STP <strong>DISABLED</strong> state.
Make this vlan completely inactive for STP. This is also called BPDU
filter and could be used to disable STP on an untrusted vlan.</p>
</dd>
</dl>
<p><strong>1</strong> - vlan is in STP <strong>LISTENING</strong> state.
Only valid if STP is enabled on the bridge. In this state the vlan
listens for STP BPDUs and drops all other traffic frames.</p>
<p><strong>2</strong> - vlan is in STP <strong>LEARNING</strong> state.
Only valid if STP is enabled on the bridge. In this state the vlan will
accept traffic only for the purpose of updating MAC address tables.</p>
<p><strong>3</strong> - vlan is in STP <strong>FORWARDING</strong>
state. This is the default vlan state.</p>
<p><strong>4</strong> - vlan is in STP <strong>BLOCKING</strong> state.
Only valid if STP is enabled on the bridge. This state is used during
the STP election process. In this state, the vlan will only process STP
BPDUs.</p>
<dl>
<dt><strong>mcast_router</strong><em> MULTICAST_ROUTER </em></dt>
<dd>
<p>configure this vlan and interface's multicast router mode, note that
only modes 0 - 2 are available for bridge devices. A vlan and interface
with a multicast router will receive all multicast traffic.
<em>MULTICAST_ROUTER</em> may be either</p>
<p><strong>0</strong> - to disable multicast router.</p>
</dd>
</dl>
<p><strong>1</strong> - to let the system detect the presence of routers
(default).</p>
<p><strong>2</strong> - to permanently enable multicast traffic
forwarding on this vlan and interface.</p>
<p><strong>3</strong> - to temporarily mark this vlan and port as having
a multicast router, i.e. enable multicast traffic forwarding. This mode
is available only for ports.</p>
<h2>bridge vlan show - list vlan configuration.</h2>
<p>This command displays the current VLAN filter table.</p>
<p>With the <strong>-details</strong> option, the command becomes
verbose. It displays the per-vlan options.</p>
<p>With the <strong>-statistics</strong> option, the command displays
per-vlan traffic statistics.</p>
<h2>bridge vlan tunnelshow - list vlan tunnel mapping.</h2>
<p>This command displays the current vlan tunnel info mapping.</p>
<h2>bridge vlan global set - change vlan filter entry's global
options</h2>
<p>This command changes vlan filter entry's global options.</p>
<dl>
<dt><strong>dev</strong><em> NAME</em></dt>
<dd>
<p>the interface with which this vlan is associated. Only bridge devices
are supported for global options.</p>
</dd>
</dl>
<dl>
<dt><strong>vid</strong><em> VID</em></dt>
<dd>
<p>the VLAN ID that identifies the vlan.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_snooping</strong><em> MULTICAST_SNOOPING </em></dt>
<dd>
<p>turn multicast snooping for VLAN entry with VLAN ID on
(<em>MULTICAST_SNOOPING</em> &gt; 0) or off (<em>MULTICAST_SNOOPING</em>
== 0). Default is on.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_querier</strong><em> MULTICAST_QUERIER </em></dt>
<dd>
<p>enable (<em>MULTICAST_QUERIER</em> &gt; 0) or disable
(<em>MULTICAST_QUERIER</em> == 0) IGMP/MLD querier, ie sending of
multicast queries by the bridge. Default is disabled.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_igmp_version</strong><em> IGMP_VERSION </em></dt>
<dd>
<p>set the IGMP version. Default is 2.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_mld_version</strong><em> MLD_VERSION </em></dt>
<dd>
<p>set the MLD version. Default is 1.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_last_member_count</strong><em> LAST_MEMBER_COUNT
</em></dt>
<dd>
<p>set multicast last member count, ie the number of queries the bridge
will send before stopping forwarding a multicast group after a "leave"
message has been received. Default is 2.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_last_member_interval</strong><em> LAST_MEMBER_INTERVAL
</em></dt>
<dd>
<p>interval between queries to find remaining members of a group, after
a "leave" message is received.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_startup_query_count</strong><em> STARTUP_QUERY_COUNT
</em></dt>
<dd>
<p>set the number of queries to send during startup phase. Default is
2.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_startup_query_interval</strong><em>
STARTUP_QUERY_INTERVAL </em></dt>
<dd>
<p>interval between queries in the startup phase.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_membership_interval</strong><em> MEMBERSHIP_INTERVAL
</em></dt>
<dd>
<p>delay after which the bridge will leave a group, if no membership
reports for this group are received.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_querier_interval</strong><em> QUERIER_INTERVAL
</em></dt>
<dd>
<p>interval between queries sent by other routers. If no queries are
seen after this delay has passed, the bridge will start to send its own
queries (as if <strong>mcast_querier</strong> was enabled).</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_query_interval</strong><em> QUERY_INTERVAL </em></dt>
<dd>
<p>interval between queries sent by the bridge after the end of the
startup phase.</p>
</dd>
</dl>
<dl>
<dt><strong>mcast_query_response_interval</strong><em>
QUERY_RESPONSE_INTERVAL </em></dt>
<dd>
<p>set the Max Response Time/Maximum Response Delay for IGMP/MLD queries
sent by the bridge.</p>
</dd>
</dl>
<h2>bridge vlan global show - list global vlan options.</h2>
<p>This command displays the global VLAN options for each VLAN
entry.</p>
<dl>
<dt><strong>dev</strong><em> DEV</em></dt>
<dd>
<p>the interface only whose VLAN global options should be listed.
Default is to list all bridge interfaces.</p>
</dd>
</dl>
<dl>
<dt><strong>vid</strong><em> VID</em></dt>
<dd>
<p>the VLAN ID only whose global options should be listed. Default is to
list all vlans.</p>
</dd>
</dl>
<h1>bridge vni - VNI filter list</h1>
<p><strong>vni</strong> objects contain known VNI IDs for a dst metadata
vxlan link.</p>
<p>The corresponding commands display vni filter entries, add new
entries, and delete old ones.</p>
<h2>bridge vni add - add a new vni filter entry</h2>
<p>This command creates a new vni filter entry.</p>
<dl>
<dt><strong>dev</strong><em> NAME</em></dt>
<dd>
<p>the interface with which this vni is associated.</p>
</dd>
</dl>
<dl>
<dt><strong>vni</strong><em> VNI</em></dt>
<dd>
<p>the VNI ID that identifies the vni.</p>
</dd>
</dl>
<dl>
<dt><strong>remote</strong><em> IPADDR</em></dt>
<dd>
<p>specifies the unicast destination IP address to use in outgoing
packets when the destination link layer address is not known in the
VXLAN device forwarding database. This parameter cannot be specified
with the group.</p>
</dd>
</dl>
<dl>
<dt><strong>group</strong><em> IPADDR</em></dt>
<dd>
<p>specifies the multicast IP address to join for this VNI</p>
</dd>
</dl>
<h2>bridge vni del - delete a new vni filter entry</h2>
<p>This command removes an existing vni filter entry.</p>
<p>The arguments are the same as with <strong>bridge vni
add</strong>.</p>
<h2>bridge vni show - list vni filtering configuration.</h2>
<p>This command displays the current vni filter table.</p>
<p>With the <strong>-statistics</strong> option, the command displays
per-vni traffic statistics.</p>
<dl>
<dt><strong>dev</strong><em> NAME</em></dt>
<dd>
<p>shows vni filtering table associated with the vxlan device</p>
</dd>
</dl>
<h1>bridge monitor - state monitoring</h1>
<p>The <strong>bridge</strong> utility can monitor the state of devices
and addresses continuously. This option has a slightly different format.
Namely, the <strong>monitor</strong> command is the first in the command
line and then the object list follows:</p>
<p><strong>bridge monitor</strong> [ <strong>all</strong> |
<em>OBJECT-LIST</em> ]</p>
<p><em>OBJECT-LIST</em> is the list of object types that we want to
monitor. It may contain <strong>link</strong>, <strong>fdb</strong>,
<strong>vlan</strong> and <strong>mdb</strong>. If no
<strong>file</strong> argument is given, <strong>bridge</strong> opens
RTNETLINK, listens on it and dumps state changes in the format described
in previous sections.</p>
<p>If a file name is given, it does not listen on RTNETLINK, but opens
the file containing RTNETLINK messages saved in binary format and dumps
them.</p>
<h1>NOTES</h1>
<p>This command uses facilities added in Linux 3.0.</p>
<p>Although the forwarding table is maintained on a per-bridge device
basis the bridge device is not part of the syntax. This is a limitation
of the underlying netlink neighbour message protocol. When displaying
the forwarding table, entries for all bridges are displayed.
Add/delete/modify commands determine the underlying bridge device based
on the bridge to which the corresponding ethernet device is
attached.</p>
<h1>SEE ALSO</h1>
<p><strong>ip</strong>(8)</p>
<h1>BUGS</h1>
<p>Please direct bugreports and patches to:
<strong>&lt;netdev@vger.kernel.org&gt;</strong></p>
<h1>AUTHOR</h1>
<p>Original Manpage by Stephen Hemminger</p>
